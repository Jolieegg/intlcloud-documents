このドキュメントでは、インスタンスとデータをオフラインで移行する方法について説明します。

## 概要

サービス移行は、企業のクラウド移行を加速することに役立つ、Tencent Cloud によって開発された移行プラットフォームです。この移行プラットフォームを使用すると、OS、アプリケーション、およびアプリケーションデータをソースサーバーからCloud Virtual Machine (CVM) インスタンスまたはCloud Block Storage (CBS) インスタンスに移行できます。これは、クラウド化、クロスクラウド移行、クロスアカウントまたはクロスリージョン移行、およびハイブリッドクラウド展開に対する企業のニーズを満たすのに役立ちます。

サービス移行には、オフラインとオンラインの両方の移行がサポートされます。 オフライン移行は、次の2つのタイプに分かれます。
- [CVMへの移行](#cvmStep)：システムディスクイメージ（または必要に応じてシステムディスクイメージとデータディスクイメージの両方）を特定のCVMインスタンスに移行できます。
- [CBSへの移行](#csmStep)：データディスクイメージを指定のクラウドディスクに移行できます。

## 前提条件

 オフライン移行には、Cloud Object Storage（COS）のサポートが必要です。所在リージョンで COS が利用可能であることを確認してください。
現在COSでサポートされているリージョンについては、 [リージョンとアクセスドメイン名](https://intl.cloud.tencent.com/document/product/436/6224)をご参照ください。

## 準備作業


<dx-alert infotype="notice" title="">
- 現在、Tencent Cloudのサービス移行でサポートされているイメージ形式は、qcow2、vhd、vmdk、および raw です。伝送と移行の時間を短縮するために、圧縮イメージ形式を使用することをお勧めします。
- アップロードするイメージは、宛先CVMインスタンスと同じリージョンのCOSバケットに保存する必要があります。さらに、COSバケットはパブリック読み取りアクセスを許可する必要があります。
- システムディスクイメージとデータディスクイメージの両方をインポートする必要がある場合は、対応する数のデータディスクをターゲットインスタンスにマウントする必要があります。
- ターゲットディスクの容量はソースディスクの容量以上である必要があります。
- オフライン移行では、スナップショットファイル (*-00000*.vmdkなどのファイル名を持つスナップショットファイル) の移行はサポートされていません。
</dx-alert>



- イメージ制作ドキュメントに従って、ソースサーバーのイメージを作成します。
 - Windows の場合は、 [Windowsイメージの作成](https://intl.cloud.tencent.com/document/product/213/17815)をご参照ください。
 - Linux の場合は、 [Linuxイメージの作成](https://intl.cloud.tencent.com/document/product/213/17814)をご参照ください。
- 作成したイメージファイルをCOSにアップロードします。

 - イメージサイズが大きいため、ブラウザからアップロードすると失敗する場合があります。 イメージをアップロードするには COSCMD ツールを使用することをお勧めします。操作の詳細については、 [COSCMD ツール](https://intl.cloud.tencent.com/document/product/436/10976)をご参照ください。
 - 他のクラウドプラットフォームからエクスポートされたイメージが圧縮パッケージ (.tar.gz ファイルなど) である場合、それらをCOSに直接アップロードできます。
- アップロードしたイメージのCOSアドレスを取得します。
[COSコンソール](https://console.cloud.tencent.com/cos5/bucket) に移動し、アップロードしたイメージファイルを見つけて、イメージファイルの詳細ページで一時リンクをコピーします。
- 移行するCVMまたはCBSインスタンスを用意します。
 - [CVMの購入に進む](https://buy.intl.cloud.tencent.com/cvm?tab=custom&step=1&devPayMode=spotpaid&regionId=8&templateCreateMode=createLt)
 - [CBS購入ガイドライン](https://intl.cloud.tencent.com/document/product/362/32414)


## 操作手順
<dx-tabs>
::: CVMへの移行[](id:cvmStep)
1. CVMコンソールにログインし、左側ナビゲーションの **[サービス移行](https://console.cloud.tencent.com/cvm/csm/index?rid=4)**をクリックします。
2. 「オフライン移行」ページで「CVMに移行」をクリックします。
3. 「CVMに移行」画面が表示されます。この画面で準備を完了し、「**次へ**」をクリックします。
4. リージョンを選択し、タスク名、COS リンク、移行先のCVMインスタンスなどの情報を入力します。下図に示すとおりです。
![](https://qcloudimg.tencent-cloud.cn/raw/7f3beecb92122f70f42fa86e652d35d9.png)
5. **完了**をクリックすると、移行タスクを正常に作成します。
移行中に[サービス移行](https://console.cloud.tencent.com/cvm/csm/index?rid=4) ページを終了または閉じることができます。 また、いつでもこのページに戻って移行の進捗状況を確認することができます。



:::
::: CBSへの移行[](id:csmStep)
1. CVMコンソールにログインし、左側ナビゲーションの **[サービス移行](https://console.cloud.tencent.com/cvm/csm/index?rid=4)**をクリックします。
2.「オフライン移行」ページで「CBSに移行」をクリックします。
3. 「CBSに移行」画面が表示されます。この画面で準備を完了し、「**次へ**」をクリックします。
4. リージョンを選択し、タスク名、COS リンク、移行先のCBSインスタンスなどの情報を入力します。下図に示すとおりです。
![](https://qcloudimg.tencent-cloud.cn/raw/7bf477c4a8811b1fe1395fa018762c25.png)
5. 5. **完了**をクリックすると、移行タスクを正常に作成します。
移行中に[サービス移行](https://console.cloud.tencent.com/cvm/csm/index?rid=4) ページを終了または閉じることができます。 また、いつでもこのページに戻って移行の進捗状況を確認することができます。



:::
</dx-tabs>

## よくあるご質問
詳細については、[サービス移行](https://intl.cloud.tencent.com/document/product/213/32395)をご参照ください。