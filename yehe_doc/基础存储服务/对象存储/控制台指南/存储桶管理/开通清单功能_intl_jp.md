## 概要

[COSコンソール](https://console.cloud.tencent.com/cos5)から、バケットのリスト機能をアクティブ化することができます。リスト機能をアクティブ化すると、毎日または毎週定期的に、オブジェクトの属性、設定の詳細などに関するリストレポートをお客様のバケットに出力することができます。リストに関するその他の詳細については、[リスト機能の概要](https://intl.cloud.tencent.com/document/product/436/30622)をご参照ください。次に、バケットリスト機能をアクティブ化する方法について詳しくご説明します。

> !
>- ユーザーは1つのバケットに複数のリストタスクを設定することができます。
>- リストタスクは、オブジェクトの内容を直接読み取るのではなく、オブジェクトのメタデータなどのプロパティ情報をスキャンするだけです。
>- リスト機能は現時点では金融クラウドリージョンをサポートしていません。

##  前提条件

バケットを作成します。詳細については、[バケットの作成](https://intl.cloud.tencent.com/document/product/436/13309)のドキュメントをご参照ください。

## 操作手順

1. [COSコンソール](https://console.cloud.tencent.com/cos5)にログインします。
2. 左側ナビゲーションバーで【バケットリスト】をクリックし、リスト機能をアクティブ化したいバケット（ソースバケット）をクリックして進みます。
3. 左側の【基本設定】>【リストの設定】をクリックし、【リストの追加】をクリックします。
   ![](https://main.qcloudimg.com/raw/73aa7b3f19389dfdd42d4066e6437329.png)
4. **リストの追加**ページでは、以下の設定を行うことができます。
  - **リスト名**：出力するリスト名を入力します。
  - **ターゲットバケット**：リストをストレージするバケットのことです。最初のデフォルトのターゲットバケットはソースバケットです。ターゲットバケットは、ソースバケットと同じリージョンにある必要があります。
 - **リストレポートプレフィックス（オプション）**：ターゲットバケット用に選択したプレフィックスを入力すると、パブリックロケーションのリストファイルをグループ化できます。初期値はデフォルト値です。
 - **ステータス**：リストのオン/オフを選択できます。
 - **【高度な設定】**：高度な設定では、リストに関するより多くの情報を設定することができます。高度な設定を行わない場合は、すべてデフォルトの設定になります。
   - **出力形式**：デフォルトの場合、CSV形式で出力されます。
   - **オブジェクトバージョン**：リストにオブジェクトのすべてのバージョンを含めるか、現在のバージョンのみを含めるかを選択します。選択しない場合、デフォルトで現在のバージョンのみが保持されます。
   - **発行サイクル**：リストを毎日/毎週エクスポートするかを選択します。デフォルトでは毎日エクスポートします。例えば、当日の15時にリストを追加した場合、通常は遅くとも翌日の6時にはリストファイルが発行されてターゲットバケットに配信されます。
   - **フィルタリングプレフィックス（オプション）**：フィルタリングにより、同じオブジェクトキープレフィックスを持つオブジェクトをリストに入れます。入力されていない場合、デフォルトではフィルタリングは行われません。
   - **フィルタリング時間（オプション）**：フィルタリングにより、変更時刻が特定の時点以降または特定の時間帯のオブジェクトをリストに入れます。設定されていない場合、デフォルトではフィルタリングは行われません。
   - **リスト暗号化**：リストにサーバー側の暗号化が必要かどうかを選択します。次のいずれかを選択できます。
     - 暗号化なし：リストの暗号化を行いません。これはデフォルト項目です。
     - SSE-COS：COSホストキーのサーバー側の暗号化を使用してレポートを暗号化します。詳細については、COS開発者ガイドの[SSE-COS暗号化](https://intl.cloud.tencent.com/document/product/436/18145)をご参照ください。
   - **リスト情報**：リストレポートに含める必要のあるオブジェクトに対応する情報を選択します。選択可能な項目には、オブジェクトサイズ、ストレージクラス、ETag、バケットコピーのステータス、マルチパートアップロードのステータス、最新の更新日があります。選択されていない場合、デフォルトですべてが選択されます。
     ![](https://main.qcloudimg.com/raw/a219e0eb29661c254f0a70f094cf1ae0.png)

> !ETag（エンティティタグ）とはオブジェクトのハッシュです。ETag はオブジェクトの内容への変更のみを反映し、メタデータへの変更は反映しません。ETagは、必ずしもオブジェクトデータのMD5ダイジェストではなく、オブジェクトの作成方法と暗号化方法によって決まります。

5. 設定情報が正しいことを確認したら、最後に【保存】をクリックすれば完了です。その後、COSは毎日または毎週、リストファイルを自動発行し、設定したターゲットバケットに配信します。
>?リスト機能によって発行されるリストレポートの形式と内容の詳細については、[リスト機能の概要](https://intl.cloud.tencent.com/document/product/436/30622)をご参照ください。
