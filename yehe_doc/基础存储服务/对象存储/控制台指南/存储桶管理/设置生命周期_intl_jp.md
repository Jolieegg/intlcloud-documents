## 概要

指定したオブジェクトに対し、定期的にストレージタイプの切り替えまたは削除を行い、コストを削減する必要がある場合は、ライフサイクル管理機能を使用することができます。COSは設定されたルールに従って、指定された時間内に指定されたオブジェクトのストレージタイプを自動的に切り替えまたは削除します。この機能の詳細については、[ライフサイクルの概要](https://intl.cloud.tencent.com/document/product/436/17028)のドキュメントをご参照ください。

>? ライフサイクルの設定は最長3650日までサポートしています。
>

## 操作手順

1. [COSコンソール](https://console.cloud.tencent.com/cos5)にログインします。
2. 左側ナビゲーションバーで**バケットリスト**をクリックし、バケットリストページに進みます。
3. アクティブ化したいライフサイクル機能のバケットを見つけ、そのバケット名をクリックし、バケット詳細ページに進みます。
4. 左側の**基本設定 > ライフサイクル**設定項目をクリックし、**ルールの追加**をクリックします。

5. ニーズに応じてライフサイクルルールを追加します。設定項目の説明は次のとおりです。
 - **ルール名**：ライフサイクルルール名を入力してください。
 - **適用範囲**：このライフサイクルルールは、全バケットに作用します。また、指定した範囲のオブジェクトにも作用します。現在次の範囲の選択をサポートしています。
    - オブジェクトプレフィックス： 同じファイルプレフィックスのオブジェクトを指定して、ライフサイクルルールを実行することができます。例えば、prefix/があります。
    - オブジェクトタグ：同じタグのオブジェクトを指定して、ライフサイクルルールを実行することができます。複数のタグの指定をサポートしています。アルファベットの大文字と小文字を区別してください。
>!オブジェクトプレフィックスとオブジェクトタグを同時に指定することができます。オブジェクトプレフィックスとオブジェクトタグ、オブジェクトタグとオブジェクトタグの間の関係は、「and」の関係となります。
>
 - **現在のバージョンのファイル管理**：現在のバージョンのオブジェクトを管理するオプションをアクティブにすると、現在のバージョンのオブジェクトを移行または削除することができます。バケット内のオブジェクトは、標準ストレージから低頻度ストレージ、アーカイブストレージまたはディープアーカイブストレージへの移行がサポートされています。有効期限が切れた後のオブジェクトの削除がサポートされています。
   そのうち、ストレージタイプは、ホットからコールドまで、それぞれ次のようになります。**標準ストレージ** >**低頻度ストレージ** > **INTELLIGENT_TIERINGストレージ**>**アーカイブストレージ**>**ディープアーカイブストレージ**。ストレージタイプの変更は、ホットからコールドのみで、その逆はできません。時間は、COSでのドキュメントの変更時間を標準にして計算し、オブジェクトの動作などの変更は、オブジェクトの再アップロードに相当します。
>?マルチAZ設定のバケットを有効化すると、ライフサイクルの変換順序は**標準ストレージ（マルチAZ）** > **低頻度ストレージ（マルチAZ）** > **INTELLIGENT_TIERINGストレージ（マルチAZ）**のみをサポートします。
>
 - **過去のバージョンのファイル管理**：過去のバージョンのオブジェクトを管理するオプションをアクティブにすると、過去のバージョンのオブジェクトを移行または削除することができます。このオプションをまだアクティブにしていない場合は、最新バージョンのオブジェクトのみがデフォルトで処理されます。
 - **履歴のないバージョンの削除マーカーのクリーンアップ**：オブジェクトの最新バージョンが削除マーカー（Delete Marker）で、かつそのオブジェクトの過去のバージョンがすべて削除されていた場合は、このオプションをアクティブにすると、削除マーカー（Delete Marker）も削除されます。このオプションは、**現在のバージョンのファイル管理**の期限切れによる削除と同時にアクティブにすることはできません。
 - **フラグメントの削除**：ファイルをアップロードする時に、さまざまな原因でアップロードが失敗し、そのうちの一部だけが送信された場合は、この破損したファイルを定期的に削除するように設定することができます。


6. ライフサイクルルールを設定し、**確定**をクリックすると、ライフサイクルルールを確認することができます。

7. ライフサイクルルールを停止したい場合は、**編集**をクリックし、対応するルールの状態を**閉じる**に変更、またはライフサイクルルールを直接削除します。
8. 現在のバケットのすべてのライフサイクルルールをクリアしたい場合は**すべてのルールをクリア**をクリックします。



