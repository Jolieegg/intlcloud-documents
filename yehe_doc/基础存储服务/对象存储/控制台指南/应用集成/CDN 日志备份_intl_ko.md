## 소개

도메인을 [CDN(Content Delivery Network)](https://intl.cloud.tencent.com/document/product/228/2939)에 액세스하면 모든 사용자 측의 리소스 요청이 CDN 노드에 스케쥴링됩니다. 노드에 해당 리소스가 캐시되어 있는 경우 콘텐츠를 직접 반환하며 캐시되어 있지 않으면 도메인 구성의 원본 서버에 요청을 전달하여 필요한 리소스를 풀링합니다.

CDN 노드는 대부분의 사용자 요청에 응답하므로 사용자 액세스를 쉽게 분석하기 위해 전체 네트워크 액세스 로그를 시간 단위로 패키징합니다.

CDN 로그 백업은 Tencent Cloud COS(Cloud Object Storage)가 [SCF(Serverless Cloud Function)](https://www.tencentcloud.com/document/product/583)를 기반으로 CDN 로그를 COS에 저장하는 기능으로, CDN 로그를 변환하여 저장하면 사용자가 액세스 분석 및 서비스 품질 모니터링 등을 편리하게 할 수 있습니다.

사용자가 버킷에 로그 백업 규칙을 설정하면 SCF가 일정 시간 간격으로 CDN 로그를 획득하여 COS 버킷에 저장합니다.

## 주의 사항

- COS 콘솔에서 버킷에 CDN 로그 백업 규칙을 추가한 적이 있는 경우 [SCF 콘솔](https://console.cloud.tencent.com/scf/list?rid=1&ns=default)에서 기존에 생성한 CDN 로그 백업 함수를 볼 수 있습니다. 이 함수를 삭제하지 **마십시오.** 삭제할 경우 규칙이 적용되지 않을 수 있습니다.
- 광저우, 상하이, 중국 홍콩, 베이징, 청두, 싱가포르, 뭄바이, 토론토, 실리콘밸리 등 SCF를 런칭한 리전은 CDN 로그 백업을 지원합니다. 지원 리전에 대한 자세한 내용은 [SCF 제품 문서](https://www.tencentcloud.com/document/product/583)를 참고하십시오.

## 작업 단계

1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인합니다.
2. 왼쪽 사이드바에서 **애플리케이션 통합 > 데이터 백업**을 클릭하고 **CDN 로그 백업**을 찾습니다.
3. **백업 규칙 설정**을 클릭하여 규칙 설정 페이지로 이동합니다.
4. **함수 추가**를 클릭합니다.
>! SCF 서비스가 활성화되지 않은 경우 [SCF 콘솔](https://console.cloud.tencent.com/scf)에서 SCF 서비스를 활성화하고 안내에 따라 서비스 권한 부여를 완료하십시오.
>
5. 팝업 창에서 다음과 같이 정보를 설정합니다.
![](https://main.qcloudimg.com/raw/381a243bc2333c2a4dbd56f436826a33.png)
 - **함수 이름**: 함수의 고유 식별자로, 생성 후에는 수정할 수 없습니다. [SCF 콘솔](https://console.cloud.tencent.com/scf/list?rid=1&ns=default)에서 해당 함수를 조회할 수 있습니다.
 - **연결 버킷**: CDN 로그를 저장할 COS 버킷입니다.
 - **트리거 주기**: CDN 로그 백업은 주기적인 트리거를 통해 백업 작업을 하며 매일, 사용자 정의 주기를 지원합니다.
 - **Cron 표현식**: 트리거 주기를 사용자 정의로 설정한 경우 Cron으로 구체적인 트리거 주기 규칙을 지정할 수 있습니다. Cron은 현재 현지 표준 시간(Local Standard Time)을 따릅니다. 정책 설정에 관한 상세 내용은 [Cron 관련 문서](https://intl.cloud.tencent.com/document/product/583/9708)를 참고하십시오.
 - **CDN 도메인**: 하나 또는 여러 개의 지정 도메인 로그를 선택할 수 있습니다.
 - **전송 경로**: 루트 디렉터리 또는 지정된 경로 접두사로 전송할 수 있는 로그 파일 전송 경로입니다.
 - **SCF 라이선스**: CDN 로그 백업은 SCF에 권한을 부여하여 CDN 서비스를 이용할 때 로그 파일을 읽고 지정 버킷에 저장하므로 해당 라이선스 추가가 필요합니다.
6. 설정을 추가하고 **확인**을 클릭한 후 CDN 로그 백업 규칙이 생성될 때까지 기다립니다. 생성이 완료되면 리스트에서 이미 생성된 CDN 로그 백업 규칙을 조회할 수 있습니다.
새로 생성한 CDN 로그 백업 규칙에 다음과 같은 작업을 진행할 수 있습니다.
 - **로그**를 클릭해 CDN 로그 백업 기록을 조회합니다. 백업 시 오류가 보고된 경우 **로그**를 클릭하고 빠르게 SCF 콘솔에 리디렉션하여 로그 오류 상세 내용을 조회할 수 있습니다.
 - **더 보기 > 편집**을 클릭하여 CDN 로그 백업 규칙을 수정합니다.
 - **더 보기 > 삭제**를 클릭하여 사용하지 않는 CDN 로그 백업 규칙을 삭제합니다.
