## 소개

파일 해시 계산은 Tencent Cloud Object Storage(COS)가 [Serverless Cloud Function(SCF)](https://www.tencentcloud.com/document/product/583)을 기반으로 사용자에게 제공하는 파일 일관성 검증 솔루션입니다. 파일이 COS에 업로드되면 해시 값이 자동으로 계산되어 파일의 사용자 정의 헤더에 추가되어, 파일의 일관성을 확인할 수 있습니다.

## 주의 사항


- COS 콘솔에서 버킷에 파일 해시값 계산 규칙을 추가한 적이 있는 경우, [SCF 콘솔](https://console.cloud.tencent.com/scf/list?rid=1&ns=default)에서 기존에 생성한 파일 해시값 계산 함수를 볼 수 있습니다. 해당 함수를 삭제하지 **마십시오.** 삭제할 경우 규칙이 적용되지 않을 수 있습니다.
- 광저우, 상하이, 베이징, 청두, 중국홍콩, 싱가포르, 뭄바이, 토론토, 실리콘밸리 등 SCF를 런칭한 리전은 파일 해시값 계산을 지원합니다. 지원 리전에 대한 자세한 내용은 [SCF 제품 문서](https://www.tencentcloud.com/document/product/583)를 참고하십시오.
- 해시값 계산 과정 중 오류가 발생한 경우, 생성한 함수 오른쪽에 있는 **로그**를 클릭하여 SCF 콘솔로 이동해 로그 오류 상세 정보를 확인할 수 있습니다.
- ARCHIVE 및 DEEP ARCHIVE 유형의 파일은 해시값 계산이 지원되지 않습니다. 이러한 유형 파일의 해시값을 계산하려면 복구가 선행되어야 합니다. 복구 방법은 [아카이브된 객체 복구](https://intl.cloud.tencent.com/document/product/436/30961)를 참고하십시오.
- COS의 파일 해시값 계산 기능은 SCF 서비스에 종속됩니다. SCF 서비스는 사용자에게 [Free Tier](https://intl.cloud.tencent.com/document/product/583/12282)를 제공하며 무료 한도를 초과한 부분에 대해서는 [SCF Pricing](https://intl.cloud.tencent.com/document/product/583/12281)에 따라 청구됩니다.

## 작업 단계

1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인합니다.
2. 왼쪽 사이드바에서 **애플리케이션 통합 > 확장 기능**을 클릭하고 **파일 해시값 계산**을 찾습니다.
3. **해시 규칙 설정**을 클릭하여 규칙 설정 페이지로 이동합니다.
>! SCF 서비스가 활성화되지 않은 경우 [SCF 콘솔](https://console.cloud.tencent.com/scf)에서 SCF 서비스를 활성화하고 안내에 따라 서비스 권한 부여를 완료하십시오.
>
4. **함수 추가**를 클릭한 후, 팝업창에서 다음 정보를 설정합니다.

 - **함수 이름**: 함수의 고유 식별자로, 생성 후에는 수정할 수 없습니다. [SCF 콘솔](https://console.cloud.tencent.com/scf/list?rid=1&ns=default)에서 해당 함수를 조회할 수 있습니다.
 - **연결 버킷**: 계산하려는 해시값의 파일이 저장되어 있는 COS 버킷입니다.
 - **이벤트 유형**: 이벤트란 SCF를 트리거하는 작업입니다. 업로드 작업을 예로 들면, 업로드 방식은 `PUT Object` 인터페이스 호출 또는 `POST Object` 인터페이스 호출일 수 있습니다. 이벤트를 **Put 메소드 생성**으로 선택하면 `PUT Object` 인터페이스를 통해 업로드하는 파일만 파일 해시값 계산이 트리거됩니다.
 - **트리거 조건**: 파일을 어떤 경로에 업로드해야 SCF가 트리거되는지의 조건을 의미합니다. 특정 범위를 선택하는 경우, 파일을 특정 접두사 혹은 확장자에 업로드할 때 SCF가 트리거되며, 모든 버킷을 선택하는 경우 파일을 버킷 어떤 위치에 업로드해도 항상 트리거됩니다.
 -**SCF 권한 부여**: 파일 해시 값을 계산하려면 버킷에서 해당 파일을 읽고 계산된 해시 값 결과를 파일의 사용자 정의 헤더에 추가할 수 있도록 SCF 서비스 권한 부여 옵션을 선택하여, SCF에 권한을 부여해야 합니다.
5. 설정 추가하고 **확인** 클릭 후, 일정 시간이 지나면 함수가 추가된 것을 확인할 수 있습니다.
![img](https://qcloudimg.tencent-cloud.cn/raw/9c92852411105dbb48c41fcab36febd1.png)
새로 생성한 함수에 다음과 같은 작업을 진행할 수 있습니다.
 - **로그**를 클릭하여 파일 해시값 계산 함수의 실행 이력을 확인합니다. 함수에 오류가 발생한 경우, **로그**를 클릭하여 SCF 콘솔로 빠르게 이동해 로그 오류 상세 정보를 확인할 수 있습니다.
 - **더 보기 > 편집**을 클릭하여 파일 해시값 계산 규칙을 ​​수정합니다.
 - **더 보기 > 삭제**를 클릭하여 더 이상 필요하지 않은 파일 해시값 계산 함수를 삭제할 수 있습니다.
