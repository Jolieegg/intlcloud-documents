## 소개

파일 이름 포맷은 Tencent Cloud COS(Cloud Object Storage)가 [Serverless Cloud Function(SCF)](https://www.tencentcloud.com/document/product/583)을 기반으로 사용자에게 제공하는 파일 이름 변경 솔루션입니다. 파일이 COS에 업로드되면 파일 이름은 이름 생성 규칙에 따라 자동으로 변경되며, 변수 플레이스 홀더를 사용하여 기존 파일 이름을 바꿀 수 있습니다.

## 주의 사항

- COS 콘솔에서 버킷에 파일 이름 포맷 규칙을 추가한 적이 있는 경우, [SCF 콘솔](https://console.cloud.tencent.com/scf/list?rid=1&ns=default)에서 기존에 생성한 파일 이름 포맷 규칙 함수를 볼 수 있습니다. 이 함수를 삭제하지 **마십시오.** 삭제할 경우 규칙이 적용되지 않을 수 있습니다.
- 광저우, 상하이, 베이징, 청두, 중국홍콩, 싱가포르, 뭄바이, 토론토, 서울, 실리콘밸리 등 SCF가 런칭된 리전은 파일 이름 포맷을 지원합니다. 지원되는 리전 관련 내용은 [SCF 제품 문서](https://www.tencentcloud.com/document/product/583)를 참고하십시오.
- 이름 변경 과정 중 오류가 발생한 경우, 생성한 함수 오른쪽에 있는 **로그 조회**를 클릭하여 SCF 콘솔로 이동해 로그 오류 상세 정보를 확인할 수 있습니다.
- ARCHIVE 및 DEEP ARCHIVE 유형의 파일은 파일 이름 포맷이 지원되지 않습니다. 이 유형의 파일 이름을 포맷하려면 복구가 선행되어야 합니다. 복구 방법은 [아카이브된 객체 복구](https://intl.cloud.tencent.com/document/product/436/30961)를 참고하십시오.
- 파일 이름 포맷 기능은 SCF 서비스에 종속됩니다. SCF 서비스는 사용자에게 [Free Tier](https://intl.cloud.tencent.com/document/product/583/12282)를 제공하며 무료 한도를 초과분에 대해서는 [SCF Pricing](https://intl.cloud.tencent.com/document/product/583/12281)에 따라 청구됩니다.

## 작업 단계

1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인합니다.
2. 왼쪽 사이드바에서 **애플리케이션 통합 > 확장 기능**을 클릭하고 **파일 이름 포맷**을 찾습니다.
3. **포맷 규칙 설정**을 클릭하여 규칙 설정 페이지로 이동합니다.
>! SCF 서비스가 활성화되지 않은 경우 [SCF 콘솔](https://console.cloud.tencent.com/scf)에서 SCF 서비스를 활성화하고 안내에 따라 서비스 권한 부여를 완료하십시오.
>
4. **함수 추가**를 클릭한 후, 팝업창에서 다음 정보를 설정합니다.

 - **함수 이름**: 함수의 고유 식별자로, 생성 후에는 수정할 수 없습니다. [SCF 콘솔](https://console.cloud.tencent.com/scf/list?rid=1&ns=default)에서 해당 함수를 조회할 수 있습니다.
 - **버킷 연결**: 이름을 포맷할 파일이 있는 COS 버킷입니다.
 - **이벤트 유형**: 이벤트란 SCF를 트리거하는 작업입니다. 업로드 작업을 예로 들면, 업로드 방식은 `PUT Object` 인터페이스 호출 또는 `POST Object` 인터페이스 호출일 수 있습니다. 이벤트를 **Put 메소드 생성**으로 선택하면 `PUT Object` 인터페이스를 통해 업로드하는 파일만 파일 이름 포맷이 트리거됩니다.
 - **트리거 조건**: 파일을 어떤 경로에 업로드해야 SCF가 트리거되는지의 조건을 의미합니다. 특정 범위를 선택하는 경우, 파일을 특정 접두사 혹은 확장자에 업로드할 때 SCF가 트리거되며, 모든 버킷을 선택하는 경우 파일을 버킷 어떤 위치에 업로드해도 항상 트리거됩니다.
 - **SCF 권한 부여**: 파일 이름을 포맷하려면 SCF가 버킷에서 객체를 읽고 기존 파일 이름을 변경할 수 있도록 이 옵션을 선택해야 합니다.
5. 설정이 완료되면 **다음 단계**를 클릭하여 포맷 규칙 설정을 입력합니다.

 - **타깃 이름 템플릿**: 포맷하려는 이름의 템플릿입니다. 템플릿 매개변수로 기본 변수 사용을 지원합니다. 기본 얼굴 변경 포맷은 '${변수 이름}'입니다. 현재 지원하는 기본 변수는 다음과 같습니다.
<table>
	<tr><th>변수 이름</th><th>의미</th></tr>
	<tr><td>Bucket</td><td>사전 설정된 연결된 버킷 이름</td></tr>
	<tr><td>Region</td><td>연결된 버킷이 속한 리전</td></tr>
	<tr><td>Key</td><td>COS에 있는 원본 파일의 Key 값, 예: abc/test.jpg</td></tr>
	<tr><td>InputName</td><td>원본 파일의 파일 이름(접미사 제외), 예: test</td></tr>
	<tr><td>InputNameAndExt</td><td>원본 파일의 파일 이름(접미사 포함), 예: test.jpg</td></tr>
	<tr><td>InputPath</td><td>원본 파일이 있는 디렉터리, 예: test/</td></tr>
	<tr><td>Ext</td><td>원본 파일의 접미사, 예: .jpg</br>참고: 이 변수는 기본적으로 이미 `.`를 가지고 있습니다. 이 변수를 파일 이름 접미사로 사용할 때, `.`를 추가할 필요가 없습니다.</td></tr>
	<tr><td>Year</td><td>선택한 시간대에 따라 해당 시간대의 현재 연도를 나타냅니다.</td></tr>
	<tr><td>Month</td><td>선택한 시간대에 따라 해당 시간대의 현재 월을 나타냅니다.</td></tr>
	<tr><td>Day</td><td>선택한 시간대에 따라 해당 시간대의 현재 날짜를 나타냅니다.</td></tr>
	<tr><td>Hour</td><td>선택한 시간대에 따라 해당 시간대의 현재 시간을 나타냅니다.</td></tr>
	<tr><td>Minute</td><td>선택한 시간대에 따라 해당 시간대의 현재 분을 나타냅니다.</td></tr>
	<tr><td>Second</td><td>선택한 시간대에 따라 해당 시간대의 현재 초를 나타냅니다.</td></tr>
	<tr><td>CRC64</td><td>파일의 CRC64 값</td></tr>
	<tr><td>MD5</td><td>파일의 MD5 값</td></tr>
	<tr><td>SHA1</td><td>파일의 SHA1 값</td></tr>
	<tr><td>SHA256</td><td>파일의 SHA256 값</td></tr>
</table>
 - **원본 파일 삭제 여부**: 원본 파일 이름을 포맷한 후 삭제할지 여부를 선택할 수 있으며, 기본 값은 ‘아니오’입니다. 이름을 포맷하면 새 파일로 저장되어 버킷에 저장됩니다.
 - **기본 시간대**: 현재 위치한 시간대를 선택하십시오. 이름 템플릿의 기본 시간 변수는 선택한 시간대에 따라 표시됩니다. 예를 들어 UTC+08:00을 선택하면, 기본 시간은 UTC+08:00 시간대의 현재 월, 일, 연도, 시, 분, 초가 됩니다.
 - **콜백 주소**: 콜백 주소를 추가할 수 있으며, 각 파일 이름의 포맷 작업이 완료되면 시스템에서 이 주소(예: https://www.callback.com)로 콜백 알림을 보냅니다.
6. 설정 추가하고 **확인** 클릭 후, 일정 시간이 지나면 함수가 추가된 것을 확인할 수 있습니다.

새로 생성한 함수에 다음과 같은 작업을 진행할 수 있습니다.
 - **로그**를 클릭하면 SCF 콘솔로 빠르게 이동하여 로그 오류 세부 정보를 볼 수 있습니다.
 - **세부 사항**을 클릭하면 설정한 이름 포맷 함수 규칙의 세부 정보를 볼 수 있습니다.
 - **더 보기 > 편집**을 클릭하면 파일 이름 포맷 규칙을 수정할 수 있습니다.
 - **더 보기 > 삭제**를 클릭하면 더 이상 필요하지 않은 파일 포맷 함수를 삭제할 수 있습니다.
