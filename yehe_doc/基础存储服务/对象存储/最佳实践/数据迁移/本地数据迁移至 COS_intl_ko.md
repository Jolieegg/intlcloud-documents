## 실행 시나리오

로컬 IDC를 보유하고 있는 사용자에 대해 COS는 각 마이그레이션 유형별로 다음과 같은 마이그레이션 방법을 지원합니다. 사용자는 로컬 IDC에 있는 대량의 데이터를 빠르게 COS로 마이그레이션할 수 있습니다.

<table>
   <tr>
      <th>마이그레이션 방법</th>
      <th>설명</th>
   </tr>
   <tr>
	 <td nowrap="nowrap"><a href="#cos">COS Migration</a>(온라인 마이그레이션)</td>
      <td>COS Migration은 COS 데이터 마이그레이션 기능이 결합된 통합형 툴입니다. 사용자는 간단한 설정 작업을 통해 데이터를 COS에 신속하게 마이그레이션할 수 있습니다.</td>
   </tr>
   <tr>
      <td nowrap="nowrap"><a href="#cdm">Cloud Data Migration(CDM)</a>(오프라인 마이그레이션)</td>
      <td>CDM은 Tencent Cloud에서 제공하는 오프라인 마이그레이션 전용 디바이스를 이용하여 사용자가 로컬 데이터를 클라우드에 마이그레이션할 수 있는 방법입니다. 로컬 데이터센터에서 네트워크를 통해 클라우드로 마이그레이션할 때의 긴 시간, 높은 비용, 보안성 문제를 해결할 수 있습니다.</td>
   </tr>
</table>

사용자는 데이터 마이그레이션 용량, IDC 게이트 대역폭, IDC 유휴 서버 리소스, 수용 가능한 마이그레이션 완료 시간 등의 요소를 고려하여 마이그레이션 방법을 선택할 수 있습니다. 아래 이미지는 온라인 마이그레이션 이용 시 소요되는 예상 시간으로, 마이그레이션 주기가 10일 이상이거나 마이그레이션 데이터 용량이 50TB가 넘는 경우 [CDM](#cdm)을 이용한 오프라인 마이그레이션을 권장합니다. 이외에는 온라인 마이그레이션을 선택하시기 바랍니다.
![](https://main.qcloudimg.com/raw/68430597098c909ae1fabbb5edcced35.jpg)

>1MB 이하의 저용량 파일의 수량이 비교적 많고, 디스크 IO 성능이 부족한 등의 경우에도 데이터 마이그레이션 진도에 영향을 미칠 수 있습니다.



## 마이그레이션 실행

<span id=cos>

### COS Migration 


마이그레이션 작업 순서는 다음과 같습니다.

1. Java 환경을 설치합니다.
2. COS Migration 툴을 설치합니다.
3. 구성 파일을 수정합니다.
4. 툴을 실행합니다.

자세한 방법은 [COS Migration 툴](https://intl.cloud.tencent.com/document/product/436/15392) 문서를 참조하십시오.

#### 작업 팁

COS Migration을 설정하여 마이그레이션 속도를 최대로 향상시키는 방법을 소개합니다.

1. 자체 네트워크 환경에 따라 파일 크기를 구분하는 임계값과 마이그레이션 동시 접속 수를 조정하여 대용량 파일은 멀티파트 방식으로 전송하고 저용량 파일은 동시 접속 방식으로 전송하는 최적의 마이그레이션 방식을 실현합니다. 툴의 실행 시간을 조정하고 대역폭 제한을 설정해 비즈니스 운영에 데이터 마이그레이션의 대역폭 점유로 인한 영향이 미치지 않도록 합니다. 해당 사항은 구성 파일 config.ini의 `[common]`에서 조정할 수 있으며, 다음 매개변수를 수정해 조정합니다.
<table>
   <tr>
      <th>매개변수 이름</td>
      <th>매개변수 설명</td>
   </tr>
   <tr>
      <td>smallFileThreshold</td>
      <td>저용량 파일의 임계값 매개변수입니다. 임계값 이상인 경우 멀티파트 업로드를 실행하며, 기본값은 5MB입니다.</td>
   </tr>
   <tr>
      <td>bigFileExecutorNum</td>
      <td>대용량 파일의 동시 접속 수이며, 기본값은 8입니다.<br>외부 네트워크를 통해 COS에 접속하고 대역폭이 비교적 작은 경우 해당 동시 접속 수를 작게 설정하십시오.</td>
   </tr>
   <tr>
      <td>smallFileExecutorNum</td>
      <td>저용량 파일의 동시 접속 수이며, 기본값은 64입니다. <br>외부 네트워크를 통해 COS에 접속하고 대역폭이 비교적 작은 경우 해당 동시 접속 수를 작게 설정하십시오.</td>
   </tr>
   <tr>
      <td>executeTimeWindow</td>
      <td>해당 매개변수로 마이그레이션 툴이 매일 실행되는 시간대를 정의합니다. 다른 시간에는 휴면 상태가 되며, 휴면 상태에서는 마이그레이션을 일시 중지하고 다음 번 시간 창이 자동으로 이어서 실행할 때까지 마이그레이션 진도를 유지합니다.</td>
   </tr>
</table>
2. 분산형 병렬 전송 방식을 사용해 마이그레이션 속도를 더욱 향상시킬 수 있습니다. 여러 서버에 COS Migration을 설치하고 각 서버별로 서로 다른 원본 데이터를 마이그레이션하는 방법을 고려할 수 있습니다.


<span id=cdm>

### CDM


마이그레이션 작업 순서는 다음과 같습니다.

1. CDM 콘솔에서 신청을 제출합니다.
2. 신청 심사가 완료되면 디바이스 발송을 기다립니다.
3. 디바이스 수취 후, 마이그레이션 디바이스 설명서에 따라 데이터를 디바이스로 복사합니다.
4. 데이터 복사 완료 후, 콘솔에서 반환 신청을 제출해 Tencent Cloud가 데이터를 COS로 마이그레이션을 완료할 때까지 기다립니다.

자세한 정보는 [CDM](https://intl.cloud.tencent.com/document/product/623) 제품 문서를 참조하십시오.

#### 작업 팁

오프라인 마이그레이션을 통해 데이터를 효율적이고 안전하게 Tencent Cloud COS에 마이그레이션하는 방법을 소개합니다.

1. IDC에서 10Gbps의 네트워크 환경을 설정한 경우 로컬 데이터 환경에서 전송 병목 현상이 발생하는 것을 방지하기 위해 고성능 마운트 포인트 기기를 사용해 최대 속도로 복사할 수 있습니다.
2. CDM을 통한 데이터 전송 중 가장 빠른 방법은 병렬 전송 방식입니다. 사용자는 디바이스의 CPU와 메모리 사용률을 모니터링하여 현제 마이그레이션 속도가 예상보다 느린 경우 다음과 같이 병렬 전송 방식을 선택할 수 있습니다.
	- 여러 디바이스에서 서로 다른 네트워크 인터페이스를 사용하여 동일한 CDM 디바이스로 연결
	- 여러 디바이스에서 서로 다른 네트워크 인터페이스를 사용하여 여러 CDM 디바이스로 연결

