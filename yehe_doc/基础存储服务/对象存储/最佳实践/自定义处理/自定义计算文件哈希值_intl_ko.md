## 개요

클라이언트와 서버 간에 데이터 전송 시 오류가 발생할 수 있습니다. Cloud Object Storage(COS)는 Serverless Cloud Function(SCF)와 결합하여 MD5 코드 확인 등의 데이터 검증을 통해 업로드된 데이터의 무결성을 보장할 수 있습니다. 사용자가 COS에서 파일을 업로드할 때 SCF는 업로드된 데이터의 무결성과 정확성을 보장하기 위해 사용자가 업로드한 객체 확인을 지원합니다.

## 실행 배경

업계의 기존 퍼블릭 클라우드 COS는 MD5 코드가 없으며, 사용자가 파일을 업로드한 후 다음과 같은 상황이 발생할 수 있습니다.

- 파일 중복, 비용 상승
- 파일 오류, 업무 효율성 저하
- 파일 누락.


## 솔루션 장점

- 그래픽 인터페이스: 원클릭 구성, 단순화된 개발 프로세스로 코딩 작업이 필요하지 않으며, 연구 개발 효율성을 대폭 향상시킵니다.
- 다양한 옵션: 다양한 시나리오에서 사용자 요구를 충족시키기 위해 MD5, SHA1, SHA256, CRC64를 지원합니다.
- 자동 실행: 파일이 COS에 업로드된 후 워크플로를 트리거하여 인증 코드 계산을 시작할 수 있습니다.


## 작업 순서


1. [COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인하여 워크플로를 생성하고, 형식 필터링 규칙을 사용자 정의하고, 사용자 정의 함수 노드를 생성합니다.

2. 함수 노드 팝업 창에서 [함수 생성]을 클릭합니다.
     
3. SCF 생성 페이지에서 [COS 객체의 해시 값 계산] 템플릿을 선택합니다.

4. 사용자 파일 크기에 따라 기본 설정 항목에서 실행 타임아웃 시간을 설정하고, 고급 설정 항목에서 충분한 메모리를 설정합니다.
5. 함수 코드를 구성합니다. 함수 템플릿은 다음 두 가지 환경 변수를 지원합니다.
  - hashTypeList는 계산할 알고리즘을 지정합니다. 이 항목은 선택 사항입니다. 기본값은 ["crc64", "md5", "sha1", "sha256"]입니다.
  - caseType은 해시 값의 대소문자를 지정합니다. 이 항목은 선택 사항입니다. 기본값은 lowercase이며 uppercase를 전달할 수 있습니다.
6. 권한 설정을 활성화하고 현재 버킷의 읽기 및 쓰기 권한이 포함된 역할을 바인딩합니다. 실행 역할 생성은 [역할 및 정책](https://intl.cloud.tencent.com/document/product/583/38176)을 참고하십시오.
7. [완료]를 클릭합니다.
8. 이전 워크플로 페이지로 돌아가서 방금 생성한 사용자 지정 트랜스 코딩 함수를 선택하고 워크플로를 저장합니다.

9. 파일을 업로드합니다. 워크플로가 성공적으로 처리된 후, 업로드된 파일에 여러 해시 헤더가 성공적으로 추가되었음을 확인할 수 있습니다.




