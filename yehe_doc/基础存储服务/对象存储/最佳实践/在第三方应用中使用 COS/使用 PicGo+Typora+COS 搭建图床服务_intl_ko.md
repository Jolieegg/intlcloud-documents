## 소개

이미지 호스팅 서비스는 이미지 저장, 처리, 배포 등 다양한 기능을 제공하여 전 세계의 수많은 블로그 사이트와 커뮤니티 포럼에 백엔드 이미지 서비스를 제공합니다. 개발자들은 **Cloud Object Storage(COS)**를 사용하여 이미지 호스팅 서비스를 설정할 수 있습니다. COS는 Tencent Cloud가 출시한 분산 스토리지 서비스로 대용량 파일을 저장하고 더 높은 성능과 안정성을 보장합니다.

이미지 호스팅 시나리오에서 COS의 장점은 다음과 같습니다.

- **저렴한 비용:** 스토리지의 단가가 저렴하고 사용한 만큼만 비용을 지불하면 됩니다.
- **무제한 속도:** 업로드 및 다운로드 속도가 제한되지 않으므로 사용자는 더 이상 느린 loading을 기다릴 필요가 없이 더 나은 액세스 경험을 즐길 수 있습니다.
- **고가용성:** COS는 저장된 데이터가 최대 99.9999999999%의 내구성을 보장하는 고가용성을 위한 SLA를 제공합니다.
- **무제한 용량:** COS는 주문형 용량 사용을 위해 많은 수의 파일을 분산 방식으로 저장합니다.


## 실행 시나리오

### 시나리오1: COS로 이미지 호스팅 서비스를 설정하기 위해 이미지 추가

이 시나리오에서는 다음 도구가 사용됩니다.
- PicGo: 여러 클라우드 스토리지 구성을 지원하고 이미지 URL을 빠르게 생성하는 도구입니다.
- Typora: 여러 출력 형식을 지원하고 로컬 이미지를 이미지 호스팅 서비스에 빠르게 업로드할 수 있는 경량 Markdown 파일 편집기입니다.

### 작업 단계

1. PicGo를 설치하고 관련 COS 매개변수를 설정합니다.
>?이 시나리오에서는 PicGo 2.3.1이 사용됩니다. 구성 프로세스는 버전에 따라 다를 수 있습니다.
>
[PicGo 웹사이트](https://molunerfinn.com/PicGo/)에서 PicGo를 다운로드하여 설치한 후 이미지 호스팅 서비스 설정에서 **Tencent Cloud COS**를 찾아 다음 매개변수를 구성합니다.

  - COS 버전: COS v5를 선택합니다.
  - SecretId 설정: 프로젝트에 사용되는 개발자 소유의 비밀 ID로, [API 키 관리](https://console.cloud.tencent.com/capi) 페이지에서 생성 및 획득할 수 있습니다.
  - SecretKey 설정: 프로젝트에 사용되는 개발자 소유의 비밀 키이며 [API 키 관리](https://console.cloud.tencent.com/capi) 페이지에서 얻을 수 있습니다.  
  - Bucket 설정: 버킷. COS에서 데이터 저장에 사용되는 컨테이너이며, 버킷과 관련된 자세한 내용은 [버킷 개요](https://intl.cloud.tencent.com/document/product/436/13312) 문서를 참고하십시오.
  - AppId 설정: COS 액세스에 대한 고유한 사용자 레벨 리소스 식별자이며, [API 키 관리](https://console.cloud.tencent.com/capi) 페이지에서 얻을 수 있습니다.
  - 스토리지 리전 설정: 버킷 소속 리전 정보, ap-beijing, ap-hongkong 및 eu-frankfurt와 같은 열거 값은 [리전 및 액세스 도메인](https://intl.cloud.tencent.com/document/product/436/6224)을 참고하십시오.
  - 스토리지 경로 설정: COS 버킷에서 이미지가 저장되는 경로입니다.
  - 사용자 정의 도메인 이름 설정: 이 매개변수는 선택사항입니다. 위에서 지정한 스토리지 공간에 대해 사용자 지정 원본 도메인 이름을 구성한 경우 여기에 입력할 수 있습니다. 자세한 내용은 [사용자 정의 원본 서버 도메인 활성화하기](https://intl.cloud.tencent.com/document/product/436/31507)를 참고하십시오.
  - URL 접미사 설정: URL 접미사에 COS 데이터 처리 매개변수를 추가하여 이미지 압축, 크롭핑, 형식 변환 및 기타 작업을 구현합니다. 자세한 내용은 [Image Processing](https://www.tencentcloud.com/document/product/436/40118)을 참고하십시오.
2. typora를 구성합니다(선택 사항).
>?편집 요구 사항에 Markdown이 포함되지 않은 경우 이 단계를 건너뛰고 이전 단계에서 설치된 PicGo 도구를 이미지 호스팅 도구로 사용할 수 있습니다.
>
다음과 같이 구성합니다.
 1. typora의 기본 설정 **이미지**에서 다음을 구성합니다.

    - **이미지 삽입 시** **이미지 업로드**를 선택합니다
    - **이미지 업로드 설정**에서 **PicGo(app)**를 선택하고 방금 설치한 PicGo.exe의 위치를 설정합니다.
 2. 설정을 적용하려면 typora를 다시 시작하십시오.
 3. typora 편집기 영역에 들어가 이미지를 직접 드래그 앤 드롭하거나 붙여넣어 업로드하면 자동으로 COS 파일 URL로 대체됩니다(붙여넣기 후 COS URL로 자동 교체되지 않는다면 PicGo에서 server가 활성화되어 있는지 확인하십시오).



### 시나리오2: 이미지 호스팅 리포지토리의 이미지를 COS로 빠르게 마이그레이션

이미지 호스팅 서비스를 예로 들면, 로컬 이미지 호스팅 폴더를 찾거나 인터넷에서 전체 폴더를 다운로드한 후 폴더의 모든 이미지를 COS 버킷으로 전송할 수 있습니다. 그런 다음 URL 도메인 이름을 균일하게 교체하여 웹 사이트를 복원합니다.

### 작업 단계

#### 1단계: 원본 이미지 호스팅 서비스에서 이미지 다운로드

원본 이미지 호스팅 사이트에 로그인하여 이전에 업로드한 이미지 폴더를 다운로드합니다.

#### 2단계: COS 버킷 생성 및 링크 도용 방지 설정

1. Tencent Cloud 계정에 가입하고 버킷 생성의 지침에 따라 **공개 읽기/비공개 쓰기** 액세스 권한이 있는 버킷을 생성합니다. [버킷 생성](https://intl.cloud.tencent.com/document/product/436/13309)을 참고하십시오.
2. 버킷이 생성된 후 이미지가 핫링크되지 않도록 [링크 도용 방지 설정](https://intl.cloud.tencent.com/document/product/436/13319)의 지침에 따라 버킷에서 링크 도용 방지를 활성화합니다.

#### 3단계: 버킷에 폴더 업로드

방금 생성한 COS 버킷에서 폴더 업로드를 클릭하여 준비된 이미지 폴더를 버킷에 업로드합니다.
>?이미지 수가 많으면 [COSBrowser](https://intl.cloud.tencent.com/document/product/436/11366)를 사용하여 이미지를 빠르게 업로드할 수도 있습니다.
>



#### 4단계: 도메인 이름을 전역적으로 교체

COS 콘솔의 버킷 개요 페이지에서 버킷의 기본 도메인 이름을 복사합니다(사용자 지정 CDN 가속 도메인 이름을 연결할 수도 있음). 그런 다음 공통 코드 편집기를 사용하여 유효하지 않은 URL 접두사를 검색하고 COS 버킷의 기본 도메인 이름으로 전역적으로 바꿉니다.
>?기본 도메인 이름에 대한 자세한 내용은 [리전 및 액세스 도메인](https://intl.cloud.tencent.com/document/product/436/6224)을 참고하십시오.

- vscode를 사용한 검색 및 교체 예시:
![](https://qcloudimg.tencent-cloud.cn/raw/6d0707a821a6c7f0a978f113afdf05b9.png)

- sublime text를 사용한 검색 및 교체 예시:
![](https://qcloudimg.tencent-cloud.cn/raw/97855e83ce68cd23254c98f4849e2d41.png)






