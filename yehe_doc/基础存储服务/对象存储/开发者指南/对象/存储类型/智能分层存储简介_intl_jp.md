## 概要

INTELLIGENT_TIERINGストレージタイプはコールドデータとホットデータの階層分離メカニズムをご提供します。ユーザーデータへのアクセスパターンに応じて、データのホット階層とコールド階層を自動的に切り替えることで、ユーザーデータのストレージコストを削減することができます。

INTELLIGENT_TIERINGストレージは、アクセスパターンが固定されていないデータや予測不可能なアクセスパターンのデータに適しています。標準ストレージと同等の低レイテンシー、高スループットの製品体験を、標準ストレージよりも低いコストでユーザーにご提供します。ユーザーはビジネスニーズに応じて、アクセスパターンが固定されていないデータを標準ストレージタイプからINTELLIGENT_TIERINGストレージタイプに変換し、クラウドのストレージコストを削減することができます。

>!
> - INTELLIGENT_TIERINGストレージタイプは現在、北京、南京、上海、広州、成都、重慶、東京、シンガポールリージョンでのみサポートしています。INTELLIGENT_TIERINGストレージ（マルチAZ）タイプは北京、上海、広州、シンガポールリージョンでのみサポートしています。
> - INTELLIGENT_TIERINGストレージタイプは独立したストレージタイプであり、ご利用の際はINTELLIGENT_TIERINGストレージ容量料金およびINTELLIGENT_TIERINGオブジェクト監視料金が発生します。このうちINTELLIGENT_TIERINGストレージ容量料金については、INTELLIGENT_TIERINGストレージ容量パッケージから差し引くことができます。課金に関するより詳しい情報については、[製品価格](https://buy.intl.cloud.tencent.com/price/cos?lang=en&pg=)をご参照ください。
> 

## メリット

ユーザーがデータをアップロードする際に、INTELLIGENT_TIERINGストレージタイプを選択してCOSに保存すると、COSはデータへのアクセス回数を定期的にモニタリングし、一定期間データへのアクセスがない場合、データをよりストレージコストの低いアクセス層に 移動させます。データが再びアクセスされた場合は、再び高頻度アクセス層に移動させることで、データの読み取りパフォーマンスを保障します。INTELLIGENT_TIERINGはコールドデータとホットデータの階層分離ストレージにより、ユーザーがストレージコストと読み取り/書き込みパフォーマンスの最適なバランスをとることができるよう支援します。INTELLIGENT_TIERINGストレージの利用には次のようなメリットがあります。

- **コストの集約**：データを永続ストレージとしてINTELLIGENT_TIERINGストレージタイプで保存する場合、保存期間が長くなるほど、標準ストレージに保存した場合に比べてコストが低下し、最大で約20%のストレージコストを削減することができます。INTELLIGENT_TIERINGストレージタイプはCOSライフサイクルのフローにも関与します。ユーザーは必要に応じてINTELLIGENT_TIERINGストレージをアーカイブストレージに移行させることで、データストレージコストをさらに低下させることができます。
- **安定性と耐久性**：INTELLIGENT_TIERINGストレージでは、標準ストレージと同等の低レイテンシー、高スループットを体感していただくことができます。また、INTELLIGENT_TIERINGストレージはイレイジャーコーディングによる冗長ストレージ方式を採用し、99.999999999%（イレブンナイン）のデータ信頼性を実現しています。また、データの分割ストレージ、読み取り/書き込み同時実行により、業務可用性は99.95%に達しています。マルチAZアーキテクチャにはINTELLIGENT_TIERINGの特性が同期されているため、設計上のデータ信頼性は99.9999999999%（トゥエルブナイン）に、設計上の業務可用性は99.995%に達します。
- **利便性・使いやすさ**：データのオブジェクトストレージタイプを指定するだけで、INTELLIGENT_TIERINGの特性を適用できます。INTELLIGENT_TIERINGストレージはストレージタイプの一種のため、COSのAPI、SDK、ツール、エコシステムアプリケーションと合わせて用いることが可能です。ユーザーは必要に応じてこれらを使用し、クラウド上に保存したデータの管理に役立てることができます。

## 利用方法

データをINTELLIGENT_TIERINGストレージタイプとしてCOSに保存するには、まず初めにバケットでINTELLIGENT_TIERING設定を有効にする必要があります。有効にした後、オブジェクトをアップロードする際に**ストレージタイプ**をINTELLIGENT_TIERINGストレージタイプに指定すれば利用できます。

### COSコンソールの使用

#### オブジェクトをアップロードする際にINTELLIGENT_TIERINGストレージとして設定する

ユーザーは次の手順を参照し、オブジェクトをINTELLIGENT_TIERINGストレージタイプとして保存することができます。

1. バケット設定ページでINTELLIGENT_TIERINGストレージ設定を有効にします。詳細なフローについては、[INTELLIGENT_TIERINGストレージの設定](https://intl.cloud.tencent.com/document/product/436/38306)のドキュメントをご参照ください。
2. ファイルをアップロードし、その際にファイルのストレージタイプを指定します。ファイルのアップロードガイドについては、[オブジェクトのアップロード](https://intl.cloud.tencent.com/document/product/436/13321)のドキュメントをご参照ください。

>! バケットのINTELLIGENT_TIERINGストレージ設定は有効にすると無効化できませんので、慎重に設定してください。
>

#### クラウド上のデータをINTELLIGENT_TIERINGストレージに切り替える

ユーザーは次の手順を参照し、アップロード済みの既存データをINTELLIGENT_TIERINGストレージタイプに切り替えることができます。

1. バケット設定ページでライフサイクルルールを作成します。詳細なフローについては、[ライフサイクルの設定](https://intl.cloud.tencent.com/document/product/436/14605)のドキュメントをご参照ください。
2. 指定するルールの適用範囲を設定し、データをINTELLIGENT_TIERINGストレージに移行します。



### REST APIの使用

次のAPIによってINTELLIGENT_TIERINGストレージを直接設定できます。

1. まず初めに、REST APIを使用してバケットのINTELLIGENT_TIERINGストレージを有効にします。次のAPIドキュメントをご参照ください。
	- [PUT Bucket IntelligentTiering](https://intl.cloud.tencent.com/document/product/436/38314)
	- [GET Bucket IntelligentTiering](https://intl.cloud.tencent.com/document/product/436/38315)
2. バケットのINTELLIGENT_TIERINGストレージを有効にした後、次のAPIドキュメントを参照し、オブジェクトをINTELLIGENT_TIERINGストレージタイプとしてアップロードすることができます。
	- [PUT Object](https://intl.cloud.tencent.com/document/product/436/7749)
	- [PUT Object - Copy](https://intl.cloud.tencent.com/document/product/436/10881)
	- [POST Object](https://intl.cloud.tencent.com/document/product/436/14690)
	- [Initiate Multipart Upload](https://intl.cloud.tencent.com/document/product/436/7746)
3. オブジェクトのストレージタイプおよび保存されているストレージ層を照会したい場合は、次のAPIドキュメントをご参照ください。
	- [GET Object](https://intl.cloud.tencent.com/document/product/436/7753)
	- [HEAD Object](https://intl.cloud.tencent.com/document/product/436/7745)
4. REST APIを直接使用してINTELLIGENT_TIERINGストレージタイプのオブジェクトを削除できます。次のAPIドキュメントのパートをご参照ください。
	- [DELETE Object](https://intl.cloud.tencent.com/document/product/436/7743)
	- [DELETE Multiple Objects](https://intl.cloud.tencent.com/document/product/436/8289)

### SDKの使用

現在COSが公開しているSDKは、すべてINTELLIGENT_TIERINGストレージタイプの使用をサポートしています。具体的な方法は、ファイルをアップロードする際にStorageClassパラメータをINTELLIGENT_TIERINGおよびMAZ_INTELLIGENT_TIERINGに設定し、INTELLIGENT_TIERINGストレージおよびINTELLIGENT_TIERINGストレージ（マルチAZ）への直接転送を実現するものです。オブジェクトのアップロードのSDKドキュメントについては、[SDKの概要](https://www.tencentcloud.com/document/product/436/14107)をご参照ください。

## 使用制限

INTELLIGENT_TIERINGストレージの利用には次のような制限があります。

- **設定の制限**：最初に設定した後は変更できません。変更が必要な場合は、[お問い合わせ](https://intl.cloud.tencent.com/contact-sales)ください。低頻度アクセス層に切り替える日数の選択可能な値は30、60、90です。
- **初期ストレージ層の制限**：INTELLIGENT_TIERINGストレージタイプの新規オブジェクトは、デフォルトでは高頻度アクセス層に保存され、一定期間継続してアクセスがない場合のみ、低頻度アクセス層に切り替わります。
- **最小ストレージユニットの制限**：64KB未満のオブジェクトは永続的に高頻度アクセス層に保存され、高頻度アクセス層と低頻度アクセス層との間での切り替えは行われません。単一のストレージファイルはどのようなサイズであっても、実際のサイズに従って課金されます。
- **操作の制限**：アップロードインターフェースを追加して、オブジェクトをINTELLIGENT_TIERINGストレージタイプとしてアップロードすることはサポートされていません。
- **ライフサイクルの制限**：INTELLIGENT_TIERINGストレージタイプはアーカイブストレージまたはディープアーカイブストレージタイプにのみ切り替えることができます。標準ストレージタイプをINTELLIGENT_TIERINGストレージタイプに移行した場合は、高頻度アクセス層に保存されます。低頻度ストレージタイプをINTELLIGENT_TIERINGストレージタイプに移行した場合は、低頻度アクセス層に保存されます。
- **バケットコピーの制限**：バケットをコピーする際、ターゲットバケットでINTELLIGENT_TIERINGストレージ設定を有効にしていなければ、オブジェクトをINTELLIGENT_TIERINGストレージタイプとしてコピーすることはできません。

## よくあるご質問
### INTELLIGENT_TIERINGストレージはどのように課金されますか。

INTELLIGENT_TIERINGストレージには**INTELLIGENT_TIERINGストレージ容量料金**と**INTELLIGENT_TIERINGオブジェクト監視料金**が含まれます。その内容は次のとおりです。
1. INTELLIGENT_TIERINGストレージ容量料金は、ファイルの存在するストレージ層によって金額が異なります。
 - ファイルが高頻度層にある場合は、標準ストレージ容量料金に従って課金されます。
 - ファイルが低頻度層にある場合は、低頻度ストレージ容量料金に従って課金されます。
>?
>- 標準ストレージ、低頻度ストレージ容量料金はパブリッククラウドリージョンごとに金額が異なります。具体的な価格については、[製品価格](https://buy.intl.cloud.tencent.com/price/cos?lang=en&pg=)をご参照ください。
>- ファイルのアップロードおよびダウンロードの過程ではさらにリクエスト料金とトラフィック料金が発生します。これらの料金計算の例については、[トラフィック料金の課金の例](https://intl.cloud.tencent.com/document/product/436/33776)および[リクエスト料金の課金の例](https://intl.cloud.tencent.com/document/product/436/40100)をご参照ください。
>
2. INTELLIGENT_TIERINGオブジェクト監視料金は保存したファイル数に応じて計算され、64KB未満のファイルでは料金は発生しません。具体的な価格については、[製品価格](https://buy.intl.cloud.tencent.com/price/cos?lang=en&pg=)をご参照ください。

**事例**

ある企業に1TBのファイルがあり、各ファイルはいずれも64KBより大きく、ファイル数は計10万ファイルで、データはINTELLIGENT_TIERINGストレージタイプとして北京リージョンに保存され、低頻度アクセス層への切り替え期間を30日に指定しているとします。30日ごとに20%のファイル（すなわち2万個のファイル）が低頻度層に移行すると仮定した場合、**30日あたり**のオブジェクト監視料金およびストレージ料金は下表のとおりとなります。

>?
>下の表内の北京リージョンのオブジェクト監視料金月単価は0.25米ドル/1万オブジェクトであり、「1日単価 = 月単価/30」の換算ロジックに基づき、1日の単価は0.00833333米ドル/1万オブジェクト/日となります。
|ストレージ日数|30日あたりのオブジェクト監視料金（米ドル）|30日あたりのINTELLIGENT_TIERINGストレージ料金（米ドル）|30日あたりの標準ストレージ料金（米ドル）|
|-----|----|----|----|
|30 x 1  | 0.25米ドル/1万オブジェクト x 10万   |  1024 x 0.024 / 30 x 30 = 24.58  | 1024 x 0.024 / 30 x 30 = 24.58  |
|30 x 2  | 0.25米ドル/1万オブジェクト x 10万   | 819.2 x 0.024 / 30 x 30 + 204.8 x 0.08 / 30 x 30 = 23.35 | 1024 x 0.024 / 30 x 30 = 24.58 |
|30 x 3  | 0.25米ドル/1万オブジェクト x 10万  | 655.36 x 0.024 / 30 x 30 + 368.64 x 0.08 / 30 x 30 = 22.36 | 1024 x 0.024 / 30 x 30 = 24.58  |
|30 x 4  | 0.25米ドル/1万オブジェクト x 10万 | 524.288 x 0.024 / 30 x 30 + 499.712 x 0.08 / 30 x 30 = 21.58 | 1024 x 0.024 / 30 x 30 = 24.58  |
|30 x 5  | 0.25米ドル/1万オブジェクト x 10万  |  419.4304 x 0.024 / 30 x 30 + 604.5696 x 0.08 / 30 x 30 = 20.95  |  1024 x 0.024 / 30 x 30 = 24.58  |
|30 x 6  | 0.25米ドル/1万オブジェクト x 10万   |  335.54432 x 0.024 / 30 x 30 + 688.45568 x 0.08 / 30 x 30 = 20.45  |  1024 x 0.024 / 30 x 30 = 24.58  |

このように、保存期間が長くなるにつれて、30日ごとに少額の監視料金を支払うだけで、それ以外のコストが明らかに低下することがわかります。

### INTELLIGENT_TIERINGストレージはどのような種類のファイルに適しますか。

INTELLIGENT_TIERINGストレージはオーディオビデオ、ログなどの、平均ファイルサイズが比較的大きく、かつアクセスパターンが固定されていないファイルに適しています。平均ファイル容量が大きくなると、ファイル1GBにつき支払う必要がある監視料金は安くなります。業務上、アクセスパターンが比較的固定されている場合は、ライフサイクル設定によって、低頻度ストレージに移行する時間を指定しておけばよく、INTELLIGENT_TIERINGストレージを使用する必要はありません。

### ファイルをINTELLIGENT_TIERINGストレージとして保存するにはどうすればよいですか。
次の2つの方法で、ファイルをINTELLIGENT_TIERINGストレージとして保存することができます。
- 増分ファイル：アップロードの際にストレージタイプをINTELLIGENT_TIERINGストレージに指定するだけで、ファイルをINTELLIGENT_TIERINGストレージとして保存することができます。
- 既存ファイル：インターフェースをCOPYすることで、ファイルのストレージタイプをINTELLIGENT_TIERINGストレージタイプに変更することができます。あるいはライフサイクル機能により、標準ストレージ、低頻度ストレージタイプをINTELLIGENT_TIERINGストレージタイプに移行することができます。

>! INTELLIGENT_TIERING系の64KB未満のファイルは、常に標準層に保存されます。そのため、コストダウンのために、必要に応じて、64KB未満のファイルを標準/低頻度/アーカイブ/ディープアーカイブなどのストレージタイプで直接アップロードすることをお勧めします。
>

### INTELLIGENT_TIERINGストレージ設定を無効化するにはどうすればよいですか。

INTELLIGENT_TIERINGストレージは有効にすると**無効化することはできません**。ファイルをINTELLIGENT_TIERINGストレージとして保存する必要がない場合は、ファイルのアップロード時に、ファイルストレージタイプを標準ストレージ、低頻度ストレージ、アーカイブストレージ、ディープアーカイブストレージなどの、INTELLIGENT_TIERINGではないストレージタイプを指定してください。
