

マルチAZ（Available Zone）とは[Tencent Cloud COS](https://www.tencentcloud.com/products/cos)がリリースしたマルチAZストレージアーキテクチャです。このストレージアーキテクチャによってユーザーデータにデータセンターレベルの障害復旧機能を提供することが可能です。

お客様のデータは都市の複数の異なるデータセンターに分散して保存されます。あるデータセンターに自然災害、停電などの極端な状況による全面的な障害が発生した場合でも、マルチAZストレージアーキテクチャによって安定した信頼性の高いストレージサービスを引き続き提供することができます。

マルチAZ特性により、設計上のデータ信頼性は99.9999999999%（トゥエルブナイン）に、設計上のサービス可用性は99.995%に達します。データをCOSにアップロードする際にオブジェクトのストレージタイプを指定するだけで、オブジェクトをマルチAZのリージョンに保存することができます。

> ?
> - COSのマルチAZ特性は現時点では北京、広州、上海リージョンでのみサポートしています。その他のパブリッククラウドリージョンでも順次サポート予定です。
> - COSのマルチAZ特性を使用する場合、ストレージ容量料金が相対的に高くなります。詳細については、[製品価格](https://buy.intl.cloud.tencent.com/price/cos?lang=en&pg=)をご参照ください。

## マルチAZのメリット

データをマルチAZリージョンに保存すると、データがいくつかのパートに分割され、同時にイレイジャーコーディングアルゴリズムに従って対応するチェックコードパートが算出されます。オリジナルのデータパートとチェックコードパートは分割されてそのリージョンの異なるデータセンターに均等に保存され、同一都市内障害復旧が可能になります。あるデータセンターが利用できなくなった場合も、別のデータセンターのデータは正常に読み取りと書き込みができるため、お客様のデータが消失することなく永続的に保存され、お客様の業務におけるデータ連続性と高可用性が維持できます。COSのマルチAZを使用すると次のようなメリットがあります。

- **同一都市内障害復旧**：異なるデータセンター間での障害復旧が可能です。マルチAZストレージアーキテクチャでは、オブジェクトデータは同一リージョンの異なるデータセンターの異なるデバイス内に保存されます。データセンターのうち1か所に障害が発生した際、冗長データセンターは引き続き利用できるため、ユーザーの業務は影響を受けず、データも消失しません。
- **安定性・永続性**：イレイジャーコーディングによる冗長ストレージ方式を採用し、99.9999999999%の設計上のデータ信頼性を実現しています。また、データの分割ストレージ、読み取り/書き込み同時実行により、設計上のサービス可用性は99.995%に達しています。
- **使いやすさ**：オブジェクトのストレージタイプによって、データをどのストレージアーキテクチャに保存するかを指定します。バケット内の任意のオブジェクトを指定してマルチAZアーキテクチャに保存することができ、より簡単に使用できます。

マルチAZストレージと非マルチAZストレージの仕様面での制限の比較は次のとおりです。

<table>
<thead>
<tr>
<th>比較項目</th>
<th>マルチAZストレージ</th>
<th>非マルチAZストレージ</th>
</tr>
</thead>
<tbody><tr>
<td nowrap="nowrap">設計上のデータ永続性</td>
<td nowrap="nowrap">99.9999999999%  （トゥエルブナイン）</td>
<td>99.999999999%（イレブンナイン）</td>
</tr>
<tr>
<td>設計上のサービス可用性</td>
<td>99.995%</td>
<td>99.99%</td>
</tr>
<tr>
<td>サポートするリージョン</td>
<td colspan=2> <a href="https://intl.cloud.tencent.com/document/product/436/30925">ストレージタイプの概要</a>のドキュメントをご参照ください</td>
</tr>
<tr>
<td nowrap="nowrap">サポートするストレージタイプ</td>
<td>標準ストレージ（マルチAZ）（MAZ_STANDARD）<br>低頻度ストレージ（マルチAZ）（MAZ_STANDARD_IA）<br>INTELLIGENT_TIERINGストレージ（マルチAZ）（MAZ_INTELLIGENT_TIERING）</td>
<td>標準ストレージ（STANDARD）<br>低頻度ストレージ（STANDARD_IA）<br>アーカイブストレージ（ARCHIVE）<br>ディープアーカイブストレージ（DEEP_ARCHIVE）<br>INTELLIGENT_TIERINGストレージ（INTELLIGENT_TIERING）</td>
</tr>
</tbody></table>


## 利用方法

ユーザーはバケットのマルチAZ設定を有効化することができます。マルチAZ設定を有効化したバケットにオブジェクトをアップロードすると、オブジェクトのストレージタイプをマルチAZに設定できます。ユーザーがオブジェクトをアップロードする際にオブジェクトのストレージタイプを指定すると、オブジェクトをマルチAZストレージアーキテクチャ内に保存することができます。
簡潔に言えば、次の2つの手順を実行するだけで、ファイルをマルチAZアーキテクチャ内に保存することができます。

1. バケットを作成し、**作成の際に**マルチAZ設定を有効化します。バケットの作成ガイドについては、[バケットの作成](https://intl.cloud.tencent.com/document/product/436/13309)のドキュメントをご参照ください。
2. ファイルをアップロードし、その際にファイルのストレージタイプを指定します。ファイルのアップロードガイドについては、[オブジェクトのアップロード](https://intl.cloud.tencent.com/document/product/436/13321)のドキュメントをご参照ください。

> ?
> - バケットのマルチAZ設定は有効化すると変更できませんので、慎重に設定してください。作成済みのバケットはデフォルトでマルチAZ設定が有効化されていません。有効化できるのは新しく作成したバケットのみとなります。
> - マルチAZ設定を有効化したバケットには、標準ストレージ（マルチAZ）、低頻度ストレージ（マルチAZ）、INTELLIGENT_TIERINGストレージ（マルチAZ）タイプをアップロードすることができます。このうち、INTELLIGENT_TIERINGストレージ（マルチAZ）タイプをアップロードする場合は、バケットで同時にマルチAZ設定およびINTELLIGENT_TIERING設定を有効化する必要があります。
> - 既存のデータをマルチAZバケットに保存したい場合は、マルチAZ設定を有効化したバケットを新規作成し、同時にCOS Batchの一括コピー機能を使用し、既存のバケット内のファイルを新規バケットに一括コピーすることができます。COS Batchの使用ガイドについては、[バッチ処理](https://intl.cloud.tencent.com/document/product/436/32956)の操作ドキュメントをご参照ください。

## 使用制限

現在COSは、標準ストレージ（マルチAZ）、低頻度ストレージ（マルチAZ）、INTELLIGENT_TIERINGストレージ（マルチAZ）タイプのアップロードをサポートしています。このため、ストレージタイプの変更を伴う関連の機能には同様に制限が存在します。関連機能の制限についての説明は次のとおりです。

- ストレージタイプの制限：現在は標準ストレージ（マルチAZ）、低頻度ストレージ（マルチAZ）、INTELLIGENT_TIERINGストレージ（マルチAZ）タイプのアップロードのみをサポートしています。このうち、INTELLIGENT_TIERINGストレージ（マルチAZ）タイプをアップロードする場合は、バケットで同時にマルチAZ設定およびINTELLIGENT_TIERING設定を有効化する必要があります。
- 操作の制限：現在はオブジェクトのアップロード、ダウンロードおよび削除操作のみサポートしています。オブジェクトはマルチAZのバケットへのコピーのみをサポートしており、シングルAZのバケットへのコピーはサポートしていません。
- ライフサイクルの制限：現在は期限切れとなったオブジェクトの削除のみをサポートしています。マルチAZストレージタイプからシングルAZストレージタイプへの移行はサポートしていません。
- クロスリージョンレプリケーションの制限：マルチAZストレージタイプをシングルAZストレージタイプにコピーすることはサポートされていません。

