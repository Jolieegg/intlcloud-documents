본 문서에서는 버킷에 버킷 복사 기능 활성화 후 Cloud Object Storage(COS)에서 복사하는 콘텐츠와 복사하지 않는 콘텐츠에 대해 소개합니다.

##복사하는 콘텐츠

COS는 원본 버킷에 버킷 복사 기능을 활성화한 경우 다음 콘텐츠를 복사합니다.

- 버킷 복사 규칙 추가 후, 사용자가 원본 버킷에 새로 업로드한 모든 객체
- 객체의 메타데이터 및 버전 ID 등 객체 속성 정보
- 동일한 이름의 객체 신규 추가(객체 신규 추가와 동일), 객체 삭제 등 객체 관련 작업 정보

>?
>
>- 원본 버킷에서 특정 객체 버전(즉, 버전 ID)을 지정하여 삭제하는 경우 해당 작업은 복사하지 않습니다.
>- 원본 버킷에서 라이프사이클 규칙과 같은 버킷 레벨을 추가한 경우, 해당 설정으로 인한 객체 작업 또한 타깃 버킷에 복사되지 않습니다.

#### 버킷 복사에서의 삭제 작업

원본 버킷에서 객체를 삭제하는 경우 버킷 복사는 다음과 같이 실행됩니다.

- 객체 버전 ID를 지정하지 않고 DELETE를 요청하는 경우 COS는 원본 버킷에 삭제 마커를 추가합니다. 이 때, 마커 삭제 동기화를 선택한 경우 버킷 복사 시 해당 마커를 타깃 버킷으로 복사하며, 마커 삭제 비동기화를 선택한 경우 타깃 버킷에는 삭제 마커가 추가되지 않습니다. 해당 두 상황에서 타깃 버킷의 해당 파일은 삭제되지 않으며, 사용자는 버전 ID를 지정해 객체의 이전 버전에 액세스할 수 있습니다. 버전 제어 및 삭제 마커에 대한 자세한 정보는 [버전 제어 개요](https://intl.cloud.tencent.com/document/product/436/19883) 문서를 참조하십시오.
- 객체 버전 ID를 지정하여 DELETE를 요청하는 경우 COS는 원본 버킷에서 해당 객체 버전을 삭제하고, 타깃 버킷에서는 해당 작업을 복사하지 않습니다. 즉, COS는 타깃 버킷에서 해당 객체 버전을 삭제하지 않으며, 이는 악성 데이터 삭제를 방지하기 위해서입니다.

## 복사하지 않는 콘텐츠

COS는 원본 버킷에 버킷 복사 기능을 활성화한 경우 다음 콘텐츠를 복사하지 않습니다.

- 버킷 복사 기능 활성화 전 이미 존재하고 있던 객체 콘텐츠, 즉 인벤토리 데이터
- 암호화된 객체의 암호화 정보, 즉 암호화 객체는 복사 후 암호화 정보가 유실됨
- 원본 버킷에 신규 추가된 데이터가 다른 버킷에서 복사된 객체 데이터인 경우
- 버킷 레벨의 설정 업데이트 행위
- 라이프사이클 설정 실행 후 결과

>?
>
>- 객체 데이터는 버킷 간의 버킷 복사 시 전달 복사되지 않습니다. 즉, A 버킷을 원본 버킷으로 하고 B 버킷을 타깃 버킷으로 하는 규칙과 B 버킷을 원본 버킷으로 하고 C 버킷을 타깃 버킷으로 하는 규칙, 해당 2개의 버킷 복사 규칙을 설정하는 경우 A 버킷에 새로 추가된 객체 데이터는 B 버킷에만 복사되고 C 버킷에는 복사되지 않습니다.
>- 원본 버킷의 라이프사이클 설정을 업데이트하는 경우, COS에서는 해당 라이프사이클 설정을 타깃 버킷에 동기화하지 않습니다.
>- 원본 버킷에만 라이프사이클을 설정한 경우 COS는 만료된 객체에 대해 삭제 마커를 추가하고 타깃 버킷에 해당 마커를 복사하지 않습니다. 타깃 버킷의 만료 객체를 삭제하고 싶은 경우, 타깃 버킷에 원본 버킷과 동일한 라이프사이클 규칙을 독립적으로 설정해야 합니다.