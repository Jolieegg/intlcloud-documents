## 적용 시나리오

- 응답 지연 및 다운로드 속도에 대한 요구 사항이 높은 시나리오.
- 리전, 국가, 대륙 간에 GB~TB 용량의 데이터를 전송하는 시나리오.
- 같은 콘텐츠를 짧은 시간에 반복적으로 다운로드하는 시나리오.

>!다운로드 요청 출처가 Tencent Cloud VPC인 경우(예: CVM을 사용하여 COS 버킷에 액세스) COS 도메인을 직접 사용하는 것이 좋습니다. 사용자 지정 CDN 가속 도메인을 사용하는 경우 공중망을 통해 CDN 노드에 액세스해야 하며, 이때 CDN Origin-pull 요금 및 CDN 트래픽 요금과 같은 추가 요금이 발생합니다.
>

## 관련 설명

도메인의 정의, CDN Origin-pull 인증, CDN 인증 설정에 대한 내용은 [CDN 가속 개요](https://intl.cloud.tencent.com/document/product/436/18669) 문서의 소개 내용을 확인하십시오.

CDN Origin-pull 인증, CDN 인증 구성은 사용자 지정 CDN 가속 도메인 이름 및 COS 도메인 이름이 원본 버킷에 액세스하는 방식에 영향을 미칩니다. 자세한 내용은 다음 표를 참고하십시오.

| 버킷 액세스 권한       | CDN Origin-pull 인증 | CDN 인증 | 사용자 지정 CDN 가속 도메인 이름을 통해 <br>원본에 액세스 가능 | COS 엔드포인트를 통해 <br>원본에 액세스 가능 | 시나리오     |
| ------------------- | ------------ | ------------ | --------------- | --------------- | ------------ |
| 공개 읽기              | 비활성화         | 비활성화         | Yes          | Yes          | 전체 서버 공용 액세스 |
| 공개 읽기              | 활성화         | 비활성화         | Yes          | Yes          | 비권장       |
| 공개 읽기              | 비활성화         | 활성화         | URL 인증 필요          | Yes          | 비권장       |
| 공개 읽기              | 활성화         | 활성화         | URL 인증 필요          | Yes          | 비권장       |
| 개인 읽기+CDN 서비스 라이선스 | 활성화         | 활성화         | URL 인증 필요 | COS 인증 필요 | 전체 링크 보호   |
| 개인 읽기+CDN 서비스 라이선스 | 비활성화         | 활성화         | URL 인증 필요       | COS 인증 필요 | 비권장       |
| 개인 읽기+CDN 서비스 라이선스 | 활성화         | 비활성화         | Yes          | COS 인증 필요 | 원본 보호    |
| 개인 읽기+CDN 서비스 라이선스 | 비활성화         | 비활성화         | No        | COS 인증 필요 | 비권장       |
| 개인 읽기              | 비활성화         | 활성화 또는 비활성화         | No | COS 인증 필요 | CDN 이용 불가 |

>!위의 표에 기재된 **원본 서버 보호** 시나리오의 경우, CDN 인증 설정을 활성화하지 않으면 CDN 엣지 노드에 캐싱된 데이터가 악의적으로 풀링될 수 있으니 CDN 인증 설정을 활성화하여 데이터 보안을 강화하시기 바랍니다.

## CDN 가속 설정


COS 콘솔에서 버킷에 사용자 정의 도메인을 바인딩한 다음 사용자 정의 도메인 CDN 가속을 활성화하고, 마지막으로 사용자 정의 도메인 가속을 통해 메모리 버킷에 액세스할 수 있습니다. 사용자 정의 도메인을 바인딩할 때 사용자 정의 도메인의 서비스 공급자로부터 CNAME 리졸브를 직접 추가해야 합니다.

>! 현재 COS에서 사용자 정의 가속 도메인을 사용할 경우 반드시 CDN을 활성화해야 합니다. 실제 상황에 따라 선택하여 적용하시기 바랍니다.
1. 도메인으로 중국 내 CDN에 액세스하는 경우, ICP비안이 필요합니다. 하지만 Tencent Cloud의 경우, ICP비안이 필수사항이 아니며, 액세스할 도메인이 등록된 도메인이면 가능합니다.
2. 도메인으로 해외 CDN에 액세스하는 경우, ICP비안이 필요하지 않습니다. 단, Tencent Cloud에 저장한 데이터와 작업에 관해서는 관련 국가의 법률, 법규 및 [<General Service Level Agreements>](https://intl.cloud.tencent.com/document/product/301/12905)를 준수해야 합니다.

### 전제 조건


1. 도메인을 등록합니다. 도메인은 Tencent Cloud [도메인 등록](https://console.cloud.tencent.com/domain) 또는 기타 서비스 제공 업체를 통해 등록할 수 있습니다.
2. ICP비안 신청서. 중국 본토에서 콘텐츠를 제공하려면 ICP비안을 완료하십시오.

### 작업 단계

>!COS 콘솔과 CDN 콘솔에서 사용자 정의 도메인을 추가할 수 있고, CDN 가속 활성화도 가능합니다. CDN 콘솔에서 사용자 정의 도메인을 추가하려면 [도메인 연결](https://intl.cloud.tencent.com/document/product/228/5734)을 참고하십시오.

#### 1. 버킷 선택
[COS 콘솔](https://console.cloud.tencent.com/cos5)에 로그인한 뒤 왼쪽 사이드바에서 **버킷 리스트**를 클릭하고, CDN 가속을 활성화할 버킷 이름을 클릭합니다.

#### 2. 사용자 정의 CDN 가속 도메인 추가

**도메인 및 전송 관리 > 사용자 지정 CDN 가속 도메인**을 클릭하고 **사용자 정의 CDN 가속 도메인** 구성 항목 아래에서 **도메인 추가**를 클릭하여 구성 가능한 상태로 들어갑니다.
  - **도메인 이름**: 타깃 사용자 정의 도메인 이름(예시: `www.example.com`)을 입력합니다. ICP 비안이 완료되고 CNAME 레코드가 입력한 도메인에 대한 DNS 서비스 제공 업체에서 구성되었는지 확인하십시오. 자세한 내용은 [CNAME 설정](https://intl.cloud.tencent.com/document/product/228/3121)을 참고하십시오. 연결하려는 사용자 정의 CDN 가속 도메인이 다음과 같은 상황에 있는 경우 [도메인 소유권 인증](https://intl.cloud.tencent.com/document/product/228/42693)의 지침에 따라 도메인 소유권을 확인해야 합니다.
     - 처음으로 연결하는 도메인
     - 다른 사용자에 의해 연결된 도메인
     - 와일드카드 서브도메인
  - **가속 리전**: CDN 가속은 중국 내, 중국 외 및 전 세계 리전에 대해 지원되며 모든 리전의 버킷에 대한 글로벌 가속이 있습니다.
  - **원본 서버 유형**: 기본값은 **기본 원본 서버**입니다. 원본 서버인 버킷으로 정적 웹 사이트를 활성화한 뒤 가속하려면 원본 서버 유형을 **정적 웹 사이트 원본 서버**로 설정하십시오. 자세한 내용은 [CDN 가속 개요](https://intl.cloud.tencent.com/document/product/436/18669)를 참고하십시오.
  - **인증**: Origin-pull 인증을 활성화합니다. 개인 읽기 버킷의 경우, **Origin-pull 인증을 활성화**하여 원본 서버를 보호합니다.
>!
>개인 읽기 버킷의 경우 Origin-Pull 인증과 CDN 서비스 권한이 모두 활성화되어 있으면 CDN을 통해 원본에 액세스하는 데 서명이 필요하지 않으며 CDN에 캐시된 리소스가 공중망에 배포되므로 데이터 보안에 영향을 미칩니다. 따라서 CDN 인증을 활성화하는 것이 좋습니다.
>
  - Origin-pull 인증 활성화
Origin-pull 인증은 불법 액세스를 차단하기 위해 CDN 엣지 노드의 서비스 자격을 인증하는 용도입니다. 자세한 내용은 다음과 같습니다.
     - 공개 읽기 버킷: 라이선스가 없어도 CDN 엣지 노드에서 버킷에 바로 액세스할 수 있으므로 Origin-pull 인증을 실행하지 않아도 됩니다.
     - 개인 읽기 버킷: CDN 엣지 노드는 Origin-pull 인증을 통해 서비스 자격을 인증해야 하며, 인증을 통과해야 버킷에 저장된 객체에 액세스할 수 있습니다. **Origin-pull 인증** 활성화를 선택하십시오.

**Origin-pull 인증** 활성화 후, 오른쪽의 **저장**을 클릭하고 5분 정도 기다리면 사용자 정의 도메인이 추가되고, CDN 가속 배포가 완료됩니다.
  - CDN 인증 활성화
>!
>사용자 지정 도메인 이름에 대해 CDN 가속이 활성화되면 누구나 도메인 이름을 통해 원본 서버에 액세스할 수 있습니다. 따라서 데이터를 비공개로 유지해야 하는 경우 CDN 인증을 활성화하여 원본 서버에서 데이터를 보호해야 합니다.
>
사용자 정의 도메인의 배포가 완료되면 CDN 인증 메뉴에 CDN 인증 기능 설정을 위한 링크가 나타납니다. 이때 **설정**을 클릭하면 CDN 콘솔로 이동해 CDN 인증을 설정할 수 있습니다. 자세한 내용은 [인증 설정](https://intl.cloud.tencent.com/document/product/228/35237)을 참고하십시오.

  - **CDN 캐시 자동 퍼지**: 활성화되면 COS 버킷 업데이트 파일 규칙이 트리거될 때 CDN 캐시가 자동으로 퍼지됩니다. COS 함수 계산 설정으로 이동할 수 있습니다. 작업 가이드는 [CDN 캐시 퍼지 설정](https://intl.cloud.tencent.com/document/product/436/37273)을 참고하십시오.
  - **HTTPS 인증서**: 사용자 정의 CDN 가속 도메인에 HTTPS 인증서를 추가하려면 [CDN 콘솔](https://console.cloud.tencent.com/cdn/certificate)로 이동하여 설정할 수 있습니다.


#### 3. 도메인 이름 리졸브

사용자 지정 도메인 이름이 CDN에 추가되면 시스템에서 '.cdn.dnsv1.com' 접미사가 붙은 CNAME 도메인 이름을 자동으로 할당합니다. 도메인 이름 서비스 공급자에서 CNAME 구성을 완료해야 합니다. 자세한 내용은 [CNAME 설정](https://intl.cloud.tencent.com/document/product/228/3121)을 참고하십시오.

>!CNAME 도메인으로 바로 액세스할 수 없습니다.



#### 4. 기능 비활성화

위의 단계가 완료되면 사용자 정의 도메인을 통해 버킷 내 리소스에 대한 액세스 를 가속화할 수 있습니다. 사용자 지정 CDN 가속을 비활성화 하려면 다음과 같은 방법으로 비활성화할 수 있습니다.

사용자 정의 CDN 가속 도메인 관리 인터페이스에서 **편집**을 클릭하여 도메인 상태를 변경할 수 있습니다. 도메인 상태를 **사용 중**에서 **사용하지 않음**으로 변경한 뒤 **저장**을 클릭하여 배포합니다. 약 5분 경과 후 기능이 비활성화되며, CDN 콘솔의 해당 사용자 정의 가속 도메인 상태도 **활성화됨**에서 **비활성화됨**으로 변경됩니다.

>!사용자 정의 도메인을 삭제할 경우, 사용자 정의 도메인이 **사용 중** 상태일 때는 바로 삭제할 수 없습니다. 상태를 **사용하지 않음**으로 변경한 뒤 삭제하십시오. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에서 도메인의 비활성화 또는 삭제 작업을 실행할 수 있으며, 자세한 내용은 [도메인 작업](https://intl.cloud.tencent.com/document/product/228/5736)을 참고하십시오.


