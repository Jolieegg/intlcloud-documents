Cloud Object Storage(COS)의 일괄 작업 기능을 사용하면 버킷 내에서 지정된 객체 목록에 대한 작업을 지정할 수 있습니다. 이를 위해 두 가지 옵션이 있습니다. 인벤토리 기능을 사용하여 객체 인벤토리를 생성하거나 인벤토리와 같은 형식으로 원하는 객체를 CSV 파일에 나열합니다. 이렇게 하면 COS에서 지정된 대로 객체가 일괄적으로 작업됩니다.

자세한 정보는 [인벤토리 개요](https://intl.cloud.tencent.com/document/product/436/30622)를 참고하십시오.

현재 COS 일괄 작업 기능은 다음과 같은 작업만 지원합니다.

- [객체 일괄 복사](https://intl.cloud.tencent.com/document/product/436/32960)
- [보관 객체 일괄 복구](https://intl.cloud.tencent.com/document/product/436/34075)

일괄 작업 기능은 COS 콘솔에서 사용할 수 있습니다. 자세한 내용은 [일괄 작업](https://intl.cloud.tencent.com/document/product/436/32956)을 참고하십시오.



## 원리

일괄 작업을 수행하려면 먼저 객체 목록에 대해 지정된 작업을 수행하기 위해 필요한 모든 정보를 포함하는 일괄 작업을 생성해야 합니다. 객체 목록으로 인벤토리를 사용할 수 있습니다.

인벤토리 파일을 제공하고 생성한 일괄 작업을 시작한 후, 일괄 작업 기능은 인벤토리의 객체에 지정된 작업을 순차적으로 수행합니다. 작업 실행 중에는 COS 콘솔에서 실행 상태를 모니터링하거나 작업이 완료된 후 작업 보고서를 출력할 수 있습니다. 작업 보고서는 작업 내 각 작업에 대한 자세한 정보를 제공합니다.

> !일괄 작업 기능은 현재 버킷의 객체에만 적용됩니다. 다른 버킷의 객체에 대해 일괄 작업을 수행하려면 해당 버킷에 대해 일괄 작업 기능을 활성화해야 합니다.

## 객체 인벤토리

객체 인벤토리는 작업 대상인 모든 객체의 목록입니다. 일괄 작업을 생성하려면 먼저 COS에게 작업을 수행해야 할 객체를 알려주기 위해 객체 인벤토리를 제공해야 합니다. 객체 인벤토리 파일을 버킷에 넣고 파일 이름, ETag 및 VersionID(해당되는 경우)와 같은 정보를 제공해야 합니다. 객체 인벤토리는 다음 두 가지 방법으로 생성할 수 있습니다:

- **COS 인벤토리 기능**: 이 기능은 객체 인벤토리를 CSV 형식으로 출력합니다. 자세한 정보는 [인벤토리 개요](https://intl.cloud.tencent.com/document/product/436/30622)를 참고하십시오. 객체 인벤토리에 버전 ID 정보가 포함된 경우, COS는 해당 버전 ID를 가진 객체들에 대해 일괄 작업을 수행합니다.
- **CSV 파일 구성**: CSV 파일의 모든 행에는 일괄 작업을 위한 버킷 이름과 객체의 이름 및 버전 ID(버킷에 대해 버전 관리가 활성화된 경우)가 포함되어야 합니다. 버전 관리가 활성화된 적이 없는 경우 버전 ID 정보를 건너뛸 수 있습니다. CSV 파일은 다음과 같이 구성할 수 있습니다.
```plaintext
examplebucket-appid, exampleobject, PZ9ibn9D5lP6p298B7S9_ceqx1n5EJ0p
examplebucket-appid, exampleobject, jbo9_jhdPEyB4RrmOxWS0kU0EoNrU_oI
```

> !
> - 만약 버전 관리가 버킷에 활성화되었거나 활성화되었던 적이 있으며, 지정된 버전의 객체에 대해 일괄 작업을 수행하려면, 객체 인벤토리에서 객체 버전 ID 정보를 제공해야 합니다.
> - 만약 버전 관리가 버킷에 활성화되었거나 활성화되었던 적이 있지만 인벤토리에서 버전 ID를 지정하지 않은 경우, COS는 기본적으로 객체의 최신 버전에서 작업을 수행합니다.
> - 작업을 생성하기 전에 객체 이름이 같은 객체를 업로드했다면, COS는 객체 인벤토리가 생성될 때의 버전이 아닌 최신 버전의 객체에서 기본적으로 작업을 수행합니다. 이 문제를 피하기 위해서는 버전 관리를 활성화하고 객체 인벤토리에서 버전 ID를 지정할 수 있습니다.
> - 객체 인벤토리는 버킷의 모든 객체를 포함할 수 있습니다. 그러나 많은 수의 객체에 대해 작업을 수행하는 데에는 시간이 더 오래 걸릴 수 있다는 점을 유의해야 합니다.
> 

## 일괄 작업

이 섹션에서는 일괄 작업을 생성하는 방법과 생성 후 시스템이 어떻게 응답하는지 설명합니다.

일괄 작업 생성 시에는 다음 정보를 제공해야 합니다.

| 유형 | 설명 |
|---------|---------|
| 작업 | 객체에 대해 수행할 작업을 지정해야 합니다. 각 작업에 대해 해당 매개변수를 구성할 수 있으며, COS는 인벤토리의 객체에 대해 구성된대로 순차적으로 작업을 수행합니다. |
| 객체 인벤토리 | 객체 인벤토리는 수행할 모든 객체의 목록입니다. 인벤토리 기능을 사용하여 객체 인벤토리를 생성할 수 있습니다. 자세한 내용은 [인벤토리 개요](https://intl.cloud.tencent.com/document/product/436/30622)를 참고하십시오. 인벤토리와 동일한 형식으로 CSV 파일에서 필요한 객체를 나열할 수도 있습니다. |
| 우선순위 | 우선순위를 설정하여 현재 일괄 작업의 우선 순위를 다른 작업보다 높게 설정할 수 있습니다. 작업 우선 순위는 직접 작업이 완료되는 순서를 결정하지는 않습니다. 여러 작업의 순서를 제어하려면 직접 작업 실행 상태를 확인하고 현재 작업이 완료된 후 다음 작업을 시작해야 합니다. |
| 규칙 권한 | 일괄 작업을 생성한 후 작업을 수행할 적절한 IAM 권한이 계정에 있는지 확인해야 합니다. 예를 들어 `PUT Object-copy`를 실행하는 일괄 작업을 생성한 경우 소스 버킷에서 `Get Object` 권한과 대상 버킷에서 `PUT Object` 권한을 확인해야 합니다. 또한 모든 일괄 작업에 대해 객체 인벤토리를 읽고 작업 보고서에 쓰는 권한이 있어야 합니다. 권한 구성에 대한 자세한 내용은 [권한 설정](https://intl.cloud.tencent.com/document/product/436/18023) 및 [버킷 액세스 정책](https://intl.cloud.tencent.com/document/product/436/45235)을 참고하십시오. |
| 작업 보고서 | 일괄 작업이 완료된 후 작업 보고서를 출력하려면 작업 생성 시 해당 매개변수를 입력하여 시스템이 작업 보고서를 지정된 대상 버킷에 올바르게 출력할 수 있도록 설정해야 합니다. 필요한 정보는 작업 보고서를 저장할 버킷, 작업 보고서 형식 및 모든 작업 정보 포함 여부입니다. 작업 보고서의 파일 접두사는 선택 사항입니다. |
| 작업 설명(옵션) | 생성된 일괄 작업에 대해 256바이트 작업 설명을 입력하여 추적할 수 있습니다. 작업 설명은 COS 콘솔에서 표시되며 작업을 정렬하거나 필터링하는 데 사용할 수 있습니다. 유사한 작업(예: 매주 로그 데이터를 동기화하고 복사하는 것)에 동일한 작업 설명을 입력하여 중앙 집중식으로 관리할 수 있습니다. |

