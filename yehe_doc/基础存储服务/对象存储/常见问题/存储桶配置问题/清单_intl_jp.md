### リストが正常に配信されたことを確認するにはどうすればよいですか。

リストファイルの生成時間は設定に関係しています。毎日生成を選択すると、リストは一般的に設定翌日の現地時間の未明の時間帯に配信されます。毎週生成を選択すると、リストは一般的にその週の最終日の未明から生成と配信を開始します。

リストが正常に配信された後に通知を受信したい場合は、[SCF](https://console.cloud.tencent.com/scf)コンソールでCOSトリガーを設定し、イベントタイプを**ファイルリストレポート配信完了イベント**に設定します。



### リストファイルレポートを分析するにはどうすればよいですか。

リストファイルレポートを生成後、COSの[COS Select](https://intl.cloud.tencent.com/document/product/436/32472)機能を使用してリストファイル内の情報をフィルタリングすることができます。一部の操作の例を次に示します。

1. ストレージタイプが標準ストレージのファイルをフィルタリングします。
```
select * from cosobject s where s._7 = TO_STRING('Standard')
```
2. 5GBより小さいファイルをフィルタリングします。
```
select * from cosobject s where s._4<5*1024*1024
```
3. 5GBより大きく、かつ標準ストレージタイプのファイルをフィルタリングします。
```
select * from cosobject s where s._4>5*1024*1024 AND s._7=TO_STRING('Standard')
```
4. コピーステータスが「replica」である（コピーが完了している）ファイルをフィルタリングします。
```
select * from cosobject s where s._9=TO_STRING('replica')
```
5. リストレポートの中の最初の100ファイルのレコードを確認します。
```
select * from cosobject s limit 100
```

### COSから全ファイルの情報をエクスポートするにはどうすればよいですか。

バケットのリスト機能をアクティブ化すると、COSは毎日または毎週定期的に、オブジェクトの属性、設定の詳細に関するリストレポートをお客様のバケットに出力します。詳細な説明および操作ガイドについては、[リスト機能のアクティブ化](https://intl.cloud.tencent.com/document/product/436/30624)のドキュメントをご確認ください。

>?
>- リスト機能は現時点では金融クラウドリージョンをサポートしていません。
>- リスト機能を使用すると、それに対応する**管理機能料金**が発生します。価格の情報については[製品価格](https://buy.cloud.tencent.com/price/cos)をご確認ください。

### COSでファイルリストを取得するにはどうすればよいですか。

COS内のファイルリストは次のいずれかの方法で取得できます。

1. COSコンソールで、バケットの[リスト機能のアクティブ化](https://intl.cloud.tencent.com/document/product/436/30624)を行います。リスト機能をアクティブ化すると、毎日または毎週定期的に、オブジェクトの属性、設定の詳細に関するリストレポートをお客様のバケットに出力することができます。リストに関するその他の詳細については、[リスト機能の概要](https://intl.cloud.tencent.com/document/product/436/30622)をご参照ください。
2. APIを使用して、[GET Bucket（List Objects）](https://intl.cloud.tencent.com/document/product/436/30614)インターフェースを呼び出してすべてのオブジェクトを取得します。インターフェースから返されるのはXML形式のため、ご自身で処理する必要があります。

### COSリスト機能の設定にミスがありました。すぐに手動で再起動してよいですか。

COSのリスト機能は毎日未明に定期的に最新設定を読み取り、それからタスクの実行を開始しており、現時点では即時の手動でのトリガーはサポートしていません。リスト設定を変更した後、翌日の未明にタスクが再実行されるまでお待ちください。

### COSはファイルタイプによって数量を集計することができますか。

[リスト機能](https://intl.cloud.tencent.com/document/product/436/30622)を使用して、毎日または毎週一定の時刻にバケット内のユーザーが指定したオブジェクトまたは同一のオブジェクトプレフィックスを持つオブジェクトのスキャンを行い、リストレポートを出力して、CSV形式のファイルをユーザーが指定したバケットに保存することができます。さらに「fileFormat」で、目的のファイル形式のファイル数をフィルタリングして集計します。

### ローカルファイルとCOS内のファイルが一致しているかを比較するにはどうすればよいですか。
HEAD Object、List Objectリクエストによって単一または複数のオブジェクトのMD5を取得し、ローカルファイルのMD5と比較することができます。非常に大量のバケットについては、[リスト機能](https://intl.cloud.tencent.com/document/product/436/30622)を使用して、オブジェクトリストおよびそのMD5値を非同期的に取得することができます。操作ガイドについては、[リスト機能のアクティブ化](https://intl.cloud.tencent.com/document/product/436/30624)コンソールドキュメントをご参照ください。

### COSで「ファイル名」、「サイズ」、「オブジェクトアドレス」を取得し、XLSファイルとして保存してエクスポートするにはどうすればよいですか。

リスト機能をアクティブ化し、リスト機能によってリストレポートを自動的に出力し、CSV形式のファイルを指定したバケットに保存することができます。リスト機能によって、「ファイルパス」、「ファイルサイズ」、「オブジェクトの直近の変更日」、「ETag」、「ストレージタイプ」などの情報を取得できます。オブジェクトアドレスを取得する必要がある場合は、バケットドメイン名によってファイルパスをスプライシングする方法で取得できます。詳細については、[リスト機能の概要](https://intl.cloud.tencent.com/document/product/436/30622)をご参照ください。

### COSで、特定のフォルダ内にファイルがいくつあり、どのくらいの容量を占有しているかを確認するにはどうすればよいですか。

ファイルが少量であれば、コンソールでフォルダの詳細を確認することで、フォルダ内のファイル数およびファイルの占有容量を確認できます。バケット内のオブジェクト数が10000個を超えている場合は、[リスト機能](https://intl.cloud.tencent.com/document/product/436/30622)を使用して照会することをお勧めします。


