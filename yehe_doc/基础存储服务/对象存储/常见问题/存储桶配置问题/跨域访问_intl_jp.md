### クロスドメインアクセスとは何ですか。どのように設定しますか。

クロスドメインアクセスとはHTTPリクエストによって、1つのドメインから別のドメインのリソースをリクエストすることであり、プロトコル、ドメイン名、ポートのうちいずれかが異なる場合は、すべて異なるドメインとみなされます。コンソールでの操作手順については、[クロスドメインアクセスの設定](https://intl.cloud.tencent.com/document/product/436/13318)または[クロスドメインアクセス](https://intl.cloud.tencent.com/document/product/436/11488)のベストプラクティスドキュメントをご参照ください。

### クロスドメインアクセスを設定すると、ホワイトリストに含まれているヘッダーのCOSへのアクセスが拒否されましたが、どのように対処すればよいですか。

アクセスが拒否された原因として考えられるものは次のとおりです。
1. 含まれるヘッダーが設定と一致しているかをチェックし、スペースなどの見えない文字が存在しないかどうかを確認します。
2. リクエストを送信したドメイン名の情報をチェックします。CDNアクセラレーションドメイン名を使用したアクセスの場合は、CDNコンソールでクロスドメイン設定を行う必要があります。[カスタマイズレスポンスヘッダーの設定](https://intl.cloud.tencent.com/document/product/228/35320)をご参照ください。
3. バケットの権限の状態をチェックし、アクセスがバケットの権限承認に適合しているかどうか判断します。
4. ブラウザキャッシュの状況をチェックします。ブラウザキャッシュによって起こったエラーである可能性がある場合は、Ctrl+F5によってブラウザを強制的に更新するか、またはブラウザの【Network】オプションタブでDisable cacheにチェックを入れると解決できます。


### バケット内のファイルのheadersが「Access-Control-Allow-Origin:* 」を返すように設定するにはどうすればよいですか。

クロスドメインの設定を行い、Originを`*`に設定します。詳細については、[クロスドメインアクセスの設定](https://intl.cloud.tencent.com/document/product/436/11488)のベストプラクティスドキュメントをご参照ください。

### アップロードの際に「get ETag error, please add "ETag" to CORS ExposeHeader setting. 」というエラーが表示されましたが、どのように対処すればよいですか。

下図に従ってクロスドメインルールを設定し、ブラウザの切り替えを試し、実行可能かどうかのテストを行ってください。詳細については、[クロスドメインアクセスの設定](https://intl.cloud.tencent.com/document/product/436/11488)をご参照ください。
![](https://main.qcloudimg.com/raw/e2cb8ce626ceaba0058423bb5eb72327.png)

### Tencent Cloud COSとCDNを同時に使用すると、COSのクロスドメインが正常に動作しないのですが、どのように対処すればよいですか。

使用しているドメイン名がCDNアクセラレーションドメイン名の場合は、CDNコンソールでクロスドメインの設定を行ってください。詳細については、[HTTPレスポンスヘッダーの設定](https://intl.cloud.tencent.com/document/product/228/35320)のドキュメントをご参照ください。

### クロスドメイン設定はソースOriginのあいまい一致をサポートしていますか。

コンソールはセカンドレベルドメイン名のあいまい一致をサポートしています。

### COSのクロスドメインアクセスでエラーが発生しましたが、どのように対処すればよいですか。

次の手順に従ってチェックを実施してください。
1. COSコンソールにクロスドメインルールが設定されているかをチェックします。詳細な操作については、[クロスドメインアクセスの設定](https://intl.cloud.tencent.com/document/product/436/13318)をご参照ください。
2. CDNアクセラレーションドメイン名を使用しているかどうかを確認します。CDNアクセラレーションドメイン名を使用している場合は、CDN側でクロスドメインルールを設定する必要があります。[HTTPレスポンスヘッダーの設定](https://intl.cloud.tencent.com/document/product/228/35320)をご参照ください。
3. クロスドメインルールを設定済みの場合は、コマンドラインを使用してルールが有効になっているかどうかをテストしてください。コマンドの形式は、`curl -Lvo /dev/null "<オブジェクトアドレス>" -H "origin:<ドメイン名>"`です。業務の状況に応じて<>の中の値を置き換えてください。例えば、`curl -Lvo /dev/null "https://bucketname-1250000000.cos.ap-guangzhou.myqcloud.com/test.png" -H "origin:https://www.baidu.com"`などとします。ステータスコード200が返された場合、ルールは有効になっています。ブラウザキャッシュを削除してからリトライしてください。
4. それでも解決できない場合は、クロスドメインアクセスルールにmax-age=0を設定してみてください。

### クロスドメインのCORSアクセスルールにIPアドレスを追加することはできますか。
クロスドメインルールはIPアドレスの形式での設定をサポートしておらず、ドメイン名形式のみサポートしています。詳細な説明については、[クロスドメインアクセスの設定](https://intl.cloud.tencent.com/document/product/436/13318)のドキュメントをご参照ください。

### COSでCDNを設定し、CDNを通じてCOS内のファイルにアクセスしたところ、クロスドメインエラーが発生しましたが、どのように対処すればよいですか。

CDNを使用してCOSにアクセスした際にクロスドメインエラーとなった場合は、[HTTPレスポンスヘッダーの設定](https://intl.cloud.tencent.com/document/product/228/35320)のドキュメントを参照し、CDNコンソールでクロスドメインを許可するよう設定してください。

### ファイルのURLにアクセスした際にクロスドメインアクセスエラーが発生しましたが、解決するにはどうすればよいですか。

クロスドメインアクセスを設定しているかどうかをチェックし、正しく設定されていれば、ブラウザキャッシュをクリアしてからリトライすることをお勧めします。それでも解決できない場合は、クロスドメインアクセスルールにmax-age=0を設定してみてください。クロスドメインアクセスの設定ガイドについては、[クロスドメインアクセスの設定](https://intl.cloud.tencent.com/document/product/436/13318)をご参照ください。
