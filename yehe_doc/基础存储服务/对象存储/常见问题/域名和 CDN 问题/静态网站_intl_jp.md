
### COSコンソールでのカスタムドメイン名の設定に失敗しましたが、どのように対処すればよいですか。

1. ドメイン名がICP登録済みであることを確認します。
2. ドメイン名のDNSが正しく解決されていることを確認します。CDNアクセラレーションを無効にしている場合は、あらかじめDNS解決コンソールでドメイン名のCNAMEをバケットの[デフォルトドメイン名](https://intl.cloud.tencent.com/document/product/436/18424)に解決しておく必要があります）。


### ユーザーが独自ドメイン名をバインドする際、CDNアクセラレーションを有効化するか無効化するかの違いは何ですか。

- **CDNアクセラレーションを有効化：**ドメイン名はCDNによって管理され、COSコンソールでCDNアクセラレーションを有効化することと[CDNコンソール](https://console.cloud.tencent.com/cdn)でドメイン名を追加（オリジンサーバーはCOSを選択）することの効果は同じになります。ユーザーはドメイン名を解決する際に、CDNによって割り当てられたCNAMEレコードを使用する必要があります。設定の際は、先にドメイン名を追加し、その後ドメイン名を解決します。ドメイン名の解決については、ドメイン名のクイック追加と解決をご参照ください。
- **CDNアクセラレーションを無効化：**ドメイン名はCOSによって管理され、ドメイン名を設定すると対応するバケットの所属リージョンのすべてのダウンロード接続マシンに配信されます。 ユーザーはドメイン名を解決する際に、バケットのデフォルトドメイン名をCNAMEレコードとして使用する必要があります。設定の際は、先にドメイン名を解決し、その後カスタムドメイン名を追加する必要があります。

### オブジェクトのカスタムヘッダーContent-Dispositionを設定しても有効にならないのはなぜですか。

カスタムヘッダーのうち、他のカスタムヘッダーは設定するとすぐに有効になりますが、Content-Dispositionヘッダーは特殊で、静的ウェブサイト機能が有効かつカスタムドメイン名を使用してアクセスする場合にのみ、ヘッダーが有効になります。

### 設定した静的ウェブサイトにCDNドメイン名を使用してアクセスできない場合はどうすればよいですか。

次の手順に従ってCDNアクセラレーションドメイン名設定のトラブルシューティングと確認を行ってください。

1. オリジンサーバーのタイプについて、静的ウェブサイトをオリジンサーバーとして選択しているかに注意してください。
2. back-to-origin認証、CDNサービス権限認証はバケットの権限に基づき、それに応じた設定を行う必要があります。
 - バケットの権限がプライベート読み取りの場合は、CDNサービス権限を承認し、back-to-origin認証を有効にする必要があります。
 - バケットの権限がパブリック読み取りの場合は、CDNサービス権限を承認してback-to-origin認証を有効にする必要はありません。
3. CDN認証はバケットの権限に基づき、それに応じた設定を行う必要があります。

  (1) バケットの権限がプライベート読み取りの場合：
 <table>
	<tr><th>CDN認証設定</th><th>CDNアクセラレーションドメイン名アクセス</th><th>COSドメイン名アクセス</th><th>一般的なケース</th></tr>
	<tr><td>無効（デフォルト）</td><td>アクセス不可</td><td>COSを使用した認証が必要</td><td>CDNドメイン名に直接アクセス可能、オリジンサーバーデータ保護</td></tr>
	<tr><td>有効</td><td>URLを使用した認証が必要</td><td>COSを使用した認証が必要</td><td>全リンクのアクセスを保護、CDN認証リンク不正アクセス防止をサポート</td></tr>
</table>

 (2)バケットの権限がパブリック読み取りの場合：
<table>
	<tr><th>CDN認証設定</th><th>CDNアクセラレーションドメイン名アクセス</th><th>COSドメイン名アクセス</th><th>一般的なケース</th></tr>
	<tr><td>無効（デフォルト）</td><td>アクセス可</td><td>アクセス可</td><td>全サーバーでパブリックアクセス許可、CDNとオリジンサーバーどちらからのアクセスも可</td></tr>
	<tr><td>有効</td><td>URLを使用した認証が必要</td><td>アクセス可</td><td>CDNアクセスに対してはリンク不正アクセス防止が有効、ただしオリジンサーバーアクセスは保護されないため非推奨</td></tr>
</table>

4. 上記の設定に誤りがないことを確認した後、CDNアクセラレーションドメイン名へのアクセスに使用するプロトコルおよび静的ウェブサイトの**強制HTTPS**設定を確認してください。
 - CDNアクセラレーションドメイン名へのアクセスにHTTPプロトコルを使用している場合は、**強制HTTPSオプションを有効にしないでください**。
 - CDNアクセラレーションドメイン名へのアクセスにHTTPSプロトコルを使用している場合は、CDNアクセラレーションドメイン名に対し**back-to-originの301/302リダイレクトを有効に**するよう設定することをお勧めします。詳細については、[back-to-originの301/302リダイレクト設定](https://intl.cloud.tencent.com/document/product/228/7183)をご参照ください。

5. 上記の手順に従ってトラブルシューティングを行っても問題が解決しない場合は、[お問い合わせ](https://intl.cloud.tencent.com/contact-sales)ください。さらに詳細なトラブルシューティングを行うことができます。

### 静的ウェブサイト機能をフロントエンドのVueフレームワークと一緒に使用し、ルーティングをHistoryモードに設定しています。ページを更新すると404エラーが発生しましたが、どうすればよいですか。

バケットの静的ウェブサイト設定ページで、エラードキュメントをWebアプリケーションのポータルとして設定し（一般的には index.html）、エラードキュメントのレスポンスコードを200に設定してください。静的ウェブサイトの設定ガイドは、[静的ウェブサイトの設定](https://intl.cloud.tencent.com/document/product/436/14984)をご参照ください。


>! 上記の方法で設定を完了した後、さらに正常な404レスポンス機能を実現する必要がある場合、ユーザーはご自身で、Vueのフロントエンドルーティングで最下層の設定を行うことができます（一般的にはワイルドカードでカスタム404コンポーネントにマッチングさせます）。
>


