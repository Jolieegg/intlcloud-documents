### COS APIはS3プロトコルをサポートしていますか。

COSはAWS S3互換性を有するAPIを提供しています。詳細については、[AWS S3 SDKを使用したCOSアクセス](https://intl.cloud.tencent.com/document/product/436/32537)をご参照ください。

### APIインターフェースを呼び出した際、「Request has expired」などのエラーメッセージが表示されますが、どのように対処すればよいですか。

この表示が出た場合は、2つの可能性が考えられます。
- 1つ目は、リクエストの送信時間が署名の有効期間を過ぎていた場合です。
- 2つ目は、ローカルのシステム時刻が所在リージョンの時刻と一致していない場合です。

1つ目の可能性については、有効なリクエスト署名を再度取得してからAPIの操作を行うことをお勧めします。2つ目の可能性の場合は、ローカルのシステム時刻を所在リージョンの時刻に合わせて修正してください。

### アップロードが完了していないファイルを、APIを呼び出して削除するにはどうすればよいですか。

まず初めにListMultipartUploadsインターフェースを呼び出して、アップロードが完了していないファイルをリストアップした後、Abort Multipart uploadを呼び出してマルチパートアップロードを破棄し、アップロード済みのパートを削除します。

### 一括削除インターフェースを呼び出すと正しく返されますが、実際にはファイルの削除に失敗している場合はどうすればよいですか。

削除するファイルのパスをチェックしてください。ファイルパスは`/`で始める必要はありません。



### COSのマルチパートアップロードで、UploadPartリクエストの際にNoSuchUploadと返されます。

渡す**uploadId**と**partNumber**がすべて同じ場合、後から渡したパートがその前に渡されたパートを上書きします。 **uploadId**が存在しない場合は「404エラー、NoSuchUpload」と返されます。詳細については、[Upload Part](https://intl.cloud.tencent.com/document/product/436/7750)のドキュメントをご参照ください。

### APIによってオブジェクトストレージタイプを変更するにはどうすればよいですか。

ユーザーはPUT Object - Copyインターフェースを呼び出してx-cos-storage-classパラメータを変更することで、オブジェクトのストレージタイプを変更できます。詳細については、[PUT Object - Copy](https://intl.cloud.tencent.com/document/product/436/10881)をご参照ください。

### COSで署名を永続的に有効に設定するにはどうすればよいですか。

COSの署名はタイムスタンプを使用してリクエストが期限切れでないかどうかを判断するものであり、永続的に有効に設定することはできません。ユーザーがパーマネントキーを使用して署名を生成している場合、署名を長期的に有効にしたいのであれば、例えば有効期限を現在の時間から+50年とするなど、長期間のタイムスタンプを設定することができます。ユーザーが一時キーを使用して署名を生成している場合、一時キーの有効期間は最長で2時間のため、生成された署名の有効期間も2時間以内となります。

### COSはAPIによる請求書照会をサポートしていますか。

COSは請求書を照会するAPIを提供していません。コンソールの[請求書明細](https://console.cloud.tencent.com/expense/bill/summary)でご確認ください。APIで請求書の明細データを照会したい場合は、[請求書明細データの照会](https://intl.cloud.tencent.com/document/product/555/30756)の課金に関するドキュメントをご参照ください。

### APIを使用したストレージオブジェクトサイズの照会はサポートしていますか。

[GET Bucket（List Objects）](https://intl.cloud.tencent.com/document/product/436/30614)インターフェースでオブジェクトのサイズを照会できます。

### APIによってオブジェクト名を変更するにはどうすればよいですか。

[PUT Object - Copy](https://intl.cloud.tencent.com/document/product/436/10881)を使用してオブジェクトをコピーし、オブジェクト名を指定してリネームすることができます。

### APIによってバケットドメイン名を取得するにはどうすればよいですか。

[HEAD Bucket](https://intl.cloud.tencent.com/document/product/436/7735)インターフェースによってバケットドメイン名を取得します。レスポンスヘッダーの中の「x-cos-bucket-region」パラメータの値がバケットの所在リージョンを表します。

### APIによってバケットのサイズを取得するにはどうすればよいですか。

COSにはバケットのサイズを直接取得できるAPIはありません。[BCMインターフェース](https://intl.cloud.tencent.com/document/product/248/37269)からバケット内の各ストレージタイプのストレージ量を取得した後、それらを累計してバケットのストレージ量を算出することをお勧めします。

### APIによって使用量明細を照会するにはどうすればよいですか。

次の方法をご参照ください。

1. [APIリクエストツール](https://console.cloud.tencent.com/api/explorer?Product=billing&Version=2018-07-09&Action=DescribeDosageCosDetailByDate&SignVersion=)を直接使用して照会を行います。

### COSにはディレクトリ操作のAPIインターフェースがありますか。

COS自体にはフォルダやディレクトリの概念がありません。コンソールに表示されるフォルダは、実際には / で終わる空のオブジェクトです。

### APIによってディレクトリ/フォルダを作成するにはどうすればよいですか。

[PUT Object](https://intl.cloud.tencent.com/document/product/436/7749)を呼び出して行います。アップロードファイル名が「/」で終わる空ファイルにすることで、ディレクトリの形式を生成することができます。

>?COS自体にはフォルダやディレクトリの概念がありません。ユーザーの使用上の習慣に沿って、COSはコンソール、COS browserなどのグラフィックツールで「フォルダ」または「ディレクトリ」という表示方法を疑似的に再現しています。具体的には、ファイル名が「/」で終わり、内容が空のオブジェクトを作成することで、従来のフォルダを模した表示方法を実現します。

### APIを使用してディレクトリ/フォルダを削除するにはどうすればよいですか。

COS APIは単一ファイルの削除のみをサポートしています。ディレクトリ全体を削除したい場合は、[GET Bucket（List Objects）](https://intl.cloud.tencent.com/document/product/436/30614)インターフェースを使用して、プレフィックス（prefixパラメータ）を指定して全ファイルを取得してから、[DELETE Object](https://intl.cloud.tencent.com/document/product/436/7743)を使用して削除を実行する必要があります。

### COS INTELLIGENT_TIERINGストレージは、Objectのストレージレイヤーをどのように区分していますか。

[オブジェクトのメタデータの照会](https://intl.cloud.tencent.com/document/product/436/7745)インターフェースが返す**x-cos-storage-tier**によって、オブジェクトが存在するストレージレイヤーを取得します。

### COSではAPIを使用してどのようにオブジェクトの検索を行いますか。

[HEAD Objectインターフェース](https://intl.cloud.tencent.com/document/product/436/7745)を使用すると、そのオブジェクトが存在するかどうかを判断することができます。特定のオブジェクトを検索したい場合は、[Get Bucketインターフェース](https://intl.cloud.tencent.com/document/product/436/30614)でバケット内のすべてのオブジェクトを取得してから判断できます。

### COSでGET Objectインターフェースを使用する際、返される内容を添付ファイル形式でダウンロードするかどうかを動的に指定できますか。

GET Objectインターフェースを使用すると、urlに**response-content-disposition**パラメータが含まれます。添付ファイルとしてダウンロードしたい場合は指定値を**attachment**とします。このタイプのGET Objectリクエストには必ず署名が含まれなければなりません。署名はCOS署名ツールを使用して生成できます。

### COSのputObjectCopyを呼び出すと、NoSuchKeyと表示されましたが、どのように対処すればよいですか。

ソースファイルが存在するかどうかをチェックしてください。ソースファイルが存在する場合は、一般的にフォルダの後に「/」が追加されていないことがエラーの原因です。「/」を追加してから再度操作をお試しください。

### APIによって特定のobjectのrequest回数を取得することはできますか。

 COSには、特定のObjectのrequest回数取得をサポートするAPIはありませんが、ログを分析することで操作を行えます。先にこちらの[ログ管理機能の有効化](https://intl.cloud.tencent.com/document/product/436/17040)を行ってください。そうすれば、ログを分析して取得できるようになります。



