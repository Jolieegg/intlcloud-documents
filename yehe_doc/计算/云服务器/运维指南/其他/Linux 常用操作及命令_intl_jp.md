## 1. Linuxサーバーのロードアベレージとは何ですか。

Loadは、サーバーのワークロードを測定するために使用されます。つまりコンピュータのCPUタスクの実行待ちキュー長さが示されます。値が大きいほど、実行中のプロセスや、実行待ちのプロセスが多いことを示します。　　

## 2. Linuxサーバーの負荷状況を確認する方法は何ですか。

`w`、`top`、`uptime`、および`procinfo`コマンドを実行するか、`/proc/loadavg`ファイルにアクセスすることにより、負荷状況を確認することができます。
procinfoツールのインストール方法については、「Linux環境でのソフトウェアのインストール」ドキュメントをご参照ください。　　 

## 3. サーバーの負荷が高すぎる場合はどうすればよいですか。

サーバーの負荷（Load/Load Average）はプロセスキューの長さに基づいて表示されます。サーバー側の負荷が高いとき（15分平均値を参照指標とすることを推薦する）、CPUリソースの不足、I/O読み取り/書き込みのボトルネック、メモリリソースの不足、CPUが大量計算を実行していることなどの原因と考えられます。`vmstat`，`iostat`，および`top`などのコマンドを利用して高負荷の原因を特定し、大量のリソースを占有しているプロセスを確定して最適化してください。 

## 4. サーバーのメモリ使用率を確認する方法は何ですか。

`free`、`top`（実行後、shift + mを押してメモリーをソートできます）、`vmstat`、`procinfo`コマンドを実行するか、`/proc/meminfo`ファイルにアクセスすることによってサーバーのメモリー使用率を確認することができます。 

## 5. 単一プロセスのメモリ使用量を確認する方法は何ですか。

 `top -p PID`、`pmap -x PID`、および`ps aux|grep PID`コマンドを実行するか、`/proc/$process_id（プロセスのPID）/status` ファイルにアクセスすることによって確認することができます。例えば、/proc/7159/status ファイル。 

## 6. 現在使用中のサービスとポートを確認する方法は何ですか。

`netstat -tunlp`、`netstat -antup`、および`lsof -i:PORT`コマンドを実行して確認することができます。 

## 7. サーバープロセス情報を確認する方法は何ですか。

`ps auxww|grep PID`、`ps -ef`、`lsof -p PID`、`top -p PID`コマンドを実行して確認することができます。 

## 8. プロセスを停止する方法は何ですか。

`kill -9 PID`（PIDはプロセスIDを表します）、`killallプログラム名`（例： killall cron）を実行し、実行中のプロセスを停止することができます。
ゾンビプロセスを停止するには、 `kill -9 ppid`コマンドを実行して親プロセスを強制終了する必要があります（ppidは親プロセスIDを示し、`ps -o ppid PID` （たとえば、ps -o ppid 32535）コマンドを実行すると照会できます）。 

## 9. ゾンビプロセスを確認する方法は何ですか。

`top`コマンドを実行することによって、ゾンビプロセス（zombie）の総数を確認することができます。`ps -ef | grep defunct | grep -v grep`コマンドを実行することによって、特定のゾンビプロセスの情報を確認することができます。 

## 10. サーバーポートを有効できないのはなぜですか。

OSとアプリケーションをチェックして、ポートが有効になっていることを確認する必要があります。
Linux OSのポート番号が1024以下のものは、rootユーザーのみ有効できます。まず`sudo su –`コマンドを実行し、root ユーザー権限を取得してから、サービスポートを有効にします。
アプリケーションの問題について、アプリケーションの起動ログを利用して失敗原因をトラブルシューティングすることをお勧めします。例えば、ポート間の競合（ Tencentサーバーシステムはポート36000を使用）や、設定問題などになります。 

## 11. Linuxサーバーのパフォーマンスをチェックするために一般的に使用されるコマンドは何ですか。
<table class="t">
<tbody><tr>
<th width="100"><b>コマンド名</b>
</th><th> <b>説明</b>
</th></tr>
<tr>
<td>top
</td><td>topは、プロセス監視コマンドであり、システムの全体的なパフォーマンスを監視します。<br>
<p>このコマンドを使用して、システム負荷、プロセス、CPU、メモリ、ページングなどの情報を表示できます。一般的にshift + mとshift + pを利用して、メモリ使用量とCPU使用率に基づいてプロセスをソートします。
</p>
</td></tr>
<tr>
<td>vmstat
</td><td>vmstatは、システム監視コマンドであり、仮想メモリに重点を置いて、CPU、プロセス、メモリページング、及びIOの状態情報も監視できます。<br>
<p>例えば、vmstat 3 10は3秒ごとに結果を出力し、10回実行されます。
</p>
</td></tr>
<tr>
<td>iostat
</td><td>iostatコマンドは、CPU状態とIO状態を出力するツールであり、システムのIOに関する詳細情報を表示できます。<br>
<p>例えば、iostat -dxmt 10は10秒ごとにMB形式でIOに関する詳細情報を出力します。
</p>
</td></tr>
<tr>
<td>df
</td><td>dfコマンドは、システムのディスク占有率を確認するために使用されます。<br>
<p>例えば、df -mはディスク占有率をMB単位で表示します。
</p>
</td></tr>
<tr>
<td>lsof
</td><td>lsofコマンドは、システムで開かれているファイルをリストします。Linuxはファイルシステムをベースにしているため、このコマンドはシステム管理に非常に役立ちます。<br>
<p>例えば：<br>
lsof -i：36000は、ポート36000を使用するプロセスを表示します
<br>
lsof -u rootは、rootによって実行されるプログラムを表示します
<br>
lsof -c php-fpmとは、php-fpmプロセスが開かれたファイルを表示します
<br>
lsof php.iniとは、php.iniが開かれているプロセスを表示します
</p>
</td></tr>
<tr>
<td>ps
</td><td>psは、プロセスクエリコマンドであり、プロセスの詳細情報を表示できます。<br>
<p>一般的に使用されるコマンドパラメータの組み合わせは、 `ps -ef`と` ps aux`です。ps-A -oを使用して出力フィールドをカスタマイズすることをお勧めします。<br>
例えば：<br>
ps -A -o pid、stat、uname、%cpu、%mem、rss、args、lstart、etime | sort -k6,6 -rn、リストされたフィールドに従って結果を出力し、6番目のフィールドを使用してソートします。
<br>
ps -A -o comm |sort -k1 |uniq -c|sort -k1 -rn|headとは、実行中のインスタンス数が最も多いプロセスをリストします。
</p>
</td></tr></tbody></table>

その他の一般的に使用されるコマンドとファイル：`free -m`、`du`、`uptime`、`w`、`/proc/stat`、`/proc/cpuinfo`、`/proc/meminfo`。 

## 12. Cronが機能しない場合はどうすればよいですか。
トラブルシューティングの手順は下記の通り：
1. crontabが正常に実行されているかどうかを確認します。
 1. `crontab -e`コマンドを実行し、次のテストエントリを追加します。
```
 \*/1 \* \* \* \* /bin/date >> /tmp/crontest 2>&1 &
```
 2. `/ tmp / crontest`ファイルを確認します。 
問題がある場合は、`ps aux|grep cron` コマンドを使用してcronのpidを見つけて、`kill -9 PID`を使用してcronプロセスを終了してから、`/etc/init.d/cron start`コマンドを実行してcronを再起動することをお勧めします。 
2. cronエントリのスクリプトパスが絶対パスであるかどうかを確認します。
3. cronを実行するユーザーアカウントが正しいかを確認し、同時にこのアカウントが `/etc// cron.deny`に含まれているかを確認します。
4. スクリプトの実行権限、スクリプトディレクトリ、及びログファイルの権限を確認します。
5. バックグラウンドでスクリプトを実行し、スクリプトエントリの最後に「＆」を追加することをお勧めします。例えば `\*/1 \* \* \* \* /bin/date >> /tmp/crontest 2>&1 &` 。

## 13. CVMインスタンスの起動タスクを設定する方法は何ですか。

Linuxカーネルの起動シーケンスは：
1. `/ sbin / init`プロセスを起動します。
2. init初期スクリプトを順番に実行します。
3. レベルスクリプト`/etc/rc.d/rc\*.d`を実行します。\*の値は実行モードを意味し、`/etc/inittab` で確認できます。
4. `/etc/rc.d/rc.local`を実行します。

> 起動タスクを設定する必要がある場合は、`/etc/rc.d/rc\*.d`の`S\*\*rclocal`ファイルで設定することができ、または`/etc/rc.d/rc.local`で設定することもできます。 

## 14. サーバディスクが読み取り専用になるのはなぜですか。

ディスクが読み取り専用になる一般的な理由は次の通りです：
- ディスクがいっぱいです。
`df -m`コマンドを実行してディスク使用率を確認し、余分なファイルを削除してディスクキャパシティーをリリース（サードパーティ以外のファイルは削除しないことをお勧めします、削除する前にファイルを確認してください）します。 
- ディスクのinodeリソースがすべて使用されています。
`df -i`コマンドを実行することにより、関連するプロセスを確認できます。 
-  ハードウェア障害。

hostingアプリケーションが上記の方法を利用して、まだ理由を特定できない場合は、ホットラインに電話するか、チケットを送信してください。

## 15. Linuxシステムログを確認する方法は何ですか。

- システムレベルのログファイルのストレージパスは `/var/log`です。
- 一般的に使用されるシステムログは`/var/log/messages`です。

## 16. ファイルシステムで大きなファイルを検索する方法は何ですか。

以下の手順を実行して検索してください：
1. `df`コマンドを実行して、ディスクパーティションの使用状況を確認します。例えば、df -m。
2. `du`コマンドを実行して、特定のフォルダーのサイズを確認します。例えば、du -sh ./\*，du -h --max-depth=1|head -10。
3. `ls`コマンドを実行して、ファイルとファイルサイズをリストします。例えば、ls -lSh。
`find`コマンドを使用して、特定のディレクトリ配下のファイルサイズを直接確認できます、例えば、find / -type f -size +10M -exec ls -lrt {} \。

## 17. サーバーのOSバージョンを確認する方法は何ですか。

次のコマンドを実行して、OSバージョンを確認できます：
- uname -a
- cat /proc/version
- cat /etc/issue 

## 18. Linuxターミナルで中国語が文字化けするのはなぜですか。

サーバー自体は表示言語を制限しません、ターミナルソフトウェアが中国語の表示に影響する場合は、【オプション】> 【セッションオプション】>【外観】（secureCRT 設定、その他のバージョンのソフトウェアについて、Googleで解決策を検索してください）を変更してみてください。
純粋なLinux shellが文字化けする場合は、exportコマンドを使用して、LANGやLC_CTYPEなどのユーザー環境変数を確認します。

## 19. SecureCRTを利用して接続タイムアウトを設定する方法は何ですか。

SecureCRT経由でCVMに接続されている場合、以下の設定により切断されないことができます：
1. 【SecureCRT（Options）】を開きます。
2. 【Session Opetions）】を選択して、【Terminal】をクリックします。
3. 右側のアンチアイドルボックス（Anti-idle）で、【Send protocol NO-OP】をチェックし、時間を120秒ごと(every 120 seconds)に設定します。 

## 20.ファイルを削除した後、Linuxサーバーのディスク領域が解放されないのはなぜですか。

**原因：**

Linux CVMインスタンスにログインし、`rm`コマンドを実行してファイルを削除した後、` df`コマンドを実行してディスクキャパシティーを確認します。ファイルを削除しても、利用可能なディスクキャパシティーが増加していないことを発見することができます。理由としては、`rm`コマンドによってファイルが削除する時、他のプロセスがこのファイルにアクセスしているためです。従って、`df`コマンドを実行して確認しても、削除されたファイルが占有しているキャパシティーは、まだ解放されない状態になります。

**ソリューション：**

1. root権限を使用し、`lsof | grep deleted`コマンドを実行して、削除されたファイルを使用しているプロセスのPIDを確認します。
2.  `kill -9 PID`コマンドを実行して、プロセスを強制終了します。 


## 21. Linuxサーバー上のファイルを削除するにはどうすればいいですか。
`rm`コマンドを実行してファイルを削除できますが、このコマンドで削除されたファイルは復元できませんので、十分注意して使用してください。
`rm`コマンドの形式は`rm（オプション）（パラメータ）`です。
- オプション：
**-d**：削除するディレクトリに含まれているすべてのハードワイヤードデータを0になるまで削除してから、そのディレクトリを削除します。
**-f**：ファイルまたはディレクトリを強制的に削除します。
**-i**：既存のファイルまたはディレクトリを削除する前に、ユーザに確認してください。
**-r**または**-R**：指定したディレクトリ配下のすべてのファイルをサブディレクトリとともに再帰的に処理します。　
**--preserve-root**：ルートディレクトリに再帰的な操作を実装しません。
**-v**：コマンドの詳細な実行プロセスを表示します。
- パラメータ：削除するファイルまたはファイルリストを指定します。 パラメータにディレクトリが含まれている場合は、-rまたは-Rオプションを追加します。
- 例：
	- ファイル `test.txt`を削除するには、 `rm test.txt`コマンドを実行してください。
	- ディレクトリ`test`を削除するには、`rm -r test`コマンドを実行してください。
	- 現在のディレクトリ配下のすべてのファイルとサブディレクトリを削除するには、 `rm -r *`コマンドを実行します。
