このドキュメントでは、Cloud Virtual Machineがポートの問題によりリモートログインできない場合のトラブルシューディングと解決案について説明します。
>? 以下の操作では、 CentOS 7.6 システムを使用したCVMを例として説明します。
>

## 検証ツール
Tencent Cloudが提供するツールを使用して、ログインできない問題はポートとセキュリティグループの設定に関連しているかどうかを判断することができます：
-  [自己診断](https://console.cloud.tencent.com/workorder/check)
- [インスタンスポート検証ツール](https://console.cloud.tencent.com/vpc/helper)

セキュリティグループの設定の問題が検出された場合は、[インスタンスポート検証ツール](https://console.cloud.tencent.com/vpc/helper)中の【Port Verification】機能を介して、関連するポートを開放し、再度ログインを試みます。ポートを開放してもまだログインできない場合、以下の内容を参照して原因を特定します。

## トラブルシューティング
### ネットワーク接続の状態を確認する
Pingコマンドを使用して、ネットワーク接続をテストすることができます。同時に、異なるネットワーク環境（異なるIPレンジ或いはキャリア）のコンピューターでテストを行い、ローカルネットワークの問題なのか、サーバーの問題なのかを確認できます。
1.ローカルコンピューターでコマンドラインツールを開きます。
	- **Windows システム**：【スタート】>【ファイル名を指定して実行】をクリックし、「cmd」と入力すると、コマンドラインダイアログボックスが表示されます。
	- **Mac OS**：Terminalツールを開きます。
2. 以下のコマンドを実行して、ネットワーク接続をテストします。
```
ping + CVM インスタンスのパブリックIP アドレス
```
インスタンスのパブリックIPアドレスを取得する方法については、 [パブリックIPアドレスの取得](https://intl.cloud.tencent.com/document/product/213/17940) をご参照ください。たとえば、 `ping139.199.XXX.XXX`コマンドを実行します。
 - ネットワークが正常であれば、次のような結果が返されます。
![](https://mc.qcloudimg.com/static/img/9596963f31d642deb9417e0a7c0a4085/image.png)
 - 「要求がタイムアウトしました」と表示される場合、ネットワーク接続に問題があることを表しています。この場合、[インスタンスIPアドレスへの Ping の失敗](https://intl.cloud.tencent.com/document/product/213/14639)ドキュメントを参考にトラブルシューティングを行ってください。

### インスタンスポートの接続を確認する
1. VNCを使用してCVMインスタンスにログインします。詳細については、[VNCを使用してLinuxインスタンスにログイン](https://intl.cloud.tencent.com/document/product/213/32494)をご参照ください。
2. 以下のコマンドを実行し、**Enter**キーを押して、リモートポートの開放状態をテストし、ポートにアクセスできるかどうかを判断します。
```
telnet + CVM インスタンスのパブリックIP アドレス + ポート番号
```
例えば、 `telnet 119.XX.XXX.67 22`コマンドを実行して、ポート番号22への接続をテストします。
 -通常の状況：次の図に示すような情報が返され、ポート22にアクセスできます。
![](https://main.qcloudimg.com/raw/246134de6829323457dc1d51f85589b8.png)
 異常な状況：次の図に示すような情報が返され、ポート22にアクセスできないことを示します。インスタンスのファイアウォールまたはセキュリティグループがポート22を許可しているかどうかなど、問題のあるネットワークの対応する部分を確認してください。
 ![](https://main.qcloudimg.com/raw/d6eadfe7638046f0b0c1f15261ea74ab.png)
 

### sshdサービスを確認する
[SSHを使用してLinuxインスタンスにログイン](https://intl.cloud.tencent.com/document/product/213/32501)すると、「接続できない」「接続​に失敗しました」というメッセージが表示された場合、sshdポートが監視されていないか、sshdサービスが開始されていないことが原因である可能性があります。この場合、[SSH経由でLinuxインスタンスにログインできない時の解決策](https://intl.cloud.tencent.com/document/product/213/32486)ドキュメントを参考にトラブルシューティングを行ってください。
