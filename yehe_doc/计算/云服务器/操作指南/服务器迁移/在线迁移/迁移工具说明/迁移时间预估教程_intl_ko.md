
본문은 온라인 마이그레이션을 통해 자체 구축 데이터 센터(IDC) 또는 클라우드 플랫폼과 같은 소스 환경에서 원본 서버의 시스템 및 애플리케이션을 Tencent Cloud CVM으로 마이그레이션하는 데 필요한 시간을 추정하는 방법을 설명합니다.

마이그레이션 소요 시간은 주로 마이그레이션 과정의 데이터 전송 속도의 영향을 받으며, 마이그레이션 원본 호스트와 마이그레이션 타깃 리전 호스트 간의 전송 속도를 테스트하여 추정할 수 있습니다.

## 다양한 시나리오의 마이그레이션 시간 추정

### 시나리오1

마이그레이션 작업의 타깃 유형이 CVM인 경우 예상 마이그레이션 시간은 주로 실제 데이터 전송 시간입니다.

예를 들어 원본 호스트에서 마이그레이션할 모든 디스크 데이터의 실제 점유량은 50GB이고 송신 대역폭은 100Mbps일 때, 예상 총 마이그레이션 시간은 1.14시간입니다. 단계는 다음과 같습니다.

1. 단위 환산
 - 실제 광대역 속도를 MB/s로 환산합니다. 100Mbps = 100 / 8 = 12.5MB/s
 - 실제 디스크 데이터 볼륨을 MB로 환산합니다. 50GB = 50 × 1024 = 51200MB
2. 실제 데이터 마이그레이션 시간 추정
51200 / 12.5 = 4096초 = 1.14시간



### 시나리오 2

마이그레이션 작업의 타깃 유형이 CVM 이미지인 경우 마이그레이션 시간에는 주로 실제 데이터 전송 시간과 이미지 생성 시간이 포함됩니다.

예를 들어 원본 호스트에서 마이그레이션할 모든 디스크 데이터의 실제 크기는 50GB이고 송신 대역폭은 100Mbps일 때, 예상 총 마이그레이션 시간은 1.23시간입니다. 단계는 다음과 같습니다.

1. 단위 환산
 - 실제 광대역 속도를 MB/s로 환산합니다. 100Mbps = 100/8 = 12.5MB/s
 - 실제 디스크 데이터 볼륨을 MB로 환산합니다. 50GB = 50 × 1024 = 51200MB
2. 실제 데이터 마이그레이션 시간 추정
51200 / 12.5 = 4096초 = 1.14시간
3. 이미지 생성 시간, 생성 속도: 약 160MB/s
51200 / 160 = 320초 = 0.089시간
4. 총 마이그레이션 시간
1.14+0.089=1.23시간.



## 관련 작업: 데이터 전송 속도 테스트

**iperf3** 툴을 사용하여 클라이언트에서 서버로의 데이터 전송 속도 및 대역폭 테스트 등 데이터 전송 속도를 테스트할 수 있습니다.


### 전송 속도 영향 요소

- 원본 호스트의 송신 대역폭 및 타깃 인스턴스의 수신 대역폭.
예를 들어 원본 호스트의 송신 대역폭이 50Mbps이고 객체 인스턴스의 수신 대역폭이 100Mbps인 경우, 이론상 실제 전송 속도는 50Mbps 이하입니다.
- 마이그레이션이 항상 전체 대역폭을 차지하는 것은 아닙니다. 마이그레이션하는 동안 객체 인스턴스(또는 전송 인스턴스)의 네트워크 액세스 대역폭을 동적으로 조정할 수 있습니다.
- 원본 호스트와 객체 인스턴스가 다른 리전에 있는 경우 동일한 리전에 비해 전송 속도가 느립니다.

<dx-alert infotype="explain" title="">
- 온라인 콘솔 마이그레이션 중 마이그레이션 타깃이 CVM 이미지인 경우 마이그레이션 도중에 전송 인스턴스(이름: do_not_delete_csm_instance)가 생성되고 대역폭은 50Mpbs이 됩니다.
- 마이그레이션 중 콘솔에서 객체 인스턴스(또는 전송 인스턴스)의 네트워크 액세스 대역폭을 동적으로 조정하여 마이그레이션 속도를 제어할 수 있습니다.
</dx-alert>



### Tencent Cloud Linux CVM 마이그레이션 속도 테스트

예를 들어 온라인 콘솔 마이그레이션 기능을 통해 서버를 Tencent Cloud CentOS 7.5 인스턴스로 마이그레이션하는 경우, 전송 속도 테스트 단계는 다음과 같습니다.

1. 마이그레이션 타깃 리전에 종량제 CentOS 7.5 인스턴스를 생성합니다.
<dx-alert infotype="explain" title="">
- 마이그레이션 타깃이 CVM 이미지인 경우 마이그레이션 도중에 CentOS 7.5 전송 인스턴스가 생성됩니다. 속도를 테스트하려면 실제 마이그레이션 시나리오에 더 가까운 CPU 및 메모리 구성이 낮은 표준 모델을 선택하는 것이 좋습니다.
- iperf3 서버의 기본 포트는 TCP 5201입니다. 테스트 CentOS 7.5 인스턴스의 보안 그룹 인바운드에 대해 TCP 5201 포트를 추가 및 해제해야 합니다.
</dx-alert>
2. 테스트 대상 인스턴스와 원본 호스트에 각각 iperf3 툴을 설치합니다.
 - 다음 명령어를 실행하여 대상 CentOS 7.5 인스턴스에 iperf3 툴을 설치합니다.
```sh
yum -y install iperf3
```
 - 원본 호스트 호스트에 iperf3 툴을 설치합니다. 원본 호스트의 Linux 릴리스 버전에 따라 해당 설치 명령을 사용하여 iperf3 툴을 설치하십시오.
3. 다음 명령어를 실행하여 대상 CentOS 7.5 테스트 인스턴스의 iperf3를 서버로 시작합니다.
```sh
iperf3 -s
```
‘Server Listening on 5201’과 같은 정보가 반환되면 실행이 완료된 것입니다.
4. 다음 명령을 실행하여 원본 호스트에서 iperf3을 클라이언트로 시작합니다.
```sh
iperf3 -c [타깃 인스턴스 IP]
```
반환된 테스트 결과는 아래 이미지와 같으며, 원본 호스트와 테스트 CentOS 7.5 인스턴스 간의 전송 속도는 약 111Mbps임을 알 수 있습니다.
![](https://qcloudimg.tencent-cloud.cn/raw/8cda488801e4756c54ac6e7c986a7ba2.png)





