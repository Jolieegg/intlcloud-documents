## 概要
セキュリティグループは、パブリックネットワークまたはプライベートネットワークからのアクセス要求を受け入れるかどうかを管理するために使用されます。セキュリティ上の理由から、ほとんどのインバウンドトラフィックはデフォルトで拒否されます。セキュリティグループの作成際には「すべてのポートを開放」テンプレートまたは「22、80、443、3389ポートおよびICMPプロトコルを開放」テンプレートを選択した場合、選択したテンプレートのタイプに応じて、システムが一部の通信ポートにセキュリティグループのルールを自動的に追加します。詳細については、 [セキュリティグループの概要](https://intl.cloud.tencent.com/document/product/213/12452)をご参照ください。

このドキュメントでは、セキュリティグループルールを追加して、セキュリティグループ内のCVMインスタンスからパブリックネットワークまたはプライベートネットワークへのアクセスを許可または拒否する方法について説明します。

## 注意事項

- セキュリティグループルールは、IPv4およびIPv6ルールをサポートします。
- **すべてのポートを開放し**、IPv4とIPv6の両方のトラフィックが許可されます。

## 前提条件
- セキュリティグループが作成されました。具体的な操作については、[セキュリティグループの作成](https://intl.cloud.tencent.com/document/product/213/34271)をご参照ください。
- CVMインスタンスが許可または拒否する必要があるパブリックネットワークまたはプライベートネットワークへのアクセスはすでに了解します。セキュリティグループのルール設定に関する適用例の詳細については、[セキュリティグループの適用例](https://intl.cloud.tencent.com/document/product/213/32369)をご参照ください。

## 操作手順
1. [CVMコンソール](https://console.cloud.tencent.com/cvm/index)にログインします。
2. 左側のナビゲーションバーで、【[セキュリティグループ](https://console.cloud.tencent.com/cvm/securitygroup)】をクリックすると、セキュリティグループ管理ページに進みます。
3. セキュリティグループ管理ページで、【リージョン】を選択し、ルールを設定するセキュリティグループを見つけます。
4. 「操作」列の「Modify Rules」をクリックします。
5. <span id="step05">セキュリティグループルールページで、「Inbound rules」をクリックし、実際のニーズに応じて次のいずれかの方法を選択してルールを追加します。</span>
![](https://main.qcloudimg.com/raw/e4c1f93fe75de51aa8de068da60a2206.png)
>? 次の操作は方式2：「ルールの追加」を例にします。
>
 - 方式1：すべてのポートを開放します。この方法は、ICMPプロトコルルールを設定せずに、すべてのトラフィックがポート20、21、22、80、443、および3389とICMPプロトコルを通過する場合に最適です。
 - 方式2：ルールを追加します。この方法は、上記以外の複数のプロトコルとポートを使用する必要がある場合に最適です。
6. ポップアップウィンドウで、ルールを設定します。
![](https://main.qcloudimg.com/raw/0114aa46ffabc46dd9d6921095f6e8fa.png)
ルールの追加に関する主なパラメータは下記の通りです。
 - **タイプ**：デフォルトでは「カスタム」が選択されますが、「Windowsログイン」テンプレート、「Linuxログイン」テンプレート、「Ping」テンプレート、「HTTP(80)」テンプレートおよび「HTTPS(443)」テンプレートなどの他のシステムルールテンプレートを選択することもできます。
 - **ソース**：トラフィックのソース（インバウンドルール）またはターゲット（アウトバウンドルール）としては、下記選択肢のいずれかを指定してください。
<table>
	<tr><th>指定のソース/ターゲット</th><th>説明</th></tr>
	<tr><td>単一のIPv4アドレスまたはIPv4アドレス範囲</td><td>CIDR表記法を使用します（例：<code>203.0.113.0</code>、<code>203.0.113.0/24</code>または<code>0.0.0.0/0</code>。そのうち、<code>0.0.0.0/0</code>はすべてのIPv4アドレスにマッチングしていることを表します）。</td></tr>
	<tr><td>単一のIPv6アドレスまたはIPv6アドレス範囲</td><td>CIDR表記法を使用します（例：<code>FF05::B5</code>、<code>FF05:B5::/60</code>、<code>::/0</code>または<code>0::0/0</code>。そのうち、<code>::/0</code>または<code>0::0/0</code>はすべてのIPv6アドレスにマッチングしていることを表します）。</td></tr>
	<tr><td>セキュリティグループIDの引用。以下のセキュリティグループのIDを引用できます：<ul  style="margin: 0;"><li>現在のセキュリティグループ</li><li>その他のセキュリティグループ</li></ul>
</td><td><ul  style="margin: 0;"><li>現在のセキュリティグループは、CVMに関連付けられたセキュリティグループIDを表します。</li><li>その他のセキュリティグループは、同一エリア内の同一プロジェクト下の別のセキュリティグループIDを表します。</li></ul>
<blockquote class="d-mod-explain"><div class="d-mod-title d-explain-title"><i class="d-icon-explain"></i>説明：</div>
<p></p><ul>
<li>セキュリティグループのID引用は拡張機能であり、オプションとして利用することができます。引用されるセキュリティグループのルールは現在のセキュリティグループに追加されません。</li>
<li>セキュリティグループルールを設定するとき、ソース/ターゲットにセキュリティグループIDが入力されると、パブリックIPアドレスを除き、このセキュリティグループIDに関連付けられているCVMインスタンス、ENIのプライベートIPアドレスをソース/ターゲットとすることを示します。</li>
</ul>
</blockquote>
</td></tr>
	<tr><td><a href="https://intl.cloud.tencent.com/document/product/215/31867">パラメーターテンプレート</a>内のIPアドレスオブジェクトまたはIPアドレスグループオブジェクトを引用します</td><td>-</td></tr>
</table>
 - **プロトコルポート**：プロトコルタイプとポート範囲を記入します。プロトコルタイプはTCP、UDP、ICMP、ICMPv6およびGREをサポートします。また[パラメータテンプレート](https://intl.cloud.tencent.com/document/product/215/31867) のプロトコル/ポートまたはプロトコル/ポートグループを引用してもよい。プロトコルポートは次の形式をサポートします。
    - `TCP:80`のような単一ポート。
    - `TCP:80,443`のような複数のポート。
    - `TCP:3306-20000`のようなポート範囲。
    - `TCP:ALL`のようなすべてのポート。
 - **ポリシー**：デフォルトで「許可」が選択されます。
    - 許可：このポートへのトラフィックが許可されます。
    - 拒否：データパケットを直接破棄し、いかなる応答情報も戻しません。
 - **備考**：ユーザー設定が可能で、今後管理のため、ルールを簡単に記述します。
7. <span id="step07">【Complete】をクリックし、セキュリティグループのインバウンドルールの追加を完了します。</span>
8. セキュリティグループルールページで、「Outbound rule」をクリックし、[ステップ5](#step05)-[ステップ7](#step07)を参照して、セキュリティグループのアウトバウンドルールの追加を完了します。
