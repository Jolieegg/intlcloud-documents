### **개요**

인스턴스가 최대 절전 모드일 때 운영 체제는 메모리에 있는 데이터(운영 체제에서 실행 중인 다양한 응용 프로그램 및 사용 상태)를 인스턴스의 시스템 디스크에 저장합니다. 사용자가 인스턴스를 실행하면 운영 체제는 마지막으로 저장된 메모리 데이터를 읽고 최대 절전 모드 전환 이전의 CVM 인스턴스 실행 상태를 자동 복구합니다.

인스턴스가 최대 절전 모드일 때 MEM 데이터는 시스템 디스크에 유지됩니다. 다시 시작하면 유지된 MEM 데이터에 따라 응용 프로그램이 이전 상태로 자동 복구됩니다.

일정 기간 동안 인스턴스를 실행하거나 구성 변경, 시스템 재설치 등의 작업을 실행할 필요가 없는 경우, 최대 절전 모드를 권장합니다.


### **요구사항**

1. 리전: 실리콘 밸리(다른 리전은 준비 중입니다).

2. 사양: 표준 S3, MEM ＜ 150 GIB.

3. 이미지: Ubuntu20 또는 CentOS 8.x 사용자 정의 이미지.

4. 시스템 디스크: 클라우드 디스크.

5. 최대 절전 모드 agent: 설치 완료.

### **주의 사항**

1. 인스턴스 생성 프로세스에서 최대 절전 모드 기능을 선택한 경우 비활성화할 수 없습니다.

2. 생성 과정에서 최대 절전 모드 기능을 선택하지 않으면 나중에 인스턴스를 최대 절전 모드로 전환할 수 없습니다.

3. 최대 절전 모드 중 요금 없음 및 인스턴스를 유지하고 계속 청구는 종량제 인스턴스에서만 사용할 수 있습니다.

4. 최대 절전 기능을 선택한 경우 다음 작업은 지원되지 않습니다.

  - 구성 조정
    
  - 시스템 재설치
    
  - 스냅샷 생성
    
  - 디스크 미디어 조정
    
  - 사용자 정의 이미지 생성
    

5. 오토 스케일링 그룹에 추가된 인스턴스는 최대 절전 모드를 사용할 수 없습니다.

>!
>1. 인스턴스에서 최대 절전 모드를 활성화하면 최대 절전 모드 동안 인스턴스에 요금이 부과됩니다.
>2. 최대 절전 모드 전환 실패 시 인스턴스 상태는 자동으로 ‘실행 중’으로 변경됩니다.


### **작업 단계**

1. 인스턴스 생성 과정에서 최대 절전 모드를 선택합니다.

인스턴스를 최대 절전 모드로 전환하려면 생성 프로세스에서 최대 절전 모드를 선택해야 합니다.

2. 최대 절전 모드 agent를 설치합니다

  - cvm 인스턴스에 로그인합니다

  - agent 스크립트 다운로드: wget https://store-1252113659.cos.na-siliconvalley.myqcloud.com/suspend.py 

  - agent 설치:   

    - centos 인스턴스의 경우: python3 suspend.py

    - ubuntu 인스턴스의 경우: sudo python3 suspend.py


3. 인스턴스를 최대 절전 모드로 전환합니다.

실행 중인 CVM 인스턴스는 인스턴스 최대 절전 모드를 활성화하고 최대 절전 모드 agent를 설치한 경우 최대 절전 모드로 전환될 수 있습니다.

  - CVM 콘솔에 로그인합니다. 왼쪽 사이드바에서 인스턴스를 클릭합니다. 원하는 인스턴스를 선택합니다. 오른쪽에서 추가 작업-인스턴스 설정-최대 절전 모드를 클릭합니다.

  - 종량제 인스턴스는 최대 절전 모드 중 미과금과 인스턴스 유지 및 계속 과금을 선택할 수 있습니다. 스팟 인스턴스는 최대 절전 모드 중 계속 과금만 지원됩니다.

  - 확인을 클릭합니다. 인스턴스가 stopped 상태가 됩니다. 시작을 클릭하여 다시 시작할 수 있습니다.