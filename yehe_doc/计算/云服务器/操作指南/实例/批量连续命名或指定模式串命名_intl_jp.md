## 概要

複数のインスタンスを作成する過程で、インスタンス名/ホスト名をある程度規則的にしたい場合に、一括作成時のインスタンス拡張子数字の自動昇順機能や、パターン文字列を指定する機能を提供しており、購入画面とTencent Cloud APIという2つの方法から実装することができます。

- n個のインスタンスを購入する必要があり、「CVM+シーケンス番号」のようなインスタンス名/ホスト名（インスタンスCVM1、CVM2、CVM3など）を発行したい場合、[拡張子数字の自動昇順](#AutoAscending)を使用すれば実装できます。
- n個のインスタンスを作成し、インスタンス名/ホスト名にシーケンス番号を付け、シーケンス番号をxからインクリメントするよう指定する必要がある場合は、[単一パターン文字列の指定](#SpecifySingleString)で実装できます。
- 複数のプレフィックスを持つn個のインスタンス名/ホスト名を作成し、それぞれのプレフィックスでシーケンス番号を指定したい場合は、[単一パターン文字列の指定](#SpecifySingleString)で実装できます。

## 適用範囲

このドキュメントは、**インスタンス名の設定**と**ホスト名の設定**に適用されます。

## 操作手順

<dx-alert infotype="explain" title="">
以下の操作手順は、インスタンス名を設定する例です。ホスト名を設定する手順は、設定する名前のタイプによって若干異なります。
</dx-alert>



### 拡張子数字の自動昇順[](id:AutoAscending)

この機能を使用すると、一括購入したインスタンスに同じプレフィックスと番号がインクリメントされるインスタンス名に設定できます。
<dx-alert infotype="notice" title="">
作成に成功したインスタンスのデフォルトのシーケンス番号は1からインクリメントされ、開始のシーケンス番号を指定することはできません。
</dx-alert>
以下の操作は3つのインスタンスを購入し、これらのインスタンスに「CVM +シーケンス番号」の形式で名前を付けることを想定しています。（すなわちインスタンスの名称は CVM1、CVM2 和 CVM3となる）

<dx-tabs>
::: 購入ページの操作
1.  [インスタンスの作成](https://intl.cloud.tencent.com/document/product/213/4855) を参照して、3つのインスタンスを購入し、「ネットワークとホストの設定」の中で**「プレフィックス+シーケンス番号」**の命名規則でインスタンスの名称を記入し、すなわちインスタンス名称を `CVM`と記入します。下図に示す通り：
![](https://main.qcloudimg.com/raw/820a52077080be5da4c1fb4715452e6b.png)
2. ページの指示に従い、支払いを完了します。
:::
### API\sの操作
Tencent Cloud API[RunInstances](https://intl.cloud.tencent.com/zh/document/product/213/33237)で、該当するフィールドを設定します。
- インスタンス名：InstanceNameフィールドに`CVM`を指定します。
- ホスト名：HostNameフィールドに`CVM`を指定します。
:::
</dx-tabs>


### パターン文字列の指定[](id:SpecifyStrings)

この機能を使用すると、一括購入したインスタンスは、指定したシリアル番号を持つ複雑な形式で名前を付けることができます。必要に応じて、インスタンス名に1つ以上のパターン文字列を使用して設定できます。

パターン文字列が指定されたインスタンス名は：**{R:x}**の形式で、x で生成したインスタンス名の開始番号を示します。


#### 単一パターン文字列の指定[](id:SpecifySingleString)

以下の操作では3つのインスタンスを作成し、3から始まる昇順の番号を付けたいと想定しています。

<dx-tabs>
::: 購入ページの操作
1.  [インスタンスの作成](https://intl.cloud.tencent.com/document/product/213/4855) を参照してインスタンスを購入し、「ネットワークとホストの設定」の中で**「プレフィックス+パターン文字列の指定{R:x}」**という命名規則でインスタンスの名称を記入し、すなわちインスタンス名称を `CVM{R:x}`と記入します。下図に示す通り：
![](https://main.qcloudimg.com/raw/4e09732d612222f619cf7a1e8da1ee06.png)
2. ページの指示に従い、支払いを完了します。
:::
### API\sの操作
Tencent Cloud API[RunInstances](https://intl.cloud.tencent.com/zh/document/product/213/33237)で、該当するフィールドを設定します。
- インスタンス名：InstanceNameフィールドに`CVM`{R:3}`を指定します。
- ホスト名：HostNameフィールドに`CVM`を指定します{R:3}`。
:::
</dx-tabs>


#### 複数のパターン文字列の指定[](id:SpecifyMultipleStrings)

以下の操作例は、3つのインスタンスを作成し、インスタンス名称に cvm、 Big 、 test プレフィックスを含み、かつ cvm と Big プレフィックスの後にはシーケンス番号を付け、シーケンス番号はそれぞれ13と2からインクリメントします（すなわちインスタンス名称は cvm13-Big2-test、cvm14-Big3-test、cvm15-Big4-testとなる）。

<dx-tabs>
::: 購入ページの操作
1.  [インスタンスの作成](https://intl.cloud.tencent.com/document/product/213/4855) を参照して3つのインスタンスを購入します。「ネットワークとホストの設定」ページで**「プレフィックス+パターン文字列の指定{R:x}-プレフィックス+パターン文字列の指定{R:x}-プレフィックス」**という命名規則でインスタンス名を記入し、すなわちインスタンス名を `cvm{R:13}-Big{R:2}-test` と記入します。下図に示す通り：
![](https://main.qcloudimg.com/raw/1042e86262bc7ce3939f1842a8025c23.png)
2. ページの指示に従い、支払いを完了します。

:::
### API\sの操作
Tencent Cloud API[RunInstances](https://intl.cloud.tencent.com/zh/document/product/213/33237)で、該当するフィールドを設定します。
- インスタンス名：InstanceNameフィールドに`cvm{R:13}-Big{R:2}-test`を指定します。
- ホスト名：InstanceNameフィールドに`cvm{R:13}-Big{R:2}-test`を指定します。
:::
</dx-tabs>


## 検証機能
[拡張子数字の自動昇順](#AutoAscending)または[パターン文字列の指定](#SpecifyStrings)でインスタンスの一括作成を実装したら、以下の操作によって検証することができます。

### 設定したインスタンス名の検証
[CVMコンソール](https://console.cloud.tencent.com/cvm/index)にログインし、新規作成したインスタンスを確認すると、下図のように、一括購入したインスタンスが設定したルールに従って命名されていることが確認できます。
![](https://main.qcloudimg.com/raw/a3c5e58daf07381ffde5abc019edad33.png)

### 設定したホスト名の検証
1. [](id:hostname_step01)Cloud Virtual Machineのインスタンスを再起動し、ログインします。
2. インスタンスのOSの種類により、異なる操作手順を選択します。
<dx-tabs>
::: Linux\sインスタンス
OSのインターフェースで以下のコマンドを実行します。
```
hostname
```
:::
::: Windows\sインスタンス
CMDコマンドラインツールを開き、以下のコマンドを実行します。
```
hostname
```
:::
</dx-tabs>
3. [](id:hostname_step03)`hostname`コマンドで返された結果を確認します。
以下のような結果が返ってくれば、設定は成功しています。
```
cvm13-Big2-test
```
4. [ステップ1](#hostname_step01) - [ステップ3](#hostname_step03)を繰り返し、他の一括購入インスタンスを順に検証します。



