## スポットインスタンスとは
スポットインスタンス（Spot）はCloud Virtual Machine（CVM）の課金モデルの1つです。その最も重要な特徴は、ディスカウント販売とシステム中断メカニズムです。具体的には、一定の値引きでインスタンスを購入できますが、それに対して、システムは自動的にディスカウント販売されたインスタンスを回収する可能性があります。スポットインスタンスを購入した場合、その利用（コンソール操作、リモートログイン、サービスデプロイ、VPCの関連付けなどを含む）は、従量課金のCVMインスタンスとほぼ同じです。

- 関連リンク：[FAQ > インスタンスについて > スポットインスタンス](https://intl.cloud.tencent.com/document/product/213/17817)
- 関連リンク：[スポットインスタンスの購入方法](https://intl.cloud.tencent.com/document/product/213/17926)

## 現段階の特殊ポリシー
- **在庫不足によるシステムの中断**：現段階では、システムは市場価格により中断しませんが、スポットインスタンスリソースプールの在庫不足により中断することがあります。在庫不足の場合は、システムは割り当てたスポットインスタンスからランダムに回収します。この場合、インスタンスデータが保持されません。
- **全リージョンでのリリース**：スポットインスタンスはほぼすべてのTencent Cloudリージョンでリリースされています。スポットインスタンスでサポートされるインスタンスタイプは、従量課金インスタンスでサポートされるインスタンスタイプと同じです。サポートしている最新のリージョンとインスタンスタイプについては、[スポットインスタンス - スポットインスタンス対応のリージョンとタイプ](https://intl.cloud.tencent.com/document/product/213/17817#.E5.BD.93.E5.89.8D.E7.AB.9E.E4.BB.B7.E5.AE.9E.E4.BE.8B.E6.94.AF.E6.8C.81.E5.93.AA.E4.BA.9B.E5.9C.B0.E5.9F.9F.E5.92.8C.E5.AE.9E.E4.BE.8B.E7.B1.BB.E5.9E.8B.E5.8F.8A.E8.A7.84.E6.A0.BC.EF.BC.9F)をご参照ください。

## 製品の特徴
### I. 高いコストパフォーマンス
![](https://staticintl.cloudcachetci.com/yehe/backend-news/deXI473_%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20230228152244.png)
スポットインスタンスは、従量課金のインスタンスの割引価格で販売されており、最大95%オフです。

- **割引の幅**：スポットインスタンスは、同じ仕様の従量課金インスタンスに比べ、最大95%オフのお得な価格で購入できます。
- **割引対象**：割引対象はCVMのCPUとメモリのみです。システムディスク、データ ディスク、帯域幅、有料イメージなど、その他のCVMに関する課金項目は割引対象外とします。
- **価格変動**：一定期間内にこの割引は変わりませんが、アベイラビリティゾーンで大量購入があった場合、価格が変わる可能性があります。

### II. システム中断メカニズム
![](https://staticintl.cloudcachetci.com/yehe/backend-news/NZz9875_%E4%BC%81%E4%B8%9A%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20230228152302.png)
ユーザーのみがリリースできる従量課金制インスタンスとは異なり、スポットインスタンスは、システムによって中断される場合があります。システムは現在の価格とリソースプール等の総合的な状況に基づいて、割り当てられたスポット インスタンスを中断するかどうかを決定します。 

**在庫不足によるシステムの中断**：現段階では、システムは市場価格により中断しませんが、スポットインスタンスリソースプールの在庫不足により中断することがあります。在庫不足の場合は、システムは割り当てたスポットインスタンスからランダムに回収します。この場合、インスタンスデータが保持されません。

## 適用しない運用シーン
スポットインスタンスは中断される可能性があるため、ユーザーはスポットインスタンスのライフサイクルを完全に把握できません。そのため、スポットインスタンスで高い安定性が要求されるサービスを実行しないことをお勧めします。例えば以下になります。
- データベースサービス
- ロードバランサーを使用しないオンライン サービスと Webサイト サービス
- 分散式アーキテクチャの中核であるマスターコントロールノード
- 長時間（10時間以上）のビッグデータコンピューティング作業

## 適用できる運用シーンと業界
### 運用シーン
- ビッグデータコンピューティング
- ロード バランサーを使用したオンライン サービスと Web サイト サービス
- ネットワーククローラーサービス
- 細かい粒度コンピューティングシナリオ、またはチェックポイントからの再起動をサポートするコンピューティングシナリオ

### 業界
- 遺伝子配列解析及び分析
- 薬物結晶分析
- ビデオのトランスコーディング、ビデオレンダリング
- 金融、取引データの分析
- 画像及びマルチメディアの処理
- 科学技術コンピューティング（地理、流体力学等）

## 制限
- **クォータ制限**：CVMの台数制限とは違い、スポットインスタンスはユーザーのアベイラビリティゾーンにおけるスポットインスタンスのvCPUコアの総数をクォータ制限の指標としています。現段階では、各アカウントはアベイラビリティゾーンごとに最大vCPUコアの総数が50個であるスポットインスタンスを持つことが可能です（クォータを拡張するには、[チケット](https://console.tencentcloud.com/workorder/category)で申請してください）。
- **購入制限**：スポットインスタンスの購入には、[クーポン券](https://www.tencentcloud.com/zh/document/product/555/7428)を使用できません。
- **操作制限1**：スポットインスタンスは設定のアップグレード・ダウングレードをサポートしません。
- **操作制限3**：スポットインスタンスはシャットダウン時無料をサポートしません。
- **操作制限4**：スポットインスタンスはシステムの再インストールをサポートしません。
- **操作制限5**：スポットインスタンスはシステムディスクとデータディスクの容量拡張をサポートしません。

## ベストプラクティス
### I. タスク粒度の切り分け
-  大きなタスクを小タスクに分割して、中断の可能性を低くします。
-  EMRのような切り分け思惟を持つビッグデータキットを利用します。

### II. ロードバランサーによるオンラインとWebサービス安定性の確保
- アクセス レイヤーでは、CLB などのロードバランサーを使用します。
- バックエンドリソースは一部の従量課金インスタンス + 大量のスポットインスタンスの組合せを使います。
- スポットインスタンスの中断状況をモニタリングし、 間もなく中断されるインスタンスをCLBから削除します。

### III. チェックポイントからの再起動をサポートするコンピューティングスケジューリングモードの使用
- コンピューティングの中間結果をCOS/CFS/NASなどの永続ストレージサービスに保存します。
- インスタンスメタデータにより間もなく中断されるインスタンスを監視し、2分間の保留期間以内にコンピューティング結果を保存します。
- スポットインスタンスが再起動すると、前回のコンピューティングを続けます。
