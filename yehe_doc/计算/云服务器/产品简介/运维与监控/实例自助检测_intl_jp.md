## 概要
インスタンスセルフチェックは、Cloud Virtual Machine（CVM）インスタンスのパフォーマンス、費用、ネットワーク、ディスクなどの状態を検出できます。インスタンスの実行状態を理解するのに役立ちます。この機能を使用して、インスタンス関連の問題をタイムリーに検出して解決できます。

## ユースケース
次の2つのシナリオでは、インスタンスのセルフチェックをお勧めします。
- トラブルシューティング：インスタンスの操作中に障害または問題が発生した場合は、インスタンスのセルフチェックを使用して問題のトラブルシューティングと特定を行い、対応する提案に従って異常を処理できます。
- インスタンスの全面的なチェック：日常のメンテナンスプロセスでは、インスタンスのセルフチェックを使用して、インスタンスの全体的な実行状態を把握し、問題をタイムリーに検出して解決し、サービスの正常な運用を保証できます。

## チェックアイテムの説明
インスタンスのセルフチェックアイテムについて、以下の通り説明します：

<dx-accordion>
::: ローカルネットワークチェック
<table>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
<tr>
<td>ネットワークディレー</td>
<td>HTTPリクエストを送信して、インスタンスのネットワークディレーが高すぎるかどうかを検出します。標準は以下の通りです：
<ul style="margin-bottom:0px">
<li>600ms以上の場合、ネットワーク不良と判断します</li>
<li>5秒を超えて応答がない場合、リクエストはタイムアウトしたと見なされます</li>
<li>すべてのリクエストがタイムアウトした場合、ネットワーク障害と判断します</li>
</ul>
</td>
<td>異常</td>
<td rowspan=4>ローカルネットワークの問題を確認し、特定の問題を修正してください。</td>
</tr>
<tr>
<td>ネットワークジッター</td>
<td>隣接するリクエスト間の遅延値の差を取得します。その平均値はネットワークジッター値です。ネットワークジッター値/ネットワーク遅延値が0.15以下の場合、ネットワークは安定することを示します。0.15より大きい場合、ネットワークジッターを示します。
</td>
<td>-</td>
</tr>
<tr>
<td>アップリンク帯域幅</td>
<td>データパッケージをインスタンスにアップロードして、インスタンスのアップリンク帯域幅を計算します</td>
<td>-</td>
</tr>
<tr>
<td>ダウンリンク帯域幅</td>
<td>インスタンスからデータパッケージをダウンロードして、インスタンスのダウンリンク帯域幅を計算します</td>
<td>-</td>
</tr>
</table>
:::
::: セキュリティグループルールのチェック
<table>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
<tr>
<td>セキュリティグループルールが共通ポートを許可するか</td>
<td>インバウンド方向のTCPプロトコルの22、3389などの共通ポートのリクエストが禁止されているのはセキュリティグループにより起こされるか。</td>
<td>警告</td>
<td>インスタンスのセキュリティグループのインバウンド（Ingress）ルールのTCPプロトコルのポート22のリクエストは禁止されるため、SSHログインに失敗する可能性があります。必要なポートをオープンできます。詳細については、<a href="https://intl.cloud.tencent.com/document/product/213/32369">セキュリティグループの適用例</a>をご参照ください。</td>
</tr>
</table>
:::
::: アカウント料金のチェック
<table>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
<tr>
<td rowspan=4>
Cloud Block Storage（CBS）の有効期限が切れているかどうか、インスタンスとCBSの有効期限が同じであるかどうか
<td>インスタンスにバインディングされたCBSの有効期限が切れているかどうか、CBSの読み取りまたは書き込みができないかどうか</td>
<td>異常</td>
<td>インスタンスのCBSの有効期限が切れています。<a href="https://console.cloud.tencent.com/cvm/cbs">CBSコンソール</a>へ進んで、できるだけ早く更新してください。</td>
</tr>
<tr>
<td>CBSの有効期限が切れているため、従量課金制インスタンスのCBSを使用できなくなるかどうか</td>
<td>警告</td>
<td rowspan=2>インスタンスのCBSは自動更新に設定されていない場合、CBSが期限切れになって使用できなくなる可能性があります。<a href="https://console.cloud.tencent.com/cvm/cbs">CBSコンソール</a>へ進んで、CBSの自動更新を設定することをお勧めします。</td>
</tr>
</table>

:::
::: インスタンスストレージのチェック
<table>
<tr>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
</tr>
<tr>
<td>CBSの遅延が長いかどうか</td>
<td>IOパフォーマンスsvctm指標は異常であるかどうか</td>
<td>警告</td>
<td>インスタンスのCBSには遅延が長いという問題があります。CBSの使用方法に注意することをお勧めします。</td>
</tr>
<tr>
<td>CBSにIO HANGの問題があるかどうか</td>
<td>CBSにIO HANGの問題があるかどうか</td>
<td>警告</td>
<td>インスタンスのCBSにIO HANGの問題があります。CBSの使用方法に注意することをお勧めします。</td>
</tr>
<tr>
<td>システムディスクのinode使用率</td>
<td>CBSのinode使用率が100%に達するかどうか</td>
<td>警告</td>
<td rowspan=4>CBSの使用方法に注意してください。トラブルシューティングについては、<a href="https://intl.cloud.tencent.com/document/product/213/41974">カーネルおよびIO関連問題</a>をご参照ください。
</td>
</tr>
<tr>
<td>システムディスクが読み取り専用であるかどうか</td>
<td>CBSが現在、読み取り専用であるかどうか</td>
<td>異常</td>
</tr>
<tr>
<td>システムディスクのキャパシティー使用率</td>
<td>CBSのディスク使用率が100%に達するかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>合計時間に対するディスクパーティションのIO操作時間の割合</td>
<td>CBSのio_utilが100%に達するかどうか</td>
<td>警告</td>
</tr>
</table>
:::
::: インスタンス状態のチェック
<table>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
<tr>
<td>インスタンスの電源がオフになっているかどうか</td>
<td>現在、インスタンスの電源がオフになっているかどうか</td>
<td>警告</td>
<td>インスタンスの電源がオフになっています。<a href="https://console.cloud.tencent.com/cvm/index">CVMコンソール</a>へ進んで、電源をオンにすることができます。</td>
</tr>
<tr>
<td>インスタンスがリスタートされるかどうか</td>
<td>インスタンスが過去12時間以内にリスタートされたかどうか</td>
<td>警告</td>
<td>インスタンスは過去12時間以内にリスタートされました。インスタンスの実行状態に注意してください。</td>
</tr>
<tr>
<td rowspan=3>インスタンスカーネルのクラッシュ</td>
<td>インスタンスは過去12時間以内にhungtaskが発生したかどうか</td>
<td>異常</td>
<td rowspan=3>インスタンスは過去12時間以内にhungTask/panic/ソフトデッドロックが発生しました。インスタンスの実行状態に注意してください。トラブルシューティングについては、<a href="https://intl.cloud.tencent.com/document/product/213/41974">カーネルおよびIO関連問題</a>をご参照ください。</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にpanicが発生したかどうか</td>
<td>異常</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にソフトデッドロックが発生したかどうか</td>
<td>異常</td>
</tr>
</table>
:::
::: インスタンスパフォーマンスのチェック
<table>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
<tr>
<td>CPU使用率</td>
<td>インスタンスは過去12時間以内にCPU負荷が高すぎるかどうか</td>
<td>警告</td>
<td rowspan=3>
サービスのボトルネックにならないように、CPU使用率を確認し、設定をタイムリーに調整することをお勧めします。トラブルシューティングについては、インスタンスのOSに対応して、次のドキュメントをご参照ください。
<ul style="margin:0">
<li>Windows インスタンス：<a href="https://intl.cloud.tencent.com/document/product/213/32405">CPUまたはメモリの占用率が高いため、ロクインできません</a></li>
<li>Linuxの場合、<a href="https://intl.cloud.tencent.com/document/product/213/32387">CPUまたはメモリの占用率が高いため、ログインできません</a></li>
</ul>
</td>
</tr>
<tr>
<td>メモリ使用量</td>
<td>インスタンスは過去12時間以内にメモリ負荷が高すぎるかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>基本CPU使用率</td>
<td>インスタンスは過去12時間以内にCPU負荷が高すぎるかどうか</td>
<td>警告</td>
</tr>
</table>
:::
::: インスタンスネットワークチェック
<table>
<tr><th style="
    width: 18%;
">チェックアイテム</th><th style=」
    width: 35%;
「>チェック説明</th><th style=」
    width: 8%;
">リスク<br>レベル</th><th style="
    width: 39%;
">ソリューション</th></tr>
<tr>
<td>パブリックネットワークIPが滞納して機能していないかどうか</td>
<td>パブリックネットワークIPが滞納して分離されているかどうか</td>
<td>異常</td>
<td>パブリックネットワークIPは、滞納により外部のネットワークと通信できない場合があります。<a href="https://console.cloud.tencent.com/expense/recharge">料金センター</a>に行って、できるだけ早くアカウントを請求・更新することをお勧めします。</td>
</tr>
<tr>
<td>パブリックネットワークIPがあるかどうか</td>
<td>インスタンスにはパブリックネットワークIPがあるかどうか</td>
<td>警告</td>
<td>インスタンスにはパブリックネットワークIPがありません。パブリックネットワークIPを使用して、パブリックネットワークにアクセスする必要がある場合、<a href="https://console.cloud.tencent.com/cvm/eip">ElasticパブリックネットワークIPコンソール</a>へ進んで、EIPをバインディングできます。</td>
</tr>
<tr>
<td>パブリックネットワークIPがDDOSによってブロックされているかどうか</td>
<td>パブリックネットワークIPがDDOSによってブロックされているかどうか</td>
<td>異常</td>
<td>インスタンスのパブリックネットワークIPがDDOS攻撃によりブロックされている。</td>
</tr>
<tr>
<td rowspan=2>パブリックネットワーク帯域幅の使用率</td>
<td>インスタンスは過去12時間以内にパブリックネットワークのインバウンド帯域幅が高すぎるかどうか</td>
<td>警告</td>
<td rowspan=4>サービスのボトルネックにならないように、ネットワークの使用状況を確認することをお勧めします。トラブルシューティングについては、<a href="https://intl.cloud.tencent.com/document/product/213/32542">帯域幅の使用率が高いため、ログインできない</a>をご参照ください。</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にパブリックネットワークのアウトバウンド帯域幅が高すぎるかどうか</td>
<td>警告</td>
</tr>
<tr>
<td rowspan=2>プライベートネットワーク帯域幅の使用率</td>
<td>インスタンスは過去12時間以内にプライベートネットワークのインバウンド帯域幅が高すぎるかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にプライベートネットワークのアウトバウンド帯域幅が高すぎるかどうか</td>
<td>警告</td>
</tr>
<tr>
<td rowspan=3>パケットロス</td>
<td>インスタンスは過去12時間以内にレート制限をトリガーして、TCPパケットロスを引き起こしたかどうか</td>
<td>警告</td>
<td rowspan=8>サービスのボトルネックにならないように、サービスの状態を確認することをお勧めします。詳細については、<a href="https://intl.cloud.tencent.com/document/product/213/41952">CVMネットワークアクセスパケットロス</a>をご参照ください。</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にレート制限をトリガーして、UDPパケットロスを引き起こしたかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にソフト割り込みをトリガーして、パケットロスを引き起こしたかどうか</td>
<td>警告</td>
</tr>
<tr>
<td rowspan=4>カーネルネットワーク状態</td>
<td>インスタンスは過去12時間にUDP送信バッファがいっぱいになったかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスは過去12時間にUDP受信バッファがいっぱいになったかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にTCPフル接続キューがいっぱいになったかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>インスタンスは過去12時間以内にTCPリクエストのオーバーフローが発生したかどうか</td>
<td>警告</td>
</tr>
<tr>
<td>接続数の使用状況</td>
<td>インスタンスは過去12時間以内に接続の上限に達したかどうか</td>
<td>警告</td>
</tr>
</table>

:::
</dx-accordion>




## 関連する操作
[インスタンスセルフチェックの使用](https://intl.cloud.tencent.com/document/product/213/45275)を参照して、インスタンスチェック結果報告を生成するか、または過去のチェック報告を確認できます。

