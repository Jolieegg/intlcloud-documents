
ここではCloud Virtual Machine（CVM）がCloud Object Storage（COS）にアクセスする際に使用するアクセス方法および、プライベートネットワークアクセスの判定方法についてご紹介し、接続性テストのサンプルもご提供します。こちらを参照することで、CVMのCOSへのアクセスに関する情報についてさらに理解を深めることができます。

## アクセス方法
Tencent Cloud内でCOSへのアクセス用のサービスを展開している場合、リージョンごとのアクセス方法には次のような違いがあります。
- **同一リージョン内のアクセス**：同一リージョンの範囲内でのアクセスに対しては自動的にプライベートネットワークアドレスに転送されます。つまり、プライベートネットワーク接続は自動的に使用され、それによるプライベートネットワークトラフィックには料金が発生しません。このため、コストを節約するために、別のTencent Cloud 製品を購入する場合は同じリージョンを選択することをお勧めします。
- **クロスリージョンアクセス**：現在、クロスリージョンリクエストはプライベートネットワークアクセスをサポートしておらず、デフォルトではパブリックネットワークアドレスに解決されます。

## プライベートネットワークアクセスの判定方法
この手順によって、CVMがプライベートネットワーク経由でCOSにアクセスするかどうかをテストすることができます。
CVM上で  `nslookup` コマンドを使用してCOSドメイン名を解決します。プライベートネットワークIPが返された場合は、CVM がプライベートネットワーク経由でCOS にアクセスすることを示します。そうでない場合はパブリックネットワーク経由でのアクセスです。
1.  [バケットの概要](https://intl.cloud.tencent.com/document/product/436/38493)の説明に従ってバケットのアクセスドメインを取得して記録します。
2. インスタンスにログインし、nslookupコマンドを実行します。 `examplebucket-1250000000.cos.ap-guangzhou.myqcloud.com`が宛先バケットのアドレスであると仮定して、次のコマンドを実行します。
```
nslookup examplebucket-1250000000.cos.ap-guangzhou.myqcloud.com
```

コマンド出力の`10.148.214.13`および`10.148.214.14`の IP は、COS へのアクセスがプライベートネットワーク経由であることを示しています。
<dx-alert infotype="explain" title="">
プライベートIPアドレスの一般的な形式は`10.*.*.*`、`100.*.*.*` であり、VPC IP アドレスは一般的に`169.254.*.*` などです。これらの形式のIPはすべてプライベートネットワークに該当します。
</dx-alert>
<img src="https://main.qcloudimg.com/raw/49a7d7429ec2a96d271f6a63926286ea.png"/>

## 接続性のテスト
パブリックネットワークからのCOSアクセス、同一リージョンのCVM（クラシックネットワーク）からのCOSアクセス、同一リージョンのCVM（VPCネットワーク）からのCOSアクセスのサンプルをご提供します。詳細については、 [接続性のテスト](https://intl.cloud.tencent.com/document/product/436/30613)をご参照ください。


## 関連する操作
- [COSをローカルドライブとしてWindowsサーバーにマウントする](https://intl.cloud.tencent.com/document/product/436/40490)
- [WordPressリモート添付ファイルのCOS への保存](https://intl.cloud.tencent.com/document/product/436/34082)