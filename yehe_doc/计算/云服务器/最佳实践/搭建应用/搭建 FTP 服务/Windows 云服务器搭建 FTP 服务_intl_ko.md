## 작업 시나리오
본 문서는 Windows 운영 체제의 Tencent Cloud CVM에서 IIS를 통해 FTP 사이트를 구축하는 방법을 소개합니다.

## 소프트웨어 버전 예시
본 문서에 나오는 FTP 서비스 구성 버전은 다음과 같습니다.
 - Windows 운영 체제의 경우, 본 문서는 Windows Server 2012를 예시로 사용합니다.
 - IIS: Web 서버입니다. 본 문서는 IIS 8.5를 예시로 사용합니다.

## 작업 순서
### 1단계: CVM 로그인
- [RDP 파일을 사용하여 Windows 인스턴스에 로그인(권장)](https://intl.cloud.tencent.com/document/product/213/5435)합니다.
실제 작업 스타일에 따라 [원격 데스크톱을 사용하여 Windows 인스턴스 로그인](https://intl.cloud.tencent.com/document/product/213/32498)할 수 있습니다.

### 2단계: IIS에서 FTP 서비스 설치
1. 운영 체제 인터페이스에서 <img src="https://main.qcloudimg.com/raw/446c1e8cb7da2ce280d710c6a46b693d.png" style="margin:-3px 0px">를 클릭하여 서버 관리자를 엽니다.
2. 다음 이미지와 같이 '서버 관리자' 창에서 [역할 및 기능 추가]를 클릭합니다.
![](https://main.qcloudimg.com/raw/1d941b3c877a420513e494971a834f37.png)
3. '역할 및 기능 추가 마법사' 팝업 창에서 [다음 단계]를 클릭하여 '설치 유형 선택' 인터페이스로 이동합니다.
4. '설치 유형 선택' 인터페이스에서 [역할 또는 기능에 기반한 설치]를 선택하고 [다음 단계]를 클릭합니다.
5. 다음 이미지와 같이 '타깃 서버 선택' 인터페이스에서 기본 설정을 유지하고 [다음 단계]를 클릭합니다.
![](https://main.qcloudimg.com/raw/41f775ccbcd8e984b72bc096efa668d4.png)
6. 다음 이미지와 같이 '서버 역할 선택' 인터페이스에서 [Web 서버(IIS)]를 선택하고 팝업 창에서 [기능 추가]를 클릭합니다.
![](https://main.qcloudimg.com/raw/f23fe1b8415c0f75c54309b652781aa4.png)
7. [다음 단계]를 3번 연속 클릭한 후, '역할 서비스 선택' 인터페이스로 이동합니다.
8. 다음 이미지와 같이 '역할 서비스 선택' 인터페이스에서 [FTP 서비스] 및 [FTP 확장]을 선택하고 [다음 단계]를 클릭합니다.
![](https://main.qcloudimg.com/raw/1fa84c69d96c16f2ea0f10e51b0607bb.png)
9. [설치]를 클릭하여 FTP 서비스 설치를 시작합니다.
10. 설치 완료 후 [종료]를 클릭합니다.

<span id="user"></span>

### 3단계: FTP 사용자 이름 및 비밀번호 생성

>?다음 순서에 따라 FTP 사용자 이름 및 비밀번호를 설정하십시오. 익명 사용자로 FTP 서비스에 액세스하려면 이 단계를 건너뛰세요.
>
1. '서버 관리자' 창에서 오른쪽 상단 메뉴의 [툴]>[컴퓨터 관리]를 선택하여 컴퓨터 관리 창을 엽니다.
2. '컴퓨터 관리' 인터페이스에서 왼쪽 메뉴의 [시스템 툴]>[로컬 사용자 및 그룹]>[사용자]를 선택합니다.
3. 다음 이미지와 같이 [사용자]의 오른쪽 인터페이스 빈 공간에서 우클릭하여 [신규 사용자]를 선택합니다.
![](https://main.qcloudimg.com/raw/60bad9ff725b8fe4386c2eed9c5ff63a.png)
4. '신규 사용자' 인터페이스에서 다음 알림에 따라 사용자 이름 및 비밀번호를 설정하고 [생성]을 클릭합니다.
![](https://main.qcloudimg.com/raw/1bc9cb2c2000361f6699c155e25d7630.png)
주요 매개변수는 다음과 같습니다.
  - 사용자 이름: 사용자 정의합니다. 본 문서는 `ftpuser`를 예시로 사용합니다.
  - 비밀번호 및 비밀번호 확인: 사용자 정의합니다. 비밀번호는 대문자, 소문자 및 숫자를 포함해야 합니다. 본 문서는 `tf7295TFY`를 예시로 사용합니다.
  - [다음 로그인 시 비밀번호 변경 필요] 선택을 해제하고 [비밀번호 무기한 유효]를 선택합니다.
    실제 수요에 맞게 선택하십시오. 본 문서는 비밀번호 무기한 유효를 예시로 사용합니다.
5. [닫기]를 클릭하여 '신규 사용자' 창을 닫으면 생성된 `ftpuser` 사용자를 리스트에서 즉시 조회할 수 있습니다.
	
### 4단계: 공유 폴더 권한 설정
>? 본 문서는 `C:\test` 폴더를 예시로 사용하여 FTP 사이트의 공유 폴더를 설정하였으며 폴더는 공유해야 할 `test.txt` 파일을 포함하고 있습니다. 본 예시를 참조하여 하나의 `C:\test` 폴더 및 `test.txt` 파일을 생성할 수 있습니다. 실제 수요에 따라 다른 폴더를 FTP 사이트의 공유 폴더로 설정할 수도 있습니다.
>
1. 운영 체제 인터페이스에서 <img src="https://main.qcloudimg.com/raw/863967bab67b6cd83ce5f0924e1b19c8.png" style="margin:-3px 0px">를 클릭하여 '내 PC' 창을 엽니다.
2. C 드라이버에서 `test` 폴더를 선택하고 우클릭 후, [속성]을 선택합니다.
3. 'test 속성' 창에서 [보안] 태그를 선택합니다.
4. 다음 이미지와 같이 `Everyone` 사용자를 선택하고 [편집]을 클릭합니다.
'그룹 또는 사용자 이름'에 `Everyone`이 없는 경우 [Everyone 사용자 추가](#add)를 참조하여 추가하십시오.
![](https://main.qcloudimg.com/raw/aec3d0557deef26ca3ff8005da86603f.png)
5. <span id="step5"></span>다음 이미지와 같이 'test의 권한' 인터페이스에서 수요에 따라 `Everyone` 사용자의 권한을 설정하고 [확인]을 클릭합니다.
본 문서는 `Everyone` 사용자에게 모든 권한을 부여하는 것을 예시로 사용합니다.
![](https://main.qcloudimg.com/raw/ccdfda072d8a476a08773b7fcf979ec7.png)
6. 'test 속성' 창에서 [확인]을 클릭하여 설정을 완료합니다.


### 5단계: FTP 사이트 추가
1. '서버 관리자' 창에서 오른쪽 상단 메뉴의 [툴]>[Internet Information Services (IIS) 관리자]를 선택합니다.
2. 다음 이미지와 같이 열린 'Internet Information Sevices (IIS) 관리자' 창에서 왼쪽 메뉴의 서버 이름을 차례대로 펼치고 [웹 사이트]를 우클릭한 후, [FTP 사이트 추가]를 선택합니다.
![](https://main.qcloudimg.com/raw/3d2c1a2708939cd5a8d7bf3bdf9aa1ff.png)
3. '사이트 정보' 인터페이스에서 다음 정보를 참조하여 설정하고 [다음 단계]를 클릭합니다.
![](https://main.qcloudimg.com/raw/76761e667657b80bfdd2d2403d64ba3c.png)
    - **FTP 사이트 이름**: FTP 사이트 이름을 입력합니다. 본 문서는 `ftp`를 예시로 사용합니다.
    - **물리 경로**: 권한 설정을 완료한 공유 폴더의 경로를 선택하십시오. 본 문서는 `C:\test`를 예시로 사용합니다.
4. '바인딩 및 SSL 설정' 인터페이스에서 다음 정보를 참조하여 설정하고 [다음 단계]를 클릭합니다.
![](https://main.qcloudimg.com/raw/355c3de0e19d7e1c161c51156bf0965f.png)  
설정한 주요 매개변수 정보는 다음과 같습니다.
     - **바인딩**: IP 주소는 [전부 미할당]을 기본 선택하고 포트는 기본값 21(FTP 기본 포트 번호)입니다. 포트를 직접 설정할 수도 있습니다.
     - **SSL**: 수요에 따라 선택하십시오. 본 문서는 [SSL 없음]을 예시로 사용합니다.
       - **SSL 없음**: SSL 암호화가 필요하지 않습니다.
       - **SSL 허용**: FTP 서버가 클라이언트와의 비 SSL 및 SSL 연결을 지원하도록 허용합니다.
      - **SSL 요구**: SSL을 암호화해야만 FTP 서버와 클라이언트 사이에서 통신할 수 있습니다.
   [SSL 허용] 또는 [SSL 필요]를 선택한 경우, 'SSL 인증서'에서 기존 SSL 인증서를 선택할 수 있습니다. [서버 인증서 제작](#ssl) 순서를 참조하여 하나의 SSL 인증서를 만들 수도 있습니다.
5. '인증 및 라이선스 정보' 인터페이스에서 다음 정보를 참조하여 설정하고 [다음 단계]를 클릭합니다.
![](https://main.qcloudimg.com/raw/0f3be2c7ba449240cdac3f3c767e668c.png)
 - **인증**: 인증 방법 중 하나를 선택합니다. 본 문서는 [기본]을 예시로 사용합니다.
    - **익명**: 모든 사용자가 익명 또는 FTP 사용자 이름만 제공하는 콘텐츠에 액세스하도록 허용합니다.
	 - **기본**: 사용자가 유효한 사용자 이름과 비밀번호를 제공해야만 콘텐츠에 액세스할 수 있도록 요구합니다. 기본 인증은 네트워크를 통해 암호화되지 않은 비밀번호를 전송하기 때문에, 사용자가 클라이언트와 FTP 서버 간 연결이 안전하다고 인지할 때만(예: SSL 사용) 이 인증 방법을 사용할 수 있습니다.
 - **라이선스**: 액세스가 허용되는 풀다운 리스트에서 한 가지 방식을 선택합니다. 본 문서는 지정 사용자 `ftpuser`를 예시로 사용합니다.
	    - **모든 사용자**: 익명 사용자나 신원이 표시된 사용자에 관계 없이 모든 사용자는 해당 콘텐츠에 액세스할 수 있습니다.
	        - **익명 사용자**: 익명 사용자는 콘텐츠에 액세스할 수 있습니다.
	        - **지정한 역할 또는 사용자 그룹**: 일부 역할 또는 사용자 그룹의 멤버만 콘텐츠에 액세스할 수 있습니다. 이 항목을 선택하면 역할 또는 사용자 그룹을 지정해야 합니다.
	        - **지정한 사용자**: 지정한 사용자만 콘텐츠에 액세스할 수 있습니다. 이 항목을 선택하면 사용자 이름을 지정해야 합니다.
 - **권한**: 필요에 따라 권한을 설정합니다. 본 문서는 [읽기] 및 [쓰기] 권한 설정을 예시로 사용합니다.
    - **읽기**: 권한이 부여된 사용자의 디렉터리로부터 콘텐츠 읽기를 허용합니다.
    - **쓰기**: 권한이 부여된 사용자의 디렉터리 쓰기를 허용합니다.
7. [완료]를 클릭하면 즉시 FTP 사이트 생성이 완료됩니다.

### 6단계: 보안 그룹 및 방화벽 설정
1. FTP 사이트 구축 완료 후 FTP 액세스 모드에 따라 FTP 사이트 추가 시 포트를 바인딩하는 인바운드 규칙을 개방하십시오.
 - **능동 모드**: 20 및 21 포트를 개방합니다.
 - **수동 모드**: 21 포트 및 1024~65535 사이의 포트(예: 5000~6000 개방)를 개방합니다.
해당 인바운드 규칙을 추가하는 방법은 [보안 그룹 규칙 추가](https://intl.cloud.tencent.com/document/product/213/34272)를 참조하십시오.
2. (옵션) FTP 서버가 방화벽으로부터의 수동 연결을 수락할 수 있도록 [Microsoft 공식 홈페이지 문서](https://docs.microsoft.com/en-us/previous-versions/orphan-topics/ws.11/hh831655(v=ws.11))를 참조하여 FTP 사이트의 방화벽 지원을 설정합니다.

### 7단계: FTP 사이트 테스트
FTP 클라이언트 소프트웨어와 브라우저 또는 파일 리소스 관리자 등의 툴을 통해 FTP 서비스를 인증할 수 있습니다. 본 문서는 클라이언트의 파일 리소스 관리자를 예시로 사용합니다.
1. 실제 상황에 따라 IE 브라우저를 설정하세요.
 - FTP 사이트 방화벽이 설정된 경우(능동 모드):
 **클라이언트**의 IE 브라우저를 열어 [도구]>[Internet 옵션]>[고급]을 선택합니다. [방화벽 및 DSL 모뎀과 호환되는 수동 FTP 사용] 선택을 해제하고 [확인]을 클릭합니다.
 - FTP 사이트 방화벽이 설정되지 않은 경우(수동 모드):
    1. **FTP 서버**의 IE 브라우저를 열어 [도구]>[Internet 옵션]>[고급]을 선택합니다. [방화벽 및 DSL 모뎀과 호환되는 수동 FTP 사용] 선택을 해제하고 [확인]을 클릭합니다.
    2. **클라이언트**의 IE 브라우저를 열어 [도구]>[Internet 옵션]>[고급]을 선택하고 [방화벽 및 DSL 모뎀과 호환되는 수동 FTP 사용] 선택을 해제하고 [확인]을 클릭합니다.
2. 클라이언트의 컴퓨터를 열어 경로 창에서 다음 주소에 액세스합니다.
```
ftp://CVM 공용 네트워크 IP:21
```
![](https://main.qcloudimg.com/raw/d3d5a93170bb990f47ecd9f24c3e89ab.png)
3. '로그인 정보' 팝업 창에 [FTP 사용자 이름 및 비밀번호 생성](#user)에서 설정된 사용자 이름 및 비밀번호를 입력합니다.
본 문서에서 사용하는 사용자 이름은 `ftpuser`이고 비밀번호는 `tf7295TFY`입니다.
4. 로그인 성공 후 즉시 파일을 업로드 및 다운로드할 수 있습니다.

## 부록
<span id="add"></span>

### Everyone 사용자 추가

1. 다음 이미지와 같이 'test 속성' 창에서 [보안] 태그를 선택하고 [편집]을 클릭합니다.
![](https://main.qcloudimg.com/raw/f3f056e833fc63c97f23eef646ea8a10.png)
2. 'test의 권한' 인터페이스에서 [추가]를 클릭합니다.
3. '사용자 또는 그룹 선택' 인터페이스에서 [고급]을 클릭합니다.
4. 팝업된 '사용자 또는 그룹 선택' 인터페이스에서 [바로 찾기]를 클릭합니다.
5. 다음 이미지와 같이 검색 결과에서 `Everyone`을 선택하고 [확인]을 클릭합니다.
![](https://main.qcloudimg.com/raw/32a9d44822ed4db0e82167d0cfb94835.png)
6. 다음 이미지와 같이 '사용자 또는 그룹 선택' 인터페이스에서 [확인]을 클릭하면 즉시 추가할 수 있습니다.
![](https://main.qcloudimg.com/raw/1245acedba4be051cf234423460a4345.png)
[5단계](#step5)로 이동하여 `Everyone` 사용자 권한을 설정합니다.

<span id="ssl"></span>

### 서버 인증서 제작

1. '서버 관리자' 창에서 오른쪽 상단 메뉴의 [툴]>[Internet Information Services (IIS) 관리자]를 선택합니다.
2. 다음 이미지와 같이 'Internet Information Services(IIS) 관리자' 팝업 창에서 왼쪽 메뉴의 서버를 선택하고 오른쪽 인터페이스의 [서버 인증서]를 더블 클릭합니다.
![](https://main.qcloudimg.com/raw/8fc9f67a26475b891f4c50d9c670c08c.png)
3. 오른쪽 작업 열에서 [자체 서명 인증서 생성]을 선택합니다.
4. 다음 이미지와 같이 '자체 서명 인증서 생성' 팝업 창에서 인증서 이름 및 스토리지 유형을 설정합니다.
본 문서는 개인 스토리지 유형의 SSL 인증서 생성을 예시로 사용합니다.
![](https://main.qcloudimg.com/raw/0db81917b5b1e20af19d4d687d0d7fda.png)
5. [확인]을 클릭하면 즉시 생성이 완료됩니다.
