본 문서는 보안 그룹 및 포트 설정과 관련된 문제를 소개합니다.
- 콘솔에서 보안 그룹을 생성하고 설정, 작업하는 방법은 아래 문서를 참고할 수 있습니다.
 - [보안 그룹 생성](https://intl.cloud.tencent.com/document/product/213/34271)
 - [보안 그룹 규칙 추가](https://intl.cloud.tencent.com/document/product/213/34272)
 - [보안 그룹 관리](https://intl.cloud.tencent.com/document/product/213/34828)
 - [보안 그룹 규칙 관리](https://intl.cloud.tencent.com/document/product/213/34826)
- Tencent CVM API 사용에 능숙하다면 [보안 그룹 API](https://intl.cloud.tencent.com/document/product/213/12447)를 통해 보안 그룹을 설정하고 작업할 수 있습니다.

## 포트 관련

### 인스턴스에 로그인하기 전 어떤 포트를 개방해야 하나요?
일반적으로 Linux 인스턴스는 22번 포트를 개방하고, Windows 인스턴스는 3389번 포트를 개방합니다. 기타 인스턴스 유형에 적용되는 포트는 [보안 그룹 응용 사례](https://intl.cloud.tencent.com/document/product/213/32369)를 참조 바랍니다.

### CVM에서 흔히 사용하는 포트는 어떤 것들이 있나요?

[서버에서 흔히 사용하는 포트](https://intl.cloud.tencent.com/document/product/213/12451)를 참조 바랍니다.

### 포트를 열어야 하는 이유 및 특정 포트를 여는 방법은?

보안 그룹에서 포트를 개방해야 포트에 해당하는 서비스를 사용할 수 있습니다. 예시:
8080 포트를 사용해 웹페이지에 액세스하려면 보안 그룹을 활성화하고 해당 포트를 개방해야 합니다.
포트 개방 작업 순서는 다음과 같습니다.
1. [보안 그룹 콘솔](https://console.cloud.tencent.com/vpc/securitygroup)에 로그인하고, 해당 인스턴스에 바인딩된 보안 그룹을 클릭하여 상세 페이지로 이동합니다.
2. 인바운드 규칙/아웃바운드 규칙을 선택하여 규칙 추가를 클릭합니다.
3. 사용자의 IP 주소(세그먼트) 및 개방이 필요한 포트 정보를 입력하여 인터넷 개방 허용을 선택합니다.
자세한 작업 순서는 [보안 그룹 규칙 추가](https://intl.cloud.tencent.com/document/product/213/34272)를 참조 바랍니다.

### CVM 원격 기본 포트는 어떻게 수정하나요?

구체적인 작업은 [CVM 원격 기본 포트 수정](https://intl.cloud.tencent.com/document/product/213/35376)을 참조 바랍니다.


### 포트 수정 후 서비스를 사용할 수 없는 이유는 무엇인가요?

서비스의 포트를 수정한 후 해당하는 보안 그룹에서 대응하는 포트를 개방해야 합니다. 그렇지 않으면 서비스를 사용할 수 없습니다.

### Tencent Cloud가 지원하지 않는 포트는 무엇인가요?

- Tencent Cloud는 기본적으로 TCP:25 포트를 제한합니다. 해당 제한을 취소해야 한다면 [25 포트 제한 해제](https://intl.cloud.tencent.com/document/product/213/34833)를 참조하여 제한 해제를 신청할 수 있습니다.
- 일부 포트에는 보안 위험성이 있어 Tencent Cloud에서 제한하지 않아도 통신사에서 차단하기 때문에 액세스할 수 없습니다. 이런 상황에 대비하여 포트를 변경해야 하고, 다음과 같은 포트를 사용해 리슨하지 말 것을 권장합니다.
<table>
<tr><th>프로토콜</th><th>차단 가능성 있는 포트</th></tr>
<tr><td>TCP</td><td>42、135、137、138、139、445、593、1025、1434、1068、3127、3128、3129、3130、4444、5554、5800、5900、9996</td></tr>
<tr><td>UDP</td><td>1026、1027、1434、1068、5554、9996、1028、1433、135 - 139</td></tr>
</table>


## 보안 그룹 관련

### 보안 그룹에는 왜 하나의 규칙이 기본으로 거부로 설정되어 있나요?

보안 그룹 규칙은 위에서 아래 순으로 순차적으로 적용되고, 이전에 설정된 사용 규칙을 통과하면 다른 규칙은 기본으로 거부하도록 설정되어 있습니다. 모든 포트를 개방할 경우 마지막에 있는 거부 규칙은 적용되지 않으며 보안상의 이유로 기본 설정으로 제공합니다.

### 보안 그룹의 우선순위는 어떻게 조정하나요?

구체적인 작업은 [보안 그룹 우선순위 조정](https://intl.cloud.tencent.com/document/product/213/35375)을 참조 바랍니다.

### 보안 그룹을 잘못 선택하면 해당 보안 그룹의 인스턴스 바인딩에 어떤 영향을 주고 해결 방법은 어떻게 되나요?

**예상되는 문제**

- (SSH)Linux 인스턴스 원격 연결, 데스크톱 Windows 인스턴스 원격 로그인이 실패할 수 있습니다.
- 해당 보안 그룹의 CVM 인스턴스 공인 IP와 개인 IP의 원격 ping 체크가 실패할 수 있습니다.
- 해당 보안 그룹의 인스턴스가 노출한 웹서비스에 대한 HTTP 액세스가 실패할 수 있습니다.
- 해당 보안 그룹의 인스턴스가 Internet 서비스에 액세스가 실패할 수 있습니다.

**솔루션**

- 위와 같은 문제가 발생할 경우 콘솔의 보안 그룹 관리에서 보안 그룹 규칙을 재설정할 수 있습니다. 예시, 모든 포트 개방으로 기본 설정된 보안 그룹만 바인딩.
- 보안 그룹 규칙 설정에 대한 자세한 내용은 [보안 그룹 소개](https://intl.cloud.tencent.com/document/product/213/12452)를 참조 바랍니다.

### 보안 그룹의 방향과 정책이란 무엇인가요?

보안 그룹의 정책 방향은 아웃바운드와 인바운드로 구분됩니다. 아웃바운드는 CVM 아웃바운드 트래픽에 대한 필터링을 의미하고, 인바운드는 CVM 인바운드 트래픽에 대한 필터링을 의미합니다.
보안 그룹 정책은 트래픽**허용**과 **차단**으로 구분됩니다.

### 보안 그룹 정책은 어떤 순서로 적용되나요?

위에서 아래 순으로 적용됩니다. 트래픽이 보안 그룹을 지날 때의 정책이 위에서 아래 순으로 적용되어 매칭 성공 시 정책이 적용됩니다.

### 보안 그룹에서 허용하지 않은 IP가 계속해서 CVM에 액세스할 수 있는 이유는 무엇인가요?

예상되는 원인은 다음과 같습니다.
- CVM이 여러 보안 그룹을 바인딩하여, 특정 IP가 다른 보안 그룹에서 허용된 경우.
- 특정 IP가 승인된 Tencent Cloud 공용 서비스에 해당하는 경우.

### 보안 그룹을 사용하면 iptables을 사용할 수 없게 되나요?

아닙니다. 보안 그룹과 iptables를 동시에 사용할 수 있고, 사용자의 트래픽이 두 번 필터링됩니다. 트래픽 방향은 다음과 같습니다.
- 아웃바운드 방향：인스턴스의 프로세스> iptables > 보안 그룹
- 인바운드 방향：보안 그룹 > iptables > 인스턴스의 프로세스

### CVM을 전부 반환해도 보안 그룹을 삭제할 수 없는 이유는 무엇인가요?

휴지통에 CVM이 있는지 확인하십시오. 보안 그룹이 휴지통에 있는 CVM에 바인딩된 경우 삭제할 수 없습니다.

### 보안 그룹 클론 시 타깃 리전의 보안 그룹과 동일한 이름을 사용할 수 있나요?

사용할 수 없습니다. 타깃 리전의 기존 보안 그룹 이름과 다르게 설정해야 합니다.

### 보안 그룹은 사용자 간의 클론을 지원하나요?

지원하지 않습니다.

### 클라우드 API가 보안 그룹의 프로젝트 간 및 리전 간 클론을 지원하나요?

현재로써 콘솔 이용 고객의 편의를 위해 MC를 지원하고 있으나 클라우드 API는 현재 지원하지 않습니다. 기존의 일괄 가져오기/내보내기 한 보안 그룹 규칙의 클라우드 API를 통해 보안 그룹의 프로젝트 간 및 리전 간 클론을 간접적으로 실행할 수 있습니다.

### 보안 그룹의 프로젝트 간 및 리전 간 클론 시 보안 그룹이 관리하는 CVM도 함께 복사되나요?

안 됩니다. 보안 그룹 리전 간 클론은 기존 보안 그룹의 인바운드, 아웃바운드 규칙만 클론하므로 CVM은 별도로 연결해야 합니다.
