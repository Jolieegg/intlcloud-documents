<blockquote class="d-mod-alarm">
              <div class="d-mod-title d-alarm-title">
                <i class="d-icon-alarm"></i>공지: 
              </div>
               <p>CDN 공식 범용 로그 필드 - HTTP 프로토콜 식별자(실시간 로그 proto 필드)에 ‘HTTP/3’ 값을 추가할 예정으로, 2021-09-13일부터 카나리 테스트를 배포합니다. 이는 콘솔 및 인터페이스의 모니터링 통계에 영향을 미치지 않습니다. 하지만 오프라인 로그 다운로드 패키지로 데이터 분석을 진행하는 경우, 구체적인 영향을 확인하여 필요에 따라 조정하시기 바랍니다. 양해와 협조에 감사드립니다. </br></br>배경: QUIC 액세스 기능은 베타 테스트 중으로 자세한 내용은 <a href="https://cloud.tencent.com/document/product/228/51800">QUIC</a>를 참고하십시오.</p>
            </blockquote>



## 기능 소개

Content Delivery Network(CDN)는 CDN 액세스 로그에 대한 실시간 수집 및 푸시를 지원함으로써, 로그 데이터에 대해 빠르게 검색 및 분석할 수 있습니다. 사용자는 CDN 콘솔에서 간편한 원스톱 연결을 통해 로그 수집 및 저장부터 검색까지 안정적이고 신뢰도 높은 Cloud Log Service(CLS)를 이용할 수 있습니다.

>? 
>- 실시간 CLS는 전체 배포되었습니다. 콘솔을 통해 루트 계정으로 활성화하고 사용할 수 있습니다. 사용 전에 인증하고 [CLS](https://console.cloud.tencent.com/cls/search?region=ap-shanghai)를 활성화해야 합니다. 
>- 실시간 CLS는 현재 중국 외 지역 로그 전송은 지원하지 않습니다. 
>- 실시간 CLS는 루트 계정으로만 활성화할 수 있습니다. 
>- 같은 로그 토픽에서 CDN과 ECDN을 혼합하여 선택할 수 없습니다. 

## 적용 시나리오
사용자 액세스 현황 실시간 조회 / 분석

## 기본 개념
### 로그셋
로그셋(Logset)은 CLS의 프로젝트 관리 단위로, 서로 다른 프로젝트의 로그를 구분하기 위해 사용되며, 한 로그셋에는 하나의 프로젝트 혹은 애플리케이션이 상응하게 됩니다. CDN 로그셋에는 다음과 같은 기본 속성 정보가 포함됩니다.
+ 로그셋 이름: cdn_logset
+ 지역: 로그셋 소속 [리전](https://intl.cloud.tencent.com/document/product/614/18940)
+ 저장 시간: 로그셋 내 데이터의 현재 저장 시간 주기
+ 생성 시간: 로그셋의 생성 시간

### 로그 토픽
로그 토픽(Topic)은 CLS의 기본 관리 단위로, 한 로그셋에 여러 개의 로그 토픽이 포함될 수 있습니다. 한 로그 토픽에는 하나의 애플리케이션 혹은 서비스가 상응하게 되며, 기기는 다르지만 유형은 같은 로그는 동일한 로그 토픽에 수집하시기를 권장합니다. 예: 한 서비스 프로젝트에 작업 로그, 응용 프로그램 로그, 액세스 로그 이 세 가지 로그가 있다면 유형마다 하나의 로그 토픽을 생성할 수 있습니다.

CLS 시스템은 로그 토픽을 단위로 사용자의 각 로그 데이터를 구분 및 관리하며, 로그 토픽마다 데이터 소스, 검색 및 전송 규칙을 다르게 설정할 수 있습니다. 따라서, 로그 토픽은 CLS에서 로그 데이터를 설정 및 관리하는 기본적인 단위이며, 로그 토픽을 생성한 후에는 관련 규칙을 설정해야만 정상적으로 로그를 수집함과 동시에 검색 분석, 전송 등의 기능을 사용할 수 있습니다.

시나리오 기능 면에서 로그 토픽은 다음과 같은 기능을 제공합니다.
- 로그 토픽으로 로그 수집
- 로그 토픽을 단위로 로그 저장 및 관리
- 로그 토픽을 단위로 로그 검색 및 분석
- 로그 토픽을 단위로 로그를 다른 플랫폼에 전송
- 로그 토픽에서 로그 다운로드 및 소비

## 운영 가이드
[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인한 후 왼쪽 메뉴에서 [클라우드 로그 서비스]를 클릭하고 [실시간 로그]를 선택하면 실시간 로그 페이지로 이동하여 실시간 로그 전송을 생성할 수 있습니다.
![](https://main.qcloudimg.com/raw/d6f22b7194f2e3433f9bbee4f4e4a1dc.png)

### 신규 로그 토픽 생성
[생성]을 클릭하여 로그 토픽을 생성합니다.
>! 1개의 로그셋에 최대 500개의 로그 토픽을 생성할 수 있습니다.
>
![](https://main.qcloudimg.com/raw/94136aa047219848f82948e19cd8dc06.png)

### 로그 토픽 설정
신규 로그 토픽 이름을 입력하고, 해당 로그 토픽에 도메인을 바인딩합니다.
>!
>- 신규 로그 토픽은 기존 로그 토픽과 같은 이름을 사용할 수 없습니다.
>- 한 도메인은 여러 로그 토픽에 바인딩할 수 없고, 하나의 로그 토픽에만 바인딩할 수 있습니다.
>- 설정 정보를 저장한 이후 설정이 적용되기까지 약 15분 정도 소요됩니다.
>
![](https://main.qcloudimg.com/raw/6e820577732ecc679aae25386683c57e.png)

### 로그 토픽 관리
로그 토픽 설정을 완료한 후에는 로그 토픽을 관리할 수 있습니다. 이는 해당 로그 토픽으로의 로그 전송 중지/시작, 해당 로그 토픽 단위의 로그 검색, 해당 로그 토픽 관리 및 삭제를 포함합니다.
![](https://main.qcloudimg.com/raw/46d8293f0819b693b4b17fa6a79ca78c.png)

#### 로그 전송 중지 / 시작
로그 토픽으로 로그 전송을 수동으로 중지/시작할 수 있습니다.
>!
>- 중지한 후에는 해당 로그 토픽에 바인딩된 모든 도메인의 로그를 해당 토픽으로 더는 전송하지 않습니다. 이미 전송된 로그는 계속 보관되며, 적용되기까지 약 5 - 15분 정도 소요됩니다.
>- 시작한 후에는 해당 로그 토픽에 바인딩된 모든 도메인의 로그를 해당 토픽으로 전송하며, 적용되기까지 약 5 - 15분 정도 소요됩니다.

#### 검색
로그 토픽을 단위로 로그 검색을 수행합니다. 검색할 로그 토픽을 선택하고 [검색]을 클릭하여 로그 검색 페이지로 이동합니다.
+ 시간 구간 선택: 오늘, 24시간(최근 7일 중에서 하루 선택 가능), 최근 7일의 로그 데이터를 검색할 수 있습니다.
+ 정렬 표시: 로그 시간에 따라 내림 순 / 오름 순으로 정렬할 수 있습니다.
+ 검색: 전문 검색, 키 값 검색과 퍼지(Fuzzy) 키워드 검색을 지원합니다. 자세한 내용은 [검색 구문](https://intl.cloud.tencent.com/document/product/614/37882)을 참고하십시오. 더 많은 검색 분석 기능은 [CLS](https://console.cloud.tencent.com/cls/search?region=ap-shanghai)에서 사용할 수 있습니다. 

![](https://main.qcloudimg.com/raw/dbc8e4aa6ae93062c22cadf4b9373e64.png)


#### 관리
이미 생성한 로그 토픽을 관리하고, 해당 토픽에 바인딩된 도메인의 목록을 갱신할 수 있습니다.
>? 새로운 설정이 적용되기까지 약 5 - 15분 정도 소요됩니다.
>
![](https://main.qcloudimg.com/raw/ce1f6df0d8bde8ce66f7ebfb4a233e6e.png)

#### 삭제
로그 토픽을 수동으로 삭제할 수 있습니다.
>! 삭제한 후에는 해당 로그 토픽에 바인딩된 모든 도메인의 로그를 해당 토픽으로 더 이상 전송하지 않습니다. 이미 전송된 로그는 모두 삭제되며, 적용되기까지 약 5 - 15분 정도 소요됩니다.

### 로그 데이터 설명

| 로그 필드      | 원시 로그 유형 | CLS 유형 | 설명                                                         |
| ------------- | ------------ | ------------ | ------------------------------------------------------------ |
| app_id        | Integer      | long         | Tencent Cloud 계정 APPID                                             |
| client_ip     | String       | text         | 클라이언트 IP                                                    |
| file_size     | Integer      | long         | 파일 크기                                                     |
| hit           | String       | text         | 캐시 HIT / MISS, CDN 엣지 노드에 히트 혹은 부모 노드에 히트 모두 HIT로 표기   |
| host          | String       | text         | 도메인                                                         |
| http_code     | Integer      | long         | HTTP 상태 코드                                                  |
| isp           | String       | text         | 통신사                                                       |
| method        | String       | text         | HTTP Method                                                  |
| param         | String       | text         | URL에 포함된 매개변수                                               |
| proto         | String       | text         | HTTP 프로토콜 식별자                                                |
| prov          | String       | text         | 통신사 지역                                                   |
| referer       | String       | text         | Referer 정보, HTTP  출처 주소                                 |
| request_range | String       | text         | Range 매개변수. 요청 범위                                         |
| request_time  | Integer      | long         | 응답 시간(ms), 노드가 요청을 받은 후부터 모든 리턴 패킷에 응답하고, 다시 클라이언트로 도달하기까지 소요된 시간 |
| request_port  | String      | long         | 클라이언트와 CDN 노드를 연결하는 포트, 없는 경우: - |
| rsp_size      | Integer      | long         | 리턴한 바이트 수                                                   |
| time          | Integer      | long         | 요청 시간, UNIX 타임스탬프, 단위: 초.                                        |
| ua            | String       | text         | User-Agent 정보                                              |
| url           | String       | text         | 요청 경로                                                     |
| uuid          | String       | text         | 요청 고유 식별자                                               |
| version       | Integer      | long         | CDN 실시간 로그 버전                                                    |
