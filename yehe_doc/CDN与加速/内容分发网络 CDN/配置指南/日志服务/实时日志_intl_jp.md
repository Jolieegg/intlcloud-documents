<blockquote class="d-mod-alarm">
              <div class="d-mod-title d-alarm-title">
                <i class="d-icon-alarm"></i>お知らせ：
              </div>
               <p>CDN公式サイト一般ログフィールド - HTTPプロトコル識別子（リアルタイムログprotoフィールド）に「HTTP/3」の値を追加します。この変更は2021-09-13にカナリアリリースされますが、コンソールおよびインターフェースのデータ監視統計には影響しません。オフラインのログダウンロードパッケージを使用してデータ統計を行っている場合は、具体的な影響に注意を払って確認し、必要に応じて調整してください。ご理解、ご協力のほど、宜しくお願いいたします。</br></br>バックグラウンド：QUICアクセス機能がベータ版テスト中です。詳細については、<a href="https://cloud.tencent.com/document/product/228/51800">QUIC</a>をご参照ください。</p>
            </blockquote>



## 機能の説明

Content Delivery Network（CDN）は、アクセスログをリアルタイムで収集してプッシュすることにより、ログデータをすばやく検索して分析できます。ユーザーはCDNコンソールからワンストップですばやくアクセスして、ログの収集、ログの保存からログの検索など、安定した高信頼性の包括的なログサービスを利用することができます。

>? 
>- リアルタイムログサービスはすでにすべてリリースされています。コンソールからルートアカウントを用いてセルフアクティベーションすることで使用できます。使用前に、まず[Cloud Log Service（CLS）](https://console.cloud.tencent.com/cls/search?region=ap-shanghai)をアクティブ化する権限を付与する必要があります。
>- リアルタイムログサービスは、現時点では、中国本土以外でのログの配信をサポートしていません。
>- リアルタイムログサービスは、ルートアカウントのアクティブ化のみをサポートしています。
>- CDNとECDNドメイン名を同じログトピックの下に混在させることはできません。

## ユースケース
この機能を使用すると、ユーザーアクセスをリアルタイムで表示および分析できます。

## 基本概念
### ログセット
ログセット（Logset）は、CLSのプロジェクト管理単位であり、異なるプロジェクトのログを区別するために使用されます。1つのログセットは、1つのプロジェクトまたはアプリケーションに対応します。CDNログセットには、以下の基本的な属性情報があります。
+ ログセット名:cdn_logset
+ リージョン：ログセットが属する [リージョン](https://intl.cloud.tencent.com/document/product/614/18940)
+ 保存時間:現在のログセット内のデータの保存期間
+ 作成日時:ログセットの作成日時

### ログトピック
ログトピック（Topic）は、CLSの基本的な管理単位です。1つのログセットには、複数のログトピックを含めることができます。1つのログトピックは、1種類のアプリケーションまたはサービスに対応します。異なる端末上の同種類のログを同じログトピックに収集することをお勧めします。たとえば、1つのビジネスプロジェクトには、操作ログ、アプリケーションログ、アクセスログの3種類のログがある場合、ログの種類ごとにログトピックを作成できます。

CLSシステムは、ログトピックを単位として、ユーザーの異なるログデータを個別に管理します。各ログトピックには、異なるデータソース、インデックスルール、および配信ルールを設定できるため、ログトピックはCLSがログデータをを構成および管理するための基本単位です。ログトピックを作成した後、ログを効果的に収集し、検索、分析、配信などの機能を利用するには、関連ルールを設定する必要があります。

ログトピックの機能は次のとおりです。
- ログを収集してトピックを記録します。
- ログトピックに基づいてログを保存および管理します。
- ログトピックに基づいてログを検索および分析します。
- ログトピックに基づいてログを他のプラットフォームに配信します。
- ログトピックからログをダウンロードして使用します。

## 操作ガイド
[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のナビゲーションメニューバーで【ログサービス】をクリックして、【リアルタイムログ】を選択すると、リアルタイムログのページに入り、リアルタイムログ配信の作成を開始します。
![](https://main.qcloudimg.com/raw/d6f22b7194f2e3433f9bbee4f4e4a1dc.png)

### ログトピックの新規作成
【新規】をクリックして、ログ トピックを作成します。
>! 1つのログセットにつき、最大500のログトピックを作成できます。
>
![](https://main.qcloudimg.com/raw/94136aa047219848f82948e19cd8dc06.png)

### ログトピックの設定
新しいログトピックの名前を記入し、ドメイン名をログトピックにバインドします。
>!
>- 新規作成するログトピックの名前は、既存のログトピックの名前と同じにすることはできません。
>- 1つのドメイン名あたり、1 つのログトピックにのみバインドできます。
>- 設定情報が保存されてから、設定が有効になるまでに約15分かかります。
>
![](https://main.qcloudimg.com/raw/6e820577732ecc679aae25386683c57e.png)

### ログトピックの管理
ログトピックを設定した後は、ログトピックを管理できるようになります。ログトピックへのログ配信の停止/開始、当該ログトピックでのログの検索、ログトピックの管理、およびログトピックの削除を行うことができます。
![](https://main.qcloudimg.com/raw/46d8293f0819b693b4b17fa6a79ca78c.png)

#### ログ配信の停止/開始
ログトピックへのログ配信を手動で停止/開始することができます。
>!
>- 停止すると、当該ログトピックにバインドされているドメイン名のすべてのログは当該トピックに配信されなくなり、すでに配信されているログは保持されます。有効になるまでに約5～15分かかります。
>- 開始すると、当該ログトピックにバインドされているドメイン名のすべてのログは引き続き当該トピックに配信され、有効になるまでに約5～15分かかります。

#### 検索
ログトピックでログを検索します。検索するログトピックを選択し、【検索】をクリックすると、ログ検索画面に入ります。
+ 期間の選択：本日、24時間（過去7日間から1日を選択）、および過去7日間に記録されたログデータを検索できます。
+ ソート: ログ時間に基づいて、ログを昇順または降順で並べ替えることができます。
+ 検索：全文検索、キー値検索、あいまい検索をサポートしています。詳細については、[検索構文](https://intl.cloud.tencent.com/document/product/614/37882)をご参照ください。さらに多くの検索および分析機能については、[Cloud Log Service（CLS）](https://console.cloud.tencent.com/cls/search?region=ap-shanghai)に移動するとご利用いただけます。

![](https://main.qcloudimg.com/raw/dbc8e4aa6ae93062c22cadf4b9373e64.png)


#### 管理
作成したログトピックを管理し、それにバインドされているドメイン名のリストを更新できます。
 新しい設定が有効になるまでに約5～15分かかります。

![](https://main.qcloudimg.com/raw/ce1f6df0d8bde8ce66f7ebfb4a233e6e.png)

#### 削除
ログトピックを手動で削除することができます。
ログトピックが削除されると、当該ログトピックにバインドされているドメイン名のすべてのログは当該トピックに配信されなくなり、すでに配信されているすべてのログは消去されます。有効になるまでに約5～15分かかります。

### ログデータの説明

| ログフィールド      | 生ログのタイプ | ログサービスタイプ | 説明                                                         |
| ------------- | ------------ | ------------ | ------------------------------------------------------------ |
| app_id        | Integer      | long         | Tencent Cloudアカウント APPID                                             |
| client_ip     | String       | text         |クライアント IP                                                    |
| file_size     | Integer      | long         | ファイルサイズ                                                   |
| hit           | String       | text         | キャッシュヒット/ミス。CDNエッジサーバーと親ノードの両方のヒットがヒットとしてマークされます。  |
| host          | String       | text         | ドメイン名                                                         |
| http_code     | Integer      | long         | HTTPステータスコード                                              |
| isp           | String       | text         |キャリア                                                       |
| method        | String       | text         | HTTP Method                                                  |
| param         | String       | text         | URLが保持するパラメータ                                               |
| proto         | String       | text         | HTTP プロトコル識別子                                         |
| prov          | String       | text         | キャリア所在省                                                   |
| referer       | String       | text         | Referer 情報、つまりHTTPソースアドレス                               |
| request_range | String       | text         | Rangeパラメータ、つまりリクエスト範囲                                      |
| request_time  | Integer      | long         | 応答時間（ms）。ノードがリクエストを受信してからすべてのパケットに応答してクライアントに到達するまでの時間を示します。|
| request_port  | String      | long         | クライアントとCDNノードが接続を確立するポート。なしの場合は以下となります。 - |
| rsp_size      | Integer      | long         | 返されるバイト数                                                  |
| time          | Integer      | long         | リクエスト時間、UNIX タイムスタンプ、単位：秒。                                        |
| ua            | String       | text         | User-Agent情報                                           |
| url           | String       | text         | リクエストパス                                                    |
| uuid          | String       | text         | 一意のリクエスト ID                                             |
| version       | Integer      | long         | CDN リアルタイムログのバージョン                                                   |
