## 알고리즘 설명
**액세스 URL 형식**
`http://DomainName/Filename?sign=timestamp-rand-uid-md5hash`

>!액세스 URL에 중국어를 포함할 수 없습니다.

**알고리즘 설명**
- timestamp: 10진법(UNIX 타임스탬프).
- rand: 랜덤 문자열, 0~100자리의 랜덤 문자열, 대소문자 및 숫자로 구성.
- uid: 0
- md5hash: MD5(파일 경로-timestamp-rand-uid-사용자 정의 키).

**요청 예시**
`http://cloud.tencent.com/test.jpg?sign=1582791032-im1acp76sx9sdqe601v-0-dd63f95e739ed4b47427a129d21ef4e3`

>!MD5 계산 시 요청 경로가 `http://cloud.tencent.com/test.jpg`인 경우, MD5 계산 경로는 `/test.jpg`입니다.

## 설정 가이드
### 매개변수 설명
TypeA에 필요한 설정은 다음과 같습니다.
![](https://main.qcloudimg.com/raw/b7da5881cba4ad972aa11f43bc2bc2ca.png))
**사용자 정의 인증 키**: 6 - 40자리 대소문자 알파벳 및 숫자로 구성합니다. 키는 보안 유지되어야 하며 클라이언트와 서버만 알고 있어야 합니다.
**사용자 정의 인증 매개변수 이름**: 예시 중의 sign을 임의의 1 - 100자리 대소문자 알파벳, 숫자 또는 언더바로 구성된 매개변수로 대체한 후, CDN이 요청을 받은 뒤 지정한 서명 매개변수에 따라 상응하는 값을 추출하여 MD5 계산을 진행하며, 전송된 md5hash 값과 매칭되면 서명 인증이 통과된 것이고, 인증이 통과되지 않은 경우 403이 반환됩니다.
**사용자 정의 유효시간**: 요청 중의 timestamp에 설정된 유효시간을 추가한 후, 현재 시간과의 비교를 통해 요청 만료 여부를 판단하며 만료된 경우 403이 반환됩니다. 유효시간은 초 단위이며, 최대 630720000초까지 설정 가능합니다.

### 적용 객체
키, 매개변수 이름, 만료 시간을 설정한 후, 필요에 따라 인증 객체를 지정합니다. 다음 세 가지 모드를 지원합니다.
![](https://main.qcloudimg.com/raw/148f6319984b1f3d99ccb186666cb425.png)

+ 지정 도메인의 모든 파일 인증
+ 지정된 유형의 파일을 제외한 모든 파일 인증
+ 지정된 유형의 파일만 인증

## 주의 사항
** 캐시 히트율**
TypeA 인증 모드의 도메인을 활성화하면, 액세스 URL에 인증 매개변수가 수반되고, CDN 노드에서 리소스를 캐시할 때 자동으로 상응하는 매개변수를 무시하여 도메인 캐시 히트율에 영향을 주지 않습니다.
>!설정 후 자동으로 상응하는 매개변수를 무시, 즉 설정한 인증 매개변수를 무시하기 때문에 인증 범위 내 파일의 캐시 키에 영향을 미치게 되며, 우선순위는 [캐시 구성 - 캐시 키 규칙 설정]의 캐시 키 값 규칙보다 높습니다.
예를 들어, TypeA 설정이 인증 매개변수: sign - 인증 범위: jpg 일 때, [캐시 구성-캐시 키 규칙 설정]에서 ‘모든 파일 - 매개변수 무시하지 않음’으로 설정되었다 하더라도 jpg 파일은 자동으로 ‘sign’ 매개변수를 무시합니다.


**Origin-pull 정책**
TypeA 인증 모델의 도메인을 활성화하고 액세스 형식을 다음과 같이 설정합니다.
`http://DomainName/Filename?sign=timestamp-rand-uid-md5hash`

인증 통과 후 CDN 노드가 미스되면 노드에서 원본 요청을 발송합니다. **형식과 액세스 요청이 일치하면 sign 매개변수는 유지됩니다** 원본 서버에서는 필요에 따라 무시 또는 2차 인증을 진행할 수 있습니다.
