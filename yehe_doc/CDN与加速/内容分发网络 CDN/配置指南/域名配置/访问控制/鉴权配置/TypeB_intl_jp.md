## アルゴリズムの説明
**アクセスURLの形式**
`http://DomainName/timestamp/md5hash/FileName`

**アルゴリズムの説明**
- timestamp：YYYYMMDDHHMM形式のタイムスタンプ。
- md5hash：MD5（カスタムキー+タイムスタンプ+ファイルパス）。

**リクエスト例**
`http://cloud.tencent.com/202003032017/b91bad39a0f9c885ddebd6b6164de3c4/test.jpg`

> !MD5値を計算する際に、もしリクエストパスが`http://cloud.tencent.com/test.jpg`の場合、MD5を計算する際のパスは`/test.jpg`となります。

## 設定ガイド

### パラメータの説明
TypeBに必要な設定は以下のとおりです。
![](https://main.qcloudimg.com/raw/d0cd00305ed4911a500995628bd45cfd.png)
**認証キーをカスタマイズ：** キーは6～32文字の大文字と小文字および数字で構成されています。キーを大切に保管してください。ユーザー側とサーバー側のみ知っている必要があります。
**有効時間をカスタマイズ：**リクエストパス中のタイムスタンプ値と設定された有効時間を介して、現在の時刻と比較し、リクエストの有効期限が切れているかどうかが判断されます。有効期限が切れた場合は、403エラーが直接返されます。 

### オブジェクト
キー、パラメータ名、および有効期間を設定した後、必要に応じて認証オブジェクトを指定できます。次の3つの認証モードがサポートされています。
![](https://main.qcloudimg.com/raw/13ccf23f34aaa9963e2ca36ea48b36f0.png)
- 指定されたドメイン名配下のすべてのファイルは認証される必要があります。
- 指定されたタイプのファイルを認証不要に、他のすべてのファイルは認証される必要があります。
- 指定されたタイプのファイルは認証される必要があります。

## 注意事項
**キャッシュヒット率**
TypeB認証方式が有効になっているドメイン名は、アクセスURLパスに署名とタイムスタンプが保持されます。CDNノードでリソースをキャッシュする時、パス内のフィールドが自動的に無視され、キャッシュヒット率には影響しません。
**back-to-originポリシー**
TypeB認証方式が有効になっているドメイン名のアクセス形式は次のとおりです。
`http://DomainName/timestamp/md5hash/FileName`

認証が成功した後、CDNノードでヒットが見つからない場合、ノードはback-to-originリクエストを送信します。**back-to-originリクエストは、md5hashとタイムスタンプがパスから削除されます**。オリジンサーバーは認証情報を処理する必要はありません。

