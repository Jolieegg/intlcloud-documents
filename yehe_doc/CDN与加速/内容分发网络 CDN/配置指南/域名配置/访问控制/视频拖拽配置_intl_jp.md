## 設定シナリオ

- ビデオドラッグは主にVODシナリオで発生します。ユーザーが再生の進捗状況をドラッグすると、サーバーへ以下のようなリクエストが送信されます。
`http://www.test.com/test.flv?start=10`
  この場合、10バイト目以降のデータが返されます。VODシナリオのビデオファイルはいずれも各CDNノードにキャッシュされているため、この設定を有効にすることで、各ノードがこのようなリクエストに直接応答することができます。
- ビデオドラッグをオンにするにはパラメータ無視設定を同時にアクティブ化する必要があります。つまり[キャッシュキールール](https://intl.cloud.tencent.com/document/product/228/35316)の中の全てのルールのパラメータ無視設定を「すべて無視」にし、オリジンサーバーがrangeリクエストをサポートしている必要があります。サポートされるファイル形式はmp4、flv、tsです。

| ファイルタイプ | meta情報                                                    | start パラメータの説明                                               | リクエストの例                                                     |
| :------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| MP4      | オリジンサーバーのビデオのmeta情報がファイルのヘッダーに含まれなければなりません。meta情報が最後にあるビデオを対応していません | startパラメータは時刻を示し、単位が秒です、小数点によるミリ秒までの表示を対応しています（例えば start = 1.01は開始時間が1.01sであることを示している）。CDN はstart表される時刻の前のキーフレーム（現在のstartがキーフレームでない場合）を位置づけます| `http://www.test.com/demo.mp4?start=10`は第10秒から再生を開始することを示しています |
| FLV      | オリジンサーバーのビデオはmeta情報を備えなければなりません                                   | start パラメータはバイトを示しています、CDN はstart表される時刻の前のキーフレーム（現在のstartがキーフレームでない場合）を自動的に位置づけます| `http://www.test.com/demo.flv?start=10` は第10秒から再生を開始することを示しています |
| TS       | 特別な要件はありません                                                   | startパラメータはバイトを示し、CDNはstartパラメータが示すバイトに自動的に配置されます | `http://www.test.com/demo.ts?start=10` は10番目のバイトから再生を開始することを意味します |


## 設定の確認
[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のメニューバーから【ドメイン名管理】を選択し、業務タイプがストリーミングメディアVODアクセラレーションであるドメイン名を選択して、ドメイン名の設定画面に入ると、Tabの【アクセス制御】画面に【ビデオドラッグ】が表示されます。デフォルトではオフ状態になっています。
![img](https://main.qcloudimg.com/raw/515a46c56b93b9932f5bbcab39a8293e.png)
