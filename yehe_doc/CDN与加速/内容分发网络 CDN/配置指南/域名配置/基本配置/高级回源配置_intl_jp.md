

Tencent Cloud CDNは、より細かい粒度のback-to-origin設定をサポートし、それぞれのルールに基づき、それぞれのオリジンサーバーアドレスにback-to-originします。例えば、サブパスでのback-to-origin（ファイルタイプ、フォルダ、フルパスファイル（例：/test/1.jpg）、トップページを指定してback-to-origin）、Client IPの所在リージョンに基づくback-to-originなどです。

>!
>- Client IPの所在リージョンに基づくback-to-originは、現在、内部テスト中であり、全面的にリリースされていません。全面的なリリースまで、しばらくお待ちください。
>- 現在はメインラインのみをサポートし、プライマリオリジンサーバーに基づきより細かい粒度のback-to-origin設定を行います（オリジンサーバーのタイプ、back-to-origin HOSTは、デフォルトでプライマリオリジンサーバーの設定を継承します。ルールごとの変更はサポートしていません）。

## 設定ガイド

[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のメニューバーで【ドメイン名管理】を選択し、ドメイン名操作列の【管理】をクリックして、ドメイン名設定ページに移動します。Tab【基本設定】ページの【オリジンサーバー情報】モジュール最下部に【高度なback-to-origin設定】が表示されていますので、クリックして開きます。
![](https://main.qcloudimg.com/raw/17e0385a7cea2cbdd0ae012cae8b2555.png)

### ルールの追加

必要に応じて高度なback-to-origin設定のルールを追加することができます。プライマリオリジンサーバーの【編集】をクリックし、【高度なback-to-origin設定】をクリックすれば編集が可能となります。
![](https://main.qcloudimg.com/raw/ef2ae0e51a0cb032d493f89b8029b316.png)

**設定ルール**

- 1つのドメイン名につき、最大50件のルールを追加できます。
- 1つのルール中のback-to-originアドレスは1つの IP/ドメイン名オリジンサーバーとポート（0 - 65535）の入力をサポートし、ポートはデフォルトにすることができます。back-to-originプロトコルで「HTTPS」または「プロトコルに従う」が選択されている場合は、ポートを443にしか設定できず、またはポートを設定することができません。
- 更なる操作：複数のルールを調整する際の優先度をサポートします。一括編集/削除の複数のルールをサポートします。

>?
>- 最下部の優先度が最上部より高い-この相対位置の優先度の調整は、複数のサブパスのback-to-originルール（ファイルタイプ/フォルダ/フルパスファイル/トップページback-to-originルールの指定）、またはClient IPの存在するリージョンに基づく複数のback-to-originルールなど、同一タイプのback-to-originルールのみに限定されます。
>- 同一リクエストが異なるタイプのback-to-originルールに適合する場合は、タイプの優先度に従って実行され、順序はサブパス＞Client IPとなります。
例：’江蘇に帰属するClient IPは1.1.1.1 にback-to-originする’および’/test は 2.2.2.2 にback-to-originする’が設定されている場合、江蘇に帰属するClient IPが /test にアクセスすると、 2.2.2.2 にback-to-originします。
