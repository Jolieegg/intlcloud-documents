## 설정 시나리오
Tencent Cloud의 CDN은 리소스 캐싱 시 저장 효율을 높이기 위해 파일을 분할하여 저장하며, Range 요청을 지원합니다. 요청에 HTTP 헤더 `Range: bytes = 0-999`가 포함되었을 경우, 파일의 상위 1,000개 바이트를 사용자에게 반환합니다.

Range 원본 설정을 활성화하면, 사용자가 요청한 일부 파일이 만료되었을 때 CDN이 사용자의 요청에 따라 샤드 원본을 요청하며, 사용자에게 필요한 일부 파일만 가져와 캐싱하고 사용자에게 반환합니다. Range 원본 설정을 비활성화할 경우, 사용자가 일부 파일만 요청하였어도 CDN이 전체 파일을 가져와 캐싱하고 사용자가 요청한 일부 파일을 반환합니다.

Range 원본 요청 설정을 활성화하면 대용량 파일의 배포 효율을 높여 응답 속도를 향상하고 원본 서버의 부하를 줄일 수 있습니다.

> ?
> - Range 원본 요청 설정이 활성화된 후에는 리소스가 노드에서 분할 캐싱되지만, 사용자가 지정한 캐시 만료 규칙에 따라 모든 샤드의 캐시 만료 시간은 동일하게 유지됩니다.
> - Range 원본 설정을 활성화하려면 원본 서버가 Range 요청을 지원하는지 확인해야 합니다. 지원되지 않는 경우 원본 요청에 실패할 수 있습니다.

## 설정 가이드

[CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인한 후, 왼쪽 메뉴바에서 [도메인 관리]를 선택한 뒤 도메인 작업 열의 [관리]를 클릭하여 도메인 설정 페이지로 들어갑니다. Tab을 [Origin-pull 설정]으로 전환하면 [Range 원본 요청 설정]을 찾을 수 있습니다.

기본 설정은 비활성화 상태이나 COS 원본 서버 유형의 도메인일 경우에는 활성화 상태로 기본 설정되어 있으며, 활성화/비활성화 설정은 사용자의 필요에 따라 변경 가능합니다.
![](https://main.qcloudimg.com/raw/04b9ec63d365b60ba2c3a8c16bc61c36.png)



## 설정 예시
도메인 `cloud.tencent.com`의 Range 원본 요청 설정이 아래와 같을 경우:
![](https://main.qcloudimg.com/raw/04b9ec63d365b60ba2c3a8c16bc61c36.png)
사용자 A가 보낸 `http://cloud.tencent.com/test.apk` 리소스에 대한 요청을 노드에서 수신했을 때 캐싱된 `test.apk` 파일이 만료된 경우 원본 요청을 전송하는데, 노드에서 Range 요청 방식으로 원본을 요청하면 샤드가 리소스 및 캐시를 획득합니다. 이때 사용자 B도 Range 요청을 보냈으며 노드에 저장된 샤드가 Range에 지정된 바이트에 부합하면, 모든 샤드가 획득할 때까지 기다리지 않고 사용자에게 바로 반환합니다.

