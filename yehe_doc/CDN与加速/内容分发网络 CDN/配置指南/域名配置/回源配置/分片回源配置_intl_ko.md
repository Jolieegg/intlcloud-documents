
대부분의 파일이 대용량 정적 파일인 경우 Range GET을 활성화하면 Origin-pull 중 파일 응답 속도를 높이고 대용량 파일 전달 효율성을 향상할 수 있습니다.

## 기능 소개
Range GET은 Range 요청을 기반으로 하는 Origin-pull을 나타냅니다. Range는 HTTP 요청 헤더 중 하나로 지정된 범위의 파일을 가져오는 데 사용됩니다. Range 요청을 사용하여 서버에서 부분적인 파일 콘텐츠만 요청할 수 있습니다. 예를 들어 요청에 range:bytes=0-999 HTTP 헤더가 포함된 경우 파일의 처음 1000바이트가 사용자에게 반환됩니다.
CDN에서 Range GET가 활성화된 후 origin-pull 요청은 기본적으로 range 헤더를 전달합니다. 사용자가 요청한 부분 파일이 노드에 캐시되지 않았거나 해당 캐시가 만료된 경우 CDN은 Range GET을 수행하여 요청된 부분 파일을 노드로 가져와서 캐시하고 사용자에게 반환합니다. Range GET이 비활성화된 후 사용자 요청에 range 헤더가 포함되지 않은 경우 CDN은 Origin-pull 중에 전체 파일을 가져옵니다.
APK, 오디오/비디오 파일과 같은 대용량 파일의 경우 range 요청을 사용하여 대용량 파일의 전달 효율성을 효과적으로 개선하고 응답 시간을 단축하며 원본 서버의 부담을 줄일 수 있습니다.

## 주의 사항
1. Range GET를 활성화하기 전에 먼저 원본이 Range 요청을 지원하는지 확인하십시오. 그렇지 않으면 작업이 실패할 수 있습니다.
2. Range GET가 활성화된 후 리소스는 노드의 샤드에 캐시되며 이러한 샤드는 동일한 캐시 만료 시간을 가지며 사용자가 정의한 캐시 만료 규칙을 따릅니다.
3. 모든 리소스가 작은 정적 파일이거나 COS 원본 및 이미지 처리와 같은 데이터 처리 기능을 사용하는 경우 Range GET을 활성화하지 않는 것이 좋습니다. 그렇지 않으면 origin-pull이 실패할 수 있습니다.
4. 모든 리소스가 대용량 정적 파일이고 원본이 Range 요청을 지원하거나 COS 원본을 사용하고 이미지 처리와 같은 데이터 처리 기능을 사용하지 않는 경우 Range GET을 활성화하여 전달 효율성과 응답 속도를 향상시키는 것이 좋습니다.

## StreamLink 구성 설명

### 도메인 관리에서 구성하기
1. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인합니다;
2. 왼쪽 사이드바에서 **도메인 관리**를 클릭하여 도메인 이름 관리 목록으로 이동합니다;
3. 대상 도메인 이름을 선택하고 **관리**를 클릭하여 도메인 이름 구성 페이지로 이동합니다;
4. **Origin-pull 구성** 탭을 클릭하여 Range GET 구성 항목을 봅니다.
![](https://qcloudimg.tencent-cloud.cn/raw/eeea737602e1248ca1856a16a80df1b7.png)
5. Range GET 구성에서 Range GET는 기본적으로 모든 파일에 대해 비활성화되어 있습니다. 필요에 따라 파일에 대해 여러 사용자 정의 규칙을 추가할 수도 있습니다. Range GET 규칙은 파일 확장자, 파일 디렉터리 및 전체 경로로 일치시킬 수 있습니다.

    |구성 항목|설명|
    |--|--|
    |유형|모든 파일, 파일 확장자, 파일 디렉터리 또는 전체 경로: <br><br>모든 파일: 이 Range GET 규칙은 모든 파일에 적용됩니다. 기본 규칙이며 삭제할 수 없습니다. <br>파일 확장자: 이 Range GET 규칙은 지정된 파일 확장자에 적용됩니다. <br>파일 디렉터리: 이 Range GET 규칙은 지정된 파일 디렉터리에 적용됩니다. <br>전체 경로: 이 Range GET 규칙은 지정된 파일 경로에 적용됩니다.|
    |콘텐츠|선택한 파일 형식에 따라 콘텐츠를 입력합니다. <br>유형이 파일 확장자인 경우 하나 이상의 파일 확장자를 ‘;’으로 구분하여 입력할 수 있습니다. <br>유형이 파일 디렉터리인 경우 하나 이상의 파일 디렉터리를 ‘;’으로 구분하여 입력할 수 있으며 입력한 내용은 /test;/a/b/c와 같이 ‘/’로 끝날 수 없습니다. <br>유형이 전체 경로인 경우 /index.html;/test/\*.jpg와 같이 ‘;’으로 구분된 하나 이상의 전체 파일 경로를 입력할 수 있습니다. 파일 경로는 \* 와일드카드를 지원합니다. |
    | 범위 GET | 범위 GET을 활성화하거나 비활성화할 수 있습니다. <br>활성화: 범위 GET이 활성화된 경우 Origin-pull 요청에 범위 요청이 사용됩니다. range GET이 활성화된 후 사용자 요청에 range 헤더가 없고 요청된 파일의 크기가 4M보다 큰 경우 CDN 노드는 Origin-pull 요청을 1M의 샤드 크기를 기준으로 Origin-pull에 대한 여러 서브 요청으로 분할합니다. 요청된 파일의 크기가 4M 미만인 경우 CDN 노드는 원본 서버에서 전체 파일을 가져옵니다. 사용자 요청에 range 헤더가 있는 경우 CDN 노드는 Origin-pull에 range 헤더를 사용합니다. <br>비활성화: 범위 GET이 비활성화된 경우 Origin-pull 요청에 범위 요청이 사용되지 않습니다. |

### 권장 구성
파일 크기가 4M보다 큰 경우 이러한 파일에 대해 범위 GET를 활성화하는 것이 좋습니다. 파일의 일부만 큰 파일인 경우 파일 유형/파일 디렉터리/전체 경로별 일치를 통해 해당 파일에 대해 범위 GET를 활성화하고 다른 파일에 대해서는 범위 GET를 비활성화하는 것이 좋습니다.

### 구성 제한
범위 GET 규칙을 최대 20개까지 구성할 수 있습니다. 규칙이 낮을수록 우선 순위가 높아집니다. 사용자가 파일을 요청하면 파일이 우선순위에 따라 규칙과 일치하게 되며, 일치 성공 후 우선순위가 가장 높은 규칙이 우선적으로 실행됩니다.

## 구성 예시

**예시 1**
모든 파일에 대해 범위 GET를 활성화해야 하는 경우 도메인 이름 `cloud.tencent.com`에 대해 범위 GET를 다음과 같이 구성합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/1227e1b23eec3ceecad49b80ed64c5a0.png)
사용자 A가 `http://cloud.tencent.com/test.apk` 리소스를 요청합니다. 노드가 요청을 수신하고 캐시된 test.apk 파일이 이미 만료되었음을 찾은 후 현재 모든 파일에 대해 Range GET가 활성화되어 있으므로 샤드별로 리소스를 가져오고 캐시하기 위한 Range 요청을 시작합니다. 만약 사용자 B도 동일한 노드의 동일한 파일에 대해 Range 요청을 하고 노드에 저장된 샤드가 Range 요청의 지정된 바이트 세그먼트와 일치한다면, 리소스는 모든 샤드를 얻을 때까지 기다리지 않고 사용자 B에게 직접 반환됩니다.

**예시 2**
일부 파일에만 범위 GET를 활성화해야 하는 경우 도메인 이름 `cloud.tencent.com`에 대해 범위 GET를 다음과 같이 구성합니다.
![](https://qcloudimg.tencent-cloud.cn/raw/b0b80635b4291e10347621e07c7cd252.png)
사용자 A가 'http://cloud.tencent.com/test.apk' 리소스를 요청할 때 하위 규칙이 상위 규칙보다 우선 순위가 높기 때문에 노드 리소스가 적중되지 않았거나 캐시된 리소스가 만료된 경우 요청에 범위 GET가 사용됩니다. 사용자 B가 `http://cloud.tencent.com/test.jpg` 리소스를 요청하는 경우 해당 규칙은 모든 파일만 매칭하므로 요청에 대해 origin-pull을 수행할 때 Range GET을 사용하지 않습니다.

