定期的なパージとプリフェッチは、Tencent Cloud SCF（Serverless Cloud Function）を通じて、定期的にトリガーされるパージ/プリフェッチタスクを設定します。 定期的なパージとプリフェッチタスクは、毎日のパージ/プリフェッチのクォータに含まれており、実行日に当日のクォータを超えるとタスクが失敗する恐れがあります。

## 設定についての説明

[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、メニューバーから【プラグインセンター】を選択します。定期的なパージとプリフェッチプラグイン機能カードをクリックし、定期的なパージとプリフェッチをアクティブにし、タスク設定ページに進みます。初回にアクティブにした後は、カード下部の【基本設定】をクリックして、定期的なパージとプリフェッチのタスクリストページに進み、設定することもできます。
![]()

新規作成した定時タスク画面で、対応するタスクタイプを選択し、Cronの定時表現（下記参照）を設定し、対応するパージ/プリフェッチURLを入力し、SCFの権限を承認すると、システムが自動的に対応するSCF（Serverless Cloud Function）を生成し、対応するタスクを時間どおりにトリガーすることができます。
![]()

>!SCFコンソールでこのSCFを削除しないでください。


タスクのステータスページで、定時タスクの直近の実行状況を確認することができます。
![]()

## Cron表現

Cron表現には合計7桁の値が含まれており、それぞれの値はスペースで区切る必要があります。

<table>
<thead>
<tr>
<th style="width:100px">桁数</th>
<th>フィールド</th>
<th>値範囲</th>
<th>ワイルドカード</th>
</tr>
</thead>
<tbody><tr>
<td>1桁目</td>
<td>秒</td>
<td>0～59の整数</td>
<td>,  - * /</td>
</tr>
<tr>
<td>2桁目</td>
<td>分</td>
<td>0～59の整数</td>
<td>,  - * /</td>
</tr>
<tr>
<td>3桁目</td>
<td>時</td>
<td>0～23の整数</td>
<td>,  - * /</td>
</tr>
<tr>
<td>4桁目</td>
<td>日</td>
<td>1～31の整数（その月の日数を考慮する）</td>
<td>,  - * /</td>
</tr>
<tr>
<td>5桁目</td>
<td>月</td>
<td>1～12の整数または JAN、FEB、MAR、APR、MAY、JUN、JUL、AUG、SEP、OCT、NOV、DEC</td>
<td>,  - * /</td>
</tr>
<tr>
<td>6桁目</td>
<td>週</td>
<td>0～6の整数またはSUN、MON、TUE、WED、THU、FRI、SAT。このうち0は日曜日、1は月曜日を指します。以下同様。</td>
<td>,  - * /</td>
</tr>
<tr>
<td>7桁目</td>
<td>年</td>
<td>1970～2099の整数</td>
<td>,  - * /</td>
</tr>
</tbody></table>

ワイルドカードの意味は以下のとおりです。

<table>
<thead>
<tr>
<th align="left" style="width:120px">ワイルドカード</th>
<th align="left">意味</th>
</tr>
</thead>
<tbody><tr>
<td align="left">,（コンマ）</td>
<td align="left">コンマで区切られた文字の集合を表わします。例：「時」フィールドの1、2、3は1時、2時、3時を表わします</td>
</tr>
<tr>
<td align="left">-（ダッシュ）</td>
<td align="left">指定範囲のすべての値が含まれます。例：「日」フィールドで、1～15は指定月の1日から15日までが含まれます</td>
</tr>
<tr>
<td align="left">*（アスタリスク）</td>
<td align="left">すべての値を表わします。「時」フィールドで、*は個々の時間を表わします</td>
</tr>
<tr>
<td align="left">/ （スラッシュ）</td>
<td align="left">増分を指定します。「分」フィールドで、1/10と入力すると、最初の1分から10分間隔の繰り返しを指定します。たとえば、11分、21分、31分となり、以下同様に続きます</td>
</tr>
</tbody></table>


>!Cron表現の「日」と「週」のフィールドで同時に値を指定すると、両者は「or」の関係性となり、両者の条件はそれぞれ有効となります。


### 事例

**1回のみのタスク**

- `33 22 11 6 7 * 2021`は2021-7-6 11:22:33にタスクをトリガーすることを表わします
- `00 00 20 25 10 * 2021`は2021-10-25 20:00:00にタスクをトリガーすることを表わします

**定期的なタスク**

- `*/5 * * * * * *` は5秒ごとにタスクを1回トリガーすることを表わします。
- `0 0 2 1 * * *`は毎月1日の午前2時にタスクをトリガーすることを表わします。
- `0 15 10 * * MON-FRI *`は月曜日から金曜日まで毎日午前10:15にタスクをトリガーすることを表わします。
- `0 0 10,14,16 * * * *`は毎日午前10時、午後2時、4時にタスクをトリガーすることを表わします。
- `0 */30 9-17 * * * *`は毎日午前9時から午後5時まで30分ごとにタスクをトリガーすることを表わします。
- `0 0 12 * * WED *`は毎週水曜日の正午12時にタスクをトリガーすることを表わします。

## 料金説明

定期的なパージとプリフェッチ機能自体は無料ですが、SCFを呼び出して定時タスクを作成する場合、SCFは課金サービスです。詳細は [SCF課金説明](https://intl.cloud.tencent.com/document/product/583/17299) をご参照ください。
