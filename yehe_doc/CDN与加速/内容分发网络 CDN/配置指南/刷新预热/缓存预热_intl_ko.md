## 기능 소개

도메인에 CDN을 활성화한 후 초기 상태에서는 전체 네트워크 CDN 가속 노드에 어떠한 도메인 리소스도 캐시하지 않은 상태가 됩니다. 노드 캐시 작업은 사용자 요청으로 트리거되며, 사용자가 CDN 가속 노드 요청 시 노드 상에 캐시 리소스가 없거나 캐시 리소스가 만료된 경우 CDN 중간 레이어로 원본을 가져오며, 중간 레이어에도 캐시가 없거나 캐시가 만료된 경우 사용자 원본 서버로 원본을 가져옵니다.

Tencent Cloud CDN은 리소스 프리패치 기능을 제공하여 사용자가 트리거를 요청할 필요 없이 CDN 콘솔에서 리소스 리스트를 제출해 지정된 리소스를 가속 노드에 로딩합니다.

- 노드에서 콘텐츠 로딩 시, 해당 캐시와 동일한 이름의 리소스가 만료되지 않은 경우 리소스를 로딩하지 않습니다. 동일한 이름의 문서를 업데이트하는 경우 먼저 전체 네트워크 퍼지를 진행하십시오.
- 노드에서 리소스 로딩 시, 필요한 콘텐츠의 원본을 가져옵니다. 따라서 대량의 프리패치 작업을 제출한 후에는 원본 서버 대역폭이 증가합니다.
- 전체 네트워크 가속 도메인은 기본적으로 이중 레이어 가속 구조로 구성되어 있습니다. 중국 내 리전 프리패치의 경우 리소스는 기본적으로 중국 내 중간 레이어 노드에 로딩되며, 중국 외 리전 프리패치의 경우 리소스는 기본적으로 중국 외 엣지 노드에 로딩됩니다.

> 참고:
>
> 중국 외 리전 프리패치의 경우 리소스는 기본적으로 중국 외 엣지 노드에 로딩되며, 이로 인해 발생하는 엣지 레이어 트래픽은 과금 트래픽으로 합산됩니다.

## 적용 시나리오

### 설치 패키지 배포

신규 버전 설치 패키지 또는 업데이트 패키지 배포 전에 리소스를 CDN 가속 노드에 프리패치합니다. 정식 런칭 후, 수많은 사용자들의 다운로드 요청을 직접 글로벌 가속 노드에서 응답하게 되어 다운로드 속도가 향상될 뿐만 아니라 원본 서버의 부담을 대폭 줄여줍니다.

### 운영 이벤트

운영 이벤트 배포 전에 이벤트 페이지와 관련된 정적 리소스를 CDN 가속 노드에 프리패치합니다. 이벤트 개시 후, 사용자가 액세스하는 모든 정적 리소스는 가속 노드에서 응답하게 되며, 대량의 대역폭을 비축하여 사용자의 서비스 가용성을 보장하고 사용자 경험을 향상시켜 줍니다.

## 운영 가이드

### 사용 방법

1. [CDN 콘솔](https://console.cloud.tencent.com/cdn)에 로그인한 후, 왼쪽 디렉터리에서 [Purge and Prefetch]를 클릭한 다음 필요에 따라 [URL 프리패치]를 제출하십시오.
2. 프리패치 작업 제출 시 다음과 같이 프리패치 리전 지정을 지원합니다.
	- 가속 도메인이 중국 내 가속인 경우, [중국 내] 가속 지정 지원
	- 가속 도메인이 중국 외 가속인 경우, [중국 외] 가속 지정 지원
	- 가속 도메인이 글로벌 가속인 경우, [글로벌], [중국 내], [중국 외] 가속 지정 지원


![](https://main.qcloudimg.com/raw/410621be989e1f0f65c46fd907b6dc6a.png)


3. [History]를 클릭하면 시간 주기, 키워드를 지정하여 프리패치 작업을 조회할 수 있으며, 도메인을 지정하여 조회하거나 완전한 URL을 지정하여 조회할 수 있습니다.
![](https://main.qcloudimg.com/raw/5f4d32e7d79a1a8d0a6390e8fecbc0ec.png)

### 주의사항

#### 프리패치 제한

- 계정당 매일, 가속 리전별로 1000개의 URL 프리패치를 진행할 수 있으며, 한 번에 20개까지 제출할 수 있습니다. 글로벌 프리패치를 진행하는 경우 동시에 중국 내/외 프리패치 제한이 적용됩니다.
- 프리패치 작업 제출 시에는 `http://` 또는 `https://` 프로토콜 식별자가 반드시 존재해야 합니다.
- `http://*.test.com` 양식의 URL 프리패치는 지원되지 않습니다.
- 중국어가 포함된 URL 경로 프리패치는 지원되지 않습니다.


#### 서브 계정 권한 설정

- URL 프리패치 및 프리패치 기록 조회는 현재 최신 권한 시스템에 액세스하여 리소스(도메인) 차원의 권한 설정을 지원합니다.
- 할당 방식은 [권한 설정](https://intl.cloud.tencent.com/document/product/228/35229)을 참조하십시오.



