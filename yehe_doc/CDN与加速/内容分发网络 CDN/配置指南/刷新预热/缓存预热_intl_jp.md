## 機能概要

ドメイン名でContent Delivery Network（CDN）を立ち上げた後、初期状態では、ネットワーク全体のCDNアクセラレーションノード上にはドメイン名リソースのキャッシュはありません。ノードのキャッシュはユーザーのリクエストでトリガーされ、ユーザーのリクエストがCDNアクセラレーションノードに届いた時に、ノード上にキャッシュリソースがない、またはキャッシュリソースが既に期限切れの場合、CDN中間層ノードまでback-to-originして取得し、中間層にもキャッシュがなくまたはリソースが期限切れの場合は、ユーザーのオリジンサーバーまでback-to-originしてプルします。

Tencent Cloud CDNではリソースのプリフェッチ機能を提供しています。ユーザーのリクエストでトリガーさせる必要がなく、CDNコンソールでリソースリストをサブミットし、指定リソースはアクセラレーションノードにロードされます。

- ノードにコンテンツをロードする時、そのキャッシュの同名のリソースが期限切れになっていない場合は、リソースのロードを行いません。同名のファイルを更新する時は、先にネットワーク全体の更新を行うことをお薦めします。
- ノードにリソースをロードする時はback-to-originで必要なコンテンツをプルします。このため大量のプリフェッチタスクをサブミットした後、オリジンサーバーの帯域幅が増加します。
- ネットワーク全体のアクセラレーションドメイン名はデフォルトの状態では2層アクセラレーション構造となっています。中国国内のリージョンのプリフェッチは、リソースはデフォルトで中国国内の中間層ノードにロードされ、中国国外のリージョンのプリフェッチは、リソースはデフォルトで中国国外のエッジノードにロードされます。

> 注意：
>
> 中国国外のリージョンのプリフェッチでは、リソースはデフォルトで中国国外のエッジノードにロードされ、発生するエッジ層のトラフィックは課金トラフィックに計上されます。

## 適用ケース

### インストールパッケージのリリース

新バージョンのインストールパッケージまたはレベルアップパッケージのリリース前に、事前にリソースをCDNアクセラレーションノードでプリフェッチします。正式なサービスの開始後は、膨大なユーザーのダウンロードリクエストにはグローバルアクセラレーションノードが直接レスポンスし、ダウンロードスピードをアップすると同時に、オリジンサーバーの負荷を大幅に引き下げます。

### イベントオペレーション

運用するイベントのリリース前に、事前にイベントページに関連する静的リソースをCDNアクセラレーションノードでプリフェッチします。イベントの開始後、ユーザーアクセスの中の全ての静的リソースはいずれもアクセラレーションノードからレスポンスされ、大量の帯域幅のストックがユーザーサービスの可用性を保証し、ユーザーエクスペリエンスを向上させます。

## 操作ガイド

### 利用方法

1.  [CDN コンソール](https://console.cloud.tencent.com/cdn)にログインし、左側のディレクトリの【パージとプリフェッチ】をクリックし、ページに入ってから必要に応じて【URL更新】をサブミットします。
2. プリフェッチタスクをサブミットする場合、プリフェッチリージョンの指定をサポートします。
	- アクセラレーションドメイン名を国内のアクセラレーションにすると、【中国国内】のアクセラレーションの指定のみサポートします。
	- アクセラレーションドメイン名を国外のアクセラレーションにすると、【中国国外】のアクセラレーションの指定のみサポートします。
	- アクセラレーションドメイン名をグローバルアクセラレーションにすると、【グローバル】、【中国国内】、【中国国外】のアクセラレーションの指定をサポートします。


![](https://main.qcloudimg.com/raw/410621be989e1f0f65c46fd907b6dc6a.png)


3. 【操作履歴】をクリックし、時間周期、キーワードを指定してプリフェッチタスクのクエリーを行うことができます。ドメイン名の指定によるクエリー、または完全なURLの指定によるクエリーをサポートしています。
![](https://main.qcloudimg.com/raw/5f4d32e7d79a1a8d0a6390e8fecbc0ec.png)

### 注意事項

#### プリフェッチ制限

- １つのアカウントの1日あたりの各アクセラレーションリージョンにおけるURLプリフェッチ上限枠は1000件であり、1回にサブミットできるURLプリフェッチ上限枠は20件です。グローバルタイプのプリフェッチの後は、国内、国外のプリフェッチ割り当てが同時に消費されます。
- プリフェッチタスクをサブミットする際に、`http://`または`https://`プロトコル識別子を付け加える必要があります。
- `http://*.test.com`形式のURLのプリフェッチはサポートしていません。
- パスに中国語が入っているURLはプリフェッチできません。


#### サブユーザー権限の設定

- プリフェッチURL、プリフェッチ履歴のクエリーは現在すでに最新の権限システムに接続され、リソース（ドメイン名）の権限設定をサポートしています。
- アサイン方法は [権限設定](https://intl.cloud.tencent.com/document/product/228/35229) をご参照ください。



