
<style> 
table th:nth-of-type(1) { width:16%; } 
table th:nth-of-type(2){ width:84%; } 
</style>

本ドキュメントでは、CDNコンソールでCDNアクセラレーションCVMを実現する全体的な操作フローと具体的な操作方法を詳しく説明します。

## 前提条件

1. Tencent Cloudのアカウント登録を完了し、実名認証します。
2. CVMサービス有効化の詳細については、[CVMの使用開始](https://intl.cloud.tencent.com/document/product/213/10517)をご参照ください。

## 操作ガイド

### ドメイン名の追加

[CDNコンソール](https://console.cloud.tencent.com/cdn)にログインし、左側ナビゲーションバーで【ドメイン名管理】をクリックして管理ページに進み、【ドメイン名の追加】をクリックします。

### その1：ドメイン名の設定

ドメイン名にアクセラレーションしたい自身のサービスドメイン名を入力し、そのプロジェクト、アクセラレーションリージョン、およびサービスタイプを選択します。


**設定項目の詳細説明：**

| 設定項目   | 説明                                                     |
| -------- | ------------------------------------------------------------ |
| ドメイン名     | 1. ドメイン名の長さは81文字以内です。 <br/>2. 中国本土のドメイン名は工信部にてICP登録済みのものとします。 <br/>3.ドメイン名`a.test.com`、`a.b.test.com`などの形式のサブドメイン名または\*`.test.com`、\*`.a.test.com`形式の汎用ドメイン名をサポートします。 <br/>4. ドメイン名にアクセスするのが汎用ドメイン名である場合、または他のユーザーによってアクセスされている場合は、[所有権の検証](https://intl.cloud.tencent.com/document/product/228/5734)を行う必要があります。<br/><br/><strong>注意事項：</strong> <br/>1. 汎用ドメイン名にアクセスした後、そのサブドメイン名または第2レベル汎用ドメイン名については、他のアカウントでのアクセスは現在サポートされていません。<br/>2. `*.test.com`と`*.a.test.com`の同時アクセスは、現在サポートされていません。<br/>3.現在、アンダーバーを含むドメイン名と中国語ドメイン名のpunycodeコードへのアクセスをサポートしています。<br>　• 中国本土の中国語ドメイン名はまず中国語の形式で関連の登録を行う必要があります。　<br>　• 「中国語.ドメイン名」などの中国語ドメイン名は、サードパーティのツールで「xn--fiq228c.xn--eqrt2g」に変換した後、アクセスすることができます。　<br/>　• 「test_qq.tencent.cloud」などのアンダーバーを含むドメイン名は、直接追加することができます。<br/>4. ドメイン名が悪意のあるドメイン名やハイリスクのドメイン名である場合は、アクセスできません。詳細については、 [使用制限](https://intl.cloud.tencent.com/document/product/228/32981)をご参照ください。 |
| 所属プロジェクト      | プロジェクトは、Tencent Cloudのすべてのクラウドサービスの共有リソースセットの概念です。[プロジェクト管理](https://console.cloud.tencent.com/project)ページでプロジェクト関連の操作を実行できます。|
| アクセラレーションリージョン      | 中国本土：グローバルユーザーからのアクセスは、中国本土のアクセラレーションノードにスケジューリングされてサービスを提供します。<br/>中国本土以外：グローバルユーザーからのアクセスは、中国本土以外のアクセラレーションノードにスケジューリングされてサービスを提供します。<br/>グローバル：グローバルユーザーからのアクセスは、最も近いノードにスケジューリングされてサービスを提供します。<br/><br/><strong>注意事項：</strong><br/>中国本土と中国本土以外アクセラレーションサービスは別々で課金されます。課金ポリシーの詳細について[クリックして確認](https://intl.cloud.tencent.com/document/product/228/2949)してください。|
｜サービスタイプ| Tencent Cloud CDNでは、異なるサービスタイプに相応しいアクセラレーションパフォーマンスの最適化が行われています。<br/>より良いアクセラレーション効果を得るには、ご自分のサービスに近いサービスタイプを選択することをお勧めします。<br/><br/>静的アクセラレーション：電子商取引、Webサイト、ゲーム画像系の小規模リソースアクセラレーションシナリオに適しています。 <br/>ダウンロードアクセラレーション：ゲームのインストールパッケージ、音声・動画ソースファイルのダウンロード、携帯電話のファームウェア配布などのダウンロードシナリオに適しています。<br/>ストリーミングメディアVODのアクセラレーション：オンライン教育、オンライン動画オンデマンドなどに適しています。|
| アクセラレーションプロトコル | IPv4：ノードはIPv4アクセスのみをサポートします。<br/>IPv4 + IPv6：ノードはIPv4とIPv6の両方のアクセスをサポートしています。このオプションにチェックを入れた場合のみ、IPv6オリジンサーバーを設定できます。<br/><br/><strong>注意事項：</strong><br/>IPv6は、中国本土でのみサポートされています。|

### その2：オリジンサーバーの設定

サービスオリジンサーバー関連情報を設定します。CDNノードはキャッシュにリソースがない場合、オリジンサーバーに戻って取り出してキャッシュします。


**設定項目の詳細説明：**

| 設定項目   | 説明                                                     |
| -------- | ------------------------------------------------------------ |
| オリジンサーバータイプ | ユーザー保有オリジンサーバー：安定して稼働している業務サーバー（オリジンサーバー）がある場合は、これを選択します。<br/><a href = "https://intl.cloud.tencent.com/product/cos">Cloud Object Storage（COSオリジンサーバー）</a>：リソースがCOSにすでに保存されている場合は、直接bucketを選択してオリジンサーバーとすることができます。 |
| オリジンサーバーアドレス | ユーザー保有オリジンサーバー：<br/>1. 複数のIPをオリジンサーバーとして設定することをサポートし、back-to-origin時にポーリングback-to-originを実行します。<br/>2. 複数のIPシナリオでは、back-to-originの重みを設定することができます。形式はIP：ポート:主に(1～100)で、ポートを省略し、 IP::重みとすることができます。<br/>3.  1つのドメインをオリジンサーバーとして設定することをサポートし、このドメイン名はビジネスアクセラレーションドメイン名と異なる必要があります。<br/><br/>COSオリジンサーバー：<br/>1. ドロップダウンボックスでオリジンサーバーとして設定したいパケットを選択します。<br/>2. パケットがプライベートな読み取り/書き込み専用である場合は、まずCDNサービスにバケットに対するアクセス権限を付与する必要があります。権限を付与しない場合は、back-to-originが失敗するおそれがあります。 |
| back-to-originプロトコル | オリジンサーバーでサポートされているプロトコルに基づいて選択できます。<br/>HTTP：HTTP / HTTPSアクセス要求はHTTP back-to-originを使用します。<br/>HTTPS：HTTP / HTTPSアクセス要求はHTTPS back-to-originを使用します。（オリジンサーバーはHTTPSアクセスをサポートする必要があります）。<br/>Follow protocol：HTTPアクセス要求はHTTP back-to-originを使用します。HTTPSアクセス要求はHTTPS back-to-originを使用します。（オリジンサーバーはHTTPSアクセスをサポートする必要があります）。 |
| back-to-originドメイン名 | back-to-originドメイン名とは、CDNノードがback-to-originするときに、オリジンサーバーでアクセスしたサイトのドメイン名のことです。<br/>サブドメイン名にアクセスする場合、デフォルトはアクセラレーションドメイン名と同じで、カスタマイズして変更できます。<br/>汎用ドメイン名にアクセスする場合、デフォルトでは実際にアクセスするサブドメイン名となります。カスタマイズして変更できます。|

### その3：サービスの設定

ノードアクセラレーションサービス関連の設定を行います。


**設定項目の詳細説明：**

| 設定項目   | 説明                                                     |
| -------- | ------------------------------------------------------------ |
| パラメータの無視 | ノードがリソースをキャッシュするには、Key-Valueマッピングに従います。ここでのKeyはリソースURLです。<br/> パラメータの無視を有効にすると、KeyはURLの「?」以降のパラメータを無視してマッピングします。<br/>パラメータの無視を有効にしないと、Keyは完全なリソースURLになります。<br/>静的アクセラレーションタイプは、デフォルトでは無効になっており、ダウンロードおよびストリーミングメディアVODアクセラレーションタイプは、デフォルトでは有効になっています。詳細については、[キャッシュキールールの設定](https://intl.cloud.tencent.com/document/product/228/35316)をご参照ください。 |
| Back-to-Origin of Range | back-to-origin時にパート化するかどうかを設定します。有効化するにはオリジンサーバーがパート化をサポートしている必要があります。詳細については、[パートback-to-origin設定](https://intl.cloud.tencent.com/document/product/228/7184)をご参照ください。<br/>オリジンサーバータイプがCOSオリジンサーバーである場合は、Back-to-Origin of Rangeがデフォルトで有効になっています。 |
| キャッシュルール | ノードキャッシュの有効期限の設定であり、デフォルトでは、すべてのファイルのキャッシュの有効期限は30日間です。<br/>設定されたノードキャッシュの有効期限は最長の有効期限であり、ノードのストレージリソースの影響を受けます。実際のキャッシュ時間は状況に応じて決定されます。詳細については、[キャッシュの有効期限の設定](https://intl.cloud.tencent.com/document/product/228/35317)をご参照ください。 |

### アクセスの完了

**ドメイン名の追加**ページのすべての設定を入力後、【送信を確認】をクリックし、ドメイン名追加操作を完了します。ドメイン名の設定をネットワーク全体のノードに配信するには約5～10分かかります。しばらくお待ちください。

### CNAMEの設定

ドメイン名が正常に追加されたら、**ドメイン名管理**ページで、CDNがドメイン名として割り当てられたアクセラレーションCNAMEを表示できます。アクセスドメイン名のDNSサービスプロバイダ（Dnspodなど）に接続し、このドメイン名にそのCNAMEレコードを追加して**DNS設定を有効化すると**、アクセラレーションサービスが実行可能になります。詳細については、[CNAME設定](https://intl.cloud.tencent.com/document/product/228/3121)をご参照ください 。

> !関連部門の規定によれば、オリジンサーバーはTencent Cloud CVMのアクセラレーションドメイン名であり、back-to-origin HOSTによって設定されたドメイン名をTencentCloudにICP登録する必要があります。詳細については、 [back-to-origin HOSTの設定](https://intl.cloud.tencent.com/document/product/228/6289)をご参照ください。
