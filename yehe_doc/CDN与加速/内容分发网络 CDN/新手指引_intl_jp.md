



## 基本概念

Tencent Cloudは、複雑なネットワーク環境に対応し、インターネットビジネスのネットワーク面でのさまざまなトラブルを改善するため、既存のネットワーク構造にグローバルな高性能アクセラレーションノードを既存のネットワーク構造に追加して、新しい仮想ネットワークアーキテクチャを構築します。これによってキャッシュポリシーに従い、ユーザーに近いエッジノードにお客様のビジネスコンテンツをストレージし、ユーザーとビジネスコンテンツ間の距離を短くすることで、アクセスの遅延を減らし、使いやすさを向上させます。

Tencent Cloudは、アクセラレーションサービスをより良く区別するため、アクセラレーションのタイプに応じて異なる製品を提供しています。

- 静的リソース向けの**CDN - Content Delivery Network**：ユーザーが特定リソースに複数回アクセスし、**同じ**コンテンツを返します。
例：html、cssおよびjsファイル、画像、ビデオ、ソフトウェアのインストールパッケージ、apkファイル、圧縮パッケージファイルなど。
推奨シナリオ：Webサイトの静的リソースアクセラレーション、ファイルダウンロードのアクセラレーション、オーディオビデオのアクセラレーション。
- 動的リソース向けの**ECDN - Enterprise Content Delivery Network**：ユーザーが特定リソースに複数回アクセスし、**異なる**コンテンツを返します。
例：APIインターフェース、.jsp、.asp、.php、.perlおよび.cgiファイルなど。
推奨シナリオ：動的アクセラレーション、動的・静的アクセラレーション。

  

<table>
  <tr>
    <td>コンテンツの対比</td>
    <td align='middle'><b>CDN Content Delivery Network</b></td>
    <td align='middle'><b>Enterprise Content Delivery Network(ECDN)</b></td>
  </tr>
  <tr>
    <td>ユースケース</td>
    <td>Webサイトの静的リソースアクセラレーション、ファイルのダウンロード、オーディオビデオオンデマンドWebサイト</td>
    <td>eコマース取り引き、ゲームの支払い、金融Webサイト、eラーニング</td>
  </tr>
  <tr>
    <td>カバー範囲</td>
    <td colspan="2" align="middle">中国本土<br>中国本土以外<br>グローバル</td>
  </tr>
  <tr>
    <td>課金方式</td>
    <td align="middle">トラフィック時間による課金<br>中国本土ユーザーはトラフィックパッケージサービスをご利用いただけます<br>詳細については、<a href="https://intl.cloud.tencent.com/document/product/228/2949">CDN課金説明</a><をご参照ください/td>
    <td align="middle">リクエスト回数+超過トラフィック課金<br>詳細については、<a href="https://intl.cloud.tencent.com/document/product/570/37505">ECDN課金説明</a>をご参照ください</td>
  </tr>
  <tr>
    <td>アクセラレーション方式</td>
    <td align="middle">静的コンテンツのアクセラレーション、動的コンテンツのback-to-origin</td>
    <td align="middle">動的アクセラレーションと動的・静的ハイブリッドアクセラレーションをサポートします<br></td>
  </tr>
  <tr>
    <td>リソースのストック</td>
    <td colspan='2' align='middle'>全世界で2800以上のノード、合計帯域幅は150Tbps以上、70以上の国と地域をカバーしています</td>
  </tr>
</table>



アクセラレーションしたいドメイン名をTencent Cloudに接続する場合、[CDNコンソール](https://console.cloud.tencent.com/cdn)のアクセラレーションタイプから2つの製品を選択できます。



2種類のアクセラレーションタイプには、異なるアクセラレーションポリシーと課金基準が使用される点にご注意ください。詳細については、[CDN課金説明](https://intl.cloud.tencent.com/document/product/228/2949)および[ECDN課金説明](https://intl.cloud.tencent.com/document/product/570/37505)をご参照ください。





## CDN接続例

![](https://qcloudimg.tencent-cloud.cn/raw/af95ca14834f1fb163b4d98e17f721f6.png)

### CDNアクセラレーションを設定するユーザーのアクセス例

深圳にいるユーザーは、cdntest.comを介してサーバーが北京にあるアドレス1.1.1.1のオリジンサーバーにアクセスします。

1. ユーザーがドメイン名「cdntest.com」を入力してアクセスすると、ローカルDNSが、ユーザーが設定したCNAME値「cdntest.com.cdn.dnsv1.com」に解決し、Tencentが自社開発したDNSスケジューリングシステムにリクエストを送信し、ユーザーに近い最適なCDNエッジノードIP2.2.2.2を割り当てます。
2. ユーザーは、IPが2.2.2.2のCDNノードをリクエストします。CDNノードがこのコンテンツをすでにキャッシュしている場合、ユーザーがリクエストしたコンテンツが返され、プロセスは終了します。
3. CDNノードがこのコンテンツをキャッシュしていない場合、北京にあるアドレス1.1.1.1のオリジンサーバーにリクエストを送信します。リクエストするコンテンツは、ユーザーが設定したback-to-origin HOSTによって決定されます。
4. CDNエッジノードは、オリジンサーバーからリソースを取得した後、ユーザー定義のキャッシュポリシーに従ってIPアドレス2.2.2.2のエッジノードにリソースをキャッシュし、ユーザーに返すと、このリクエストは終了します。
5. 深圳に近い他のユーザーが再度「cdntest.com」にアクセスすると、Tencent DNSスケジューリングにより、IPが2.2.2.2のCDNエッジノードが優先的にスケジューリングされます。この時点で、このエッジノードは対応するコンテンツをすでにキャッシュしています。従ってユーザーは、オリジンサーバーにアクセスしてリクエストする必要なく、このエッジノードを介してコンテンツを直接取得できます。

### 混同しやすい概念：

- ユーザーは「cdntest.com」を介してアクセスします。「cdntest.com」はアクセラレーションドメイン名です。
- アクセラレーションドメイン名を接続すると、システムは自動的に拡張子が`.cdn.dnsv1.com`または`.dsa.dnsv1.com`のCNAMEドメイン名を割り当てます。ドメイン名解決コンソールで解決する必要があります。例えば、"cdntest.com.cdn.dnsv1.com"/"cdntest.com.dsa.dnsv1.com"などです。
- CDNノードが、ユーザーがリクエストしたコンテンツをキャッシュしない場合、CDNノードは1.1.1.1に対してコンテンツをリクエストします。1.1.1.1とはオリジンサーバーのアドレスです。
- CDNノードが1.1.1.1をリクエストする場合、実際に リクエストされるアドレスは「originhost.com」であり、「originhost.com」はback-to-origin HOSTです。通常、アクセラレーションドメイン名とback-to-origin HOSTドメイン名は同じですが、ビジネスニーズに応じて調整することができます

| 設定名          | 設定の説明                                                     | 使用する場所          |
| ----------------- | ------------------------------------------------------------ | ----------------- |
| アクセラレーションドメイン名          | お客様がCDNに接続するドメイン名で、ユーザーが端末で実際にアクセスするドメイン名です。            | ドメイン名の追加-ドメイン名の設定 |
| オリジンサーバーアドレス/オリジンサーバードメイン名 | サーバーのオリジンサーバーに対応するIPアドレス（ドメイン名）です。CDNノードにリクエストされたコンテンツが含まれない場合、このアドレス（ドメイン名）にアクセスしてリクエストされたコンテンツを取得します。<br /><br />**オリジンサーバー：**はサービスを提供するサーバーで、ユーザーのリクエストの処理、応答ができます。ユーザーは、オリジンサーバーアドレスを介してアクセスします。オリジンサーバーアドレスはドメイン名またはIPアドレスで大丈夫です。**オリジンサーバードメイン名は、アクセラレーションドメイン名と同じにすることはできません**。 | ドメイン名の追加-オリジンサーバーの設定 |
| back-to-origin HOST          | CDNノードがback-to-originを行うときに、実際にリクエストされたサーバーのコンテンツです。                          | ドメイン名の追加-オリジンサーバーの設定 |
| CNAMEドメイン名         | お客様のアクセラレーションドメイン名を接続すると、システムは自動的にCNAMEドメイン名に拡張子`.cdn.dnsv1.com`または` .dsa.dnsv1.com`を割り当てます。<br />お客様のアクセラレーションドメイン名をCNAMEドメイン名にマッピングすると、Tencent CloudはCNAMEが指すIPアドレスを動的に変更し、すべてのアクセラレーションドメイン名を更新するので、各アクセラレーションドメイン名が指すIPアドレスを手動で変更する必要はありません。 | CNAMEの設定         |



## なぜCDN Content Delivery Networkを使用するのですか。

#### ユーザーがオリジンサーバーの静的コンテンツに直接アクセスすると、次のような問題が発生する可能性があります。

- クライアントがサーバーから離れれば離れるほど、アクセス速度が遅くなります。
- クライアント数が多いほど、ネットワーク帯域幅の料金が高くなります。
- 越境ユーザーのアクセシビリティは低くなります。

![](https://qcloudimg.tencent-cloud.cn/raw/cb1dd401c8cbb0e3835d9e410c37c31d.png)

>?以上のデータはあくまでも参考であり、複雑なネットワーク環境ではデータのばらつきがあっても正常です。

#### CDNはどのようにネットワークエクスペリエンスを改善するのか

- CDNがコンテンツをキャッシュした場合、ユーザーは近くのCDNノードにアクセスするだけで静的コンテンツを取得できます。
- オリジンサーバーの帯域幅のストレスを軽減し、ネットワーク料金を削減します。
- 全世界に分布している越境ノードは、越境アクセス時の体験をより良いものにします。

![](https://qcloudimg.tencent-cloud.cn/raw/7460b780994e836d97d549b79211f517.png)

>?以上のデータはあくまでも参考であり、複雑なネットワーク環境ではデータのばらつきがあっても正常です。

#### CDNの推奨ユースケース：

- Webサイトの静的リソースアクセラレーション：**一般的なWebサイトの静的コンテンツ**（ポータルサイト、eコマースサイト、UGCコミュニティなど）に適しています。例えば、画像やビデオ、さまざまなhtmlファイルなどのキャッシュアクセラレーションを行い、ユーザーにスムーズなアクセスを提供することができます。
- ファイルダウンロードアクセラレーション：**各種ファイルのダウンロード**に適しています。ファイルをエッジに割り当てることで、ダウンロードのピーク時の帯域幅のストレスを軽減できるだけでなく、ユーザーによるダウンロードを安定させます。
- オーディオビデオアクセラレーション：**さまざまなオーディオビデオのオンデマンドサイト**に適しています。Tencentが長年培ってきたオンラインビデオ操作の経験を踏まえ、オーディオビデオの同時アクセス数が多いときも、各リージョンのエンドユーザーがオーディオビデオをスムーズに視聴できるようにします。

## なぜEnterprise Content Delivery Network(ECDN)を使用するのですか。

### ユーザーがオリジンサーバーの静的コンテンツを直接リクエストすると、次のような問題が発生する可能性があります

- ネットワーク・リージョン・帯域幅はリソースのリクエストに影響を与え、高いレイテンシーや高いパケット損失率などの問題が発生します。
- ルーティングプロセスには、品質の低下とリンクの輻輳という問題が発生します。
- パブリックネットワーク環境は複雑であり、ユーザーの通常のカスタマーエクスペリエンスに影響を与えます。

![](https://qcloudimg.tencent-cloud.cn/raw/3fcb611b6d5c37e63b692daab957350f.png)

>?以上のデータはあくまでも参考であり、複雑なネットワーク環境ではデータのばらつきがあっても正常です。



#### ECDNはネットワークエクスペリエンスをどのように改善できますか。

- ユーザーは、最も近いECDNノードにアクセスして、リソースアクセスやback-to-originなどの操作を行います。
- ネットワーク全体のステータスをリアルタイムで監視し、最適なリンクを選択し、輻輳や低品質のリンクを回避します。

![](https://qcloudimg.tencent-cloud.cn/raw/e8ef115ebb2a4f719454b23e33b2dd6b.png)

>?以上のデータはあくまでも参考であり、複雑なネットワーク環境ではデータのばらつきがあっても正常です。



#### ECDNの推奨ユースケース

- 動的・静的アクセラレーション：**動的リソースと静的リソースが混在する**シナリオに適しています。動的と静的が混在するシナリオをワンストップで解決し、動的リソースと静的リソースを自動的に認識し、さまざまなアクセラレーションポリシーを採用して、動的・静的コンテンツのワンストップアクセラレーションを実現します。ECDNリンクを使用しているため、**動的・静的に対する課金はECDN課金基準**に基づいて行います。
- 動的アクセラレーション：ゲームバトル、eコマース取り引き、金融関連の支払い、eラーニングのシナリオなど、**動的リソースに対するリクエストが多いシナリオに適しています。動的パス検出やインテリジェントルーティングといった技術を通じて、最適なリンクを選択してback-to-originを行い、アクセス遅延を大幅に低減させます。

  
### Enterprise Content Delivery Network(ECDN)をアクティブにするには、どうすればいいですか。

1. 新規ユーザーが<a href="https://console.cloud.tencent.com/cdn">CDNコンソール</a>でサービスをアクティブにすると、CDNサービスとECDNサービスが同時にアクティブになります。使用されていないサービスに料金は発生しません。詳細については、<a href="https://intl.cloud.tencent.com/document/product/228/32978">ゼロから始めるCDNの設定</a>をご参照ください。
2. 現在、CDNサービスのみがアクティブ化されており、ECDNがアクティブ化されていない場合、動的アクセラレーション/動的アクセラレーションドメイン名を初めて追加するときに、システムが自動的にECDNサービスをアクティブ化します。下図のとおりです。

3. 元のECDNコンソールでECDNサービスをすでにアクティブにしている場合は、チケットを提出してバックエンドでアカウントの移行を行うことができます。移行が成功したら、CDNコンソールでECDNサービスを使用できるようになります。

>!
>-動的・静的アクセラレーション：各種Webサイトのトップページなど、動的・静的データが組み合わさった業務シナリオに適しています。
>-動的アクセラレーション：アカウントログイン、注文取引、APIの呼び出し、リアルタイム照会などのシーンに適しています。
>
>ECDNドメイン名で発生する料金は、[ECDNの課金方式](https://intl.cloud.tencent.com/document/product/570/37505)に基づいて課金されます。


## CDNを使用するのはいつですか。

お客様の業務にセキュリティに関する追加要件がある場合は、CDNをベースとして、追加のセキュリティサービスであるSCDNを購入することができます。SCDNの詳細については、[セキュリティアクセラレーションSCDN](https://intl.cloud.tencent.com/document/product/1032)をご参照ください。



## アクセラレーションリージョンを選ぶにはどうすればいいですか。

| お客様の所在場所                 | アクセラレーション効果                                             | アクセラレーションリージョンの選択 |
| :--------------------------- | ---------------------------------------------------- | ------------ |
| 中国本土                     | グローバルユーザーからのアクセスは、中国本土のアクセラレーションノードにスケジューリングされてサービスが行われます | 中国本土     |
| 中国本土以外（中国香港・マカオ・台湾地区を含む） | グローバルユーザーからのアクセスは、中国本土以外のアクセラレーションノードにスケジューリングされてサービスが行われます | 中国本土以外     |
| 中国本土 + 中国本土以外          | グローバルユーザーからのアクセスは、最も近いノードに最適にスケジューリングされてサービスが行われます           | グローバル         |

Tencent CloudのCDNとECDNは、どちらも世界中にエッジノードがあります。当社はお客様の選択に応じて、ユーザーを所在リージョンの最も近いノードに割り当てます。アクセラレーションリージョンによって料金基準も変わる点にご注意ください。[課金説明](https://intl.cloud.tencent.com/document/product/228/2949)をご参照ください。

>?トラフィックパッケージを購入した場合は、トラフィックパッケージのアベイラビリティーゾーンとお客様のアクセラレーションリージョンに対応しているかどうかにご注意ください。



## ゼロから始めるCDN/ECDNの設定

このチュートリアルでは、CDN/ECDNの設定方法と各パラメータについてすばやく学べます。[クイックスタート](https://intl.cloud.tencent.com/document/product/228/32978)をクリックしてご確認ください。
