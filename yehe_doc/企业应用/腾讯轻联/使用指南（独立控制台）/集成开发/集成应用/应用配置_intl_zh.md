
## 操作场景

进入一个集成应用后，可以通过创建多条集成流来实现业务逻辑。集成流画布中预留触发类组件位，可以放置拥有触发能力的逻辑组件或连接器，例如：HTTP Listener、Kafka、定时器等，拥有触发能力的集成流为主流，不具备触发能力的集成流则只能被其他集成流通过逻辑组件 [Flow Reference](https://www.tencentcloud.com/document/product/1165/51620) 引用为子流。  


## 集成流

平台支持对集成流的层次化管理，可通过创建文件夹，将相关集成流聚合，且文件夹和集成流在同一应用内支持新建、复制等操作进一步方便开发及维护。

### 新建集成流

集成流支持新建、复制、共享、重命名及删除操作。
![](https://qcloudimg.tencent-cloud.cn/raw/7e0efc1bc6563ffe098d393e1e92fdbb.png)

### 复制集成流
集成流可在同一应用内进行复制操作，单击复制后，会自动创建一个**XXX_副本**的集成流。
![](https://qcloudimg.tencent-cloud.cn/raw/506fc5bb40cd9cb26edd02d5e0f05917.png)
同时，也支持**批量复制**操作。
![](https://qcloudimg.tencent-cloud.cn/raw/583f4ea2a9dc47cc64b9b4145e6d974b.png)
单击「**批量操作**」后，可以进行全选、单个节点选择、连续几个节点选择（类似单元测试），选择节点后可以单击**复制**完成批量复制。
没有选择节点时复制按钮为 disable 状态，选择一个或多个节点后变成可点击状态。
复制完成后，可以在本项目下的其他流内粘贴复制的内容。
![](https://qcloudimg.tencent-cloud.cn/raw/e5ea9194464162eaff564e23ada7256a.png)

### 共享集成流

共享集成流后，该集成流支持项目内不同应用间通过逻辑组件 [Flow Reference](https://www.tencentcloud.com/document/product/1165/51620) 进行引用。
![](https://qcloudimg.tencent-cloud.cn/raw/6beef3ecaf89e3b265e611205503a8b0.png)
选择 Flow Reference 组件。
![](https://qcloudimg.tencent-cloud.cn/raw/4e910cb5382f7d1e7d56294af36ce796.png)

### 删除集成流

删除后，该集成流下的所有配置将被清空，且无法恢复，请谨慎操作。
![](https://qcloudimg.tencent-cloud.cn/raw/844b64570d90bcbb730d338f02aa3cf6.png)

### 文件夹

文件夹可将相关集成流聚合，且文件夹支持新建、新增流、复制等操作，方便您进一步管理维护集成流。
![](https://qcloudimg.tencent-cloud.cn/raw/6363ba2cab1190814201470669b5017d.png)
可选中已有集成流拖拽来进行顺序调整，或拖拽至某个文件夹内进行统一管理，拖拽至蓝色线条出现即可释放，稍后可以看到调整顺序成功。
![](https://qcloudimg.tencent-cloud.cn/raw/87a632fcda08954f315d15092d2bb56c.png)

## 组件库

新建一个集成流后会在画布中展示，单击画布中的“+”可以打开组件库，选择需要组件配置集成流。组件包括连接器和逻辑组件。其中，连接器又包括通用连接器、应用连接器和逻辑组件。

- 通用连接器：对应用系统交互的协议。
- 应用连接器：对应用本身的封装。例如：一个系统通过 HTTP 与外界交互，可以选择 HTTP 连接器进行参数配置实现连接；若想连接腾讯会议，则可以直接使用腾讯会议的连接器（封装了腾讯会议的接口、鉴权和交互协议）。
- 逻辑组件用来实现两个应用对接时的业务逻辑。例如：循环、选择、设置变量、数据转换、并行异步等。
  ![](https://qcloudimg.tencent-cloud.cn/raw/0ef51e79885d7e42c58c16f773f11c7c.png)

### 逻辑组件操作指引
1. 对于首次创建的集成流，需要选择 Trigger 组件，单击“+”选择执行组件。
![](https://qcloudimg.tencent-cloud.cn/raw/9374cd9759ca65011a168a2d6badb3b3.png)
2. 增加子节点时，会展示出父节点的信息。
![](https://qcloudimg.tencent-cloud.cn/raw/eb7bad5ee20eef6a637ebb57a51970ea.png)
3. 若增加逻辑组件会直接打开该组件的配置页面。根据页面提示，进行配置。
![](https://qcloudimg.tencent-cloud.cn/raw/2854565bf916f73ea02de400199c4cb9.png)

### 通用连接器或应用连接器操作指引

对于首次创建的集成流，需要选择 Trigger 组件，再单击“+”选择执行组件。若选择应用或通用连接器需要先选择需要的相关操作，再根据页面提示，进行 [应用连接器配置](#layout) 或 [通用连接器配置](#1)，并填写通用配置，若有特殊需求，可选择行填写高级配置。配置完成后可执行**数据预览**，查看配置是否正常，数据输出是否符合预期，且输出的数据可用于下一节点。数据**点选输入**。
![](https://qcloudimg.tencent-cloud.cn/raw/37447a48d59830b1c4414cc0ef79b1df.png)

[](id:layout)

#### 连接器配置

- 新建连接器配置：选择连接器并在画布上创建连接器后，在弹出的配置页面左上角提示：当前暂未绑定任何配置，请选择或者新建连接配置。单击**新建**按照页面提示填写信息即可。
  ![](https://qcloudimg.tencent-cloud.cn/raw/cfa063c0e267c70254e4fbb4d5495f07.png)
- 选择已有连接器配置：对于非首次创建集成流，若同一应用中已有连接器配置，则客户可以自行选择已有配置，若客户想修改第三方凭证信息，可以回到**连接**界面择新建或切换已有连接器配置。
  ![](https://qcloudimg.tencent-cloud.cn/raw/51bfef179c386b9a53702aec90820ebb.png)
- 连接器配置：对于已创建成功的连接器的连接配置，会在连接器的“连接”中展示，您可以单击编辑按钮，跳转至连接配置页面来编辑连接配置信息。
  ![](https://qcloudimg.tencent-cloud.cn/raw/84e90ddeab0578218bdf065bc90922bc.png)
- 切换应用连接器版本：对于选择的应用连接器，若连接器存在多版本，可在右上方的工具>连接器版本中自行切换所需版本。
> ?对应版本后若存在红色感叹号符号，代表目前所选版本非最新版本。
> 
[](id:1)
- 通用连接器配置
>?老版本应用可以看到通用配置，独立控制台发布后的新建应用不再展示通用配置。
>原因：老版本应用的通用连接器（http request等）的连接配置称为通用配置，独立控制台发布后新建应用通用连接器及应用连接器配置统一为连接配置，故不再展示通用配置。
>
 - 编辑通用连接器配置：对于选择的通用连接器，可在右上方的工具>连接器配置中单击名称进行编辑。
 - 删除通用连接器配置：对于选择的通用连接器，可在右上方的**工具** > **连接器配置**中单击 ![](https://qcloudimg.tencent-cloud.cn/raw/4def1a29337302a82d29669232eaa184.png) 进行删除。


### 在线预览

节点配置好后，可以通过预览步骤即刻查看该节点的输出数据及 schema，实时掌握数据内容，支撑连续开发。
![](https://qcloudimg.tencent-cloud.cn/raw/6b5e0561454c4f35f018ca5b539c7dbe.png)

### 集成数据面板

集成流节点配置时，通过鼠标点击会展示集成数据面板，输入数据即可点选前面节点的数据内容，轻松引用数据变量，选择多个时自然拼接。
![](https://qcloudimg.tencent-cloud.cn/raw/2010b4f6d2cda025fc7740dc17b61573.png)

### 单行表达式输入

参数输入时，当想对一些变量进行简单的加工，无需再打开代码输入框，切换“表达式”输入模式即可使用上百个快速命令符进行编排，包括：类型转换、操作符、方法引用、属性引用等。通过智能提示、自动补全等能力进一步简化输入过程。

## 多人协作开发模式

提供**多人协作**开发特性，让用户团队内多名成员可以同时开发同一个应用，提升开发效率。且通过设置编辑时加锁机制，解决了多人同时编辑带来的版本不一致问题。

>!多人开发是指支持单个应用下多个用户同时开发多条集成流。单条集成流在同一时间只支持被一位成员编辑，其余成员点击此集成流会处于锁定状态（不可编辑）。避免多人同时编辑带来的版本不一致问题。
>
![](https://qcloudimg.tencent-cloud.cn/raw/53c8f043245f8c3eb0775116ca5a0d1a.png)

## 调试功能

### 应用调试

#### 查看调试信息及报错

应用调试时，模拟一个触发操作对当前集成应用做整体调试，将集成应用发布到沙箱环境中运行，对应触发链接可直接复制 Tigger 后的链接地址。触发成功后画布会显示成功或失败，对应每个组件可以点击组件名称查看输入输出的详细信息，报错会集中在顶部展示，单击查看可以查看每个组件的报错详情。

#### 查看历史调试记录

单击查看历史调试记录，保留了每个时间点调试的快照信息，可查看每个时间点调试的具体参数和报错。最多展示最近10次的调试记录。方便核实每次调试的具体报错情况。
![](https://qcloudimg.tencent-cloud.cn/raw/eea61c03d92dac2e503da39c3e64ffe1.png)

#### 查看触发条件

支持查看当前应用下所有触发条件，并进行手动触发。截图示例是webhook手动触发。
![](https://qcloudimg.tencent-cloud.cn/raw/e2c7cc3db98d193e12edf2efa71ab54d.png)

### 单元调试

单元调试支持对一个或相邻的几个组件进行局部调试，在流比较复杂的情况下，做整体应用调试的耗时可能较长，可以做局部调试来减少耗时且尽快定位哪些组件可能异常（集成流首位的触发组件不可以被选中），选择右上角的单元调试，选择要进行调试的组件（可以选择首位组件即可，中间的节点默认选中避免挨个点的重复操作）。
![](https://qcloudimg.tencent-cloud.cn/raw/99e188bbec36c231549e45003027dfd6.png)
选中单元调试的节点后，需要模拟单元调试的输入数据，如果之前已经进行过单元调试、整体应用调试或者组件数据预览，平台会自动拉取这些历史调试数据作为历史数据，客户可以选择不同的历史数据或自动构造数据输入来进行调试，若之前不存在历史调试数据则需要用户手动输入模拟数据来进行调试。

[](id:2)

### 最小化调试窗口

独立控制台的调试，操作的是当前应用的一个特定版本，当前版本在缩小调试框后仍然可以对当前应用进行配置。

- 应用调试通过点击最小化，来最小化应用调试窗口。
- 单元调试点击关闭后，会自动最小化单元调试窗口。

> !由于配置的版本和调试版本分开，所以配置完成后建议重新进行应用调试，验证最新配置的应用的可用性。
>
也可单击最小化后的调试框在回到调试界面查看调试的详细内容。

### 查看调试记录

[最小化调试窗口](#2) 后可单击调试记录，查看历史的应用调试记录或单元调试记录。

## 搜索
支持搜索集成流名称、组件/连接器名称、配置内容。方便用户进一步快速确定应用内的有效内容及内置字段。
单击**搜索**，输入对应关键字。此处以“webhook”字段为例。
![](https://qcloudimg.tencent-cloud.cn/raw/cca8b41a8cfd7b3ea1b2e45c2c08a0aa.png)

## 工具
工具栏集中了[连接配置分组](https://www.tencentcloud.com/document/product/1165/51644#.E8.BF.9E.E6.8E.A5.E9.85.8D.E7.BD.AE.E5.88.86.E7.BB.84)、连接器版本切换、自定义脚本配置等功能。

>?老版本应用可以看到通用配置，独立控制台发布后的新建应用不再展示通用配置。
>原因：老版本应用的通用连接器（http request等）的连接配置称为通用配置，独立控制台发布后新建应用通用连接器及应用连接器配置统一为连接配置，故不再展示通用配置。
>
![](https://qcloudimg.tencent-cloud.cn/raw/6172e09edd0c7ed09d69d4fee3c641ff.png)

### 连接配置分组
可以在工具栏内进行 [连接器配置分组](https://www.tencentcloud.com/document/product/1165/51644#.E8.BF.9E.E6.8E.A5.E9.85.8D.E7.BD.AE.E5.88.86.E7.BB.84) 切换，便于客户在预览和调试下采用工具中设置的分组来进行调试。

### 连接器版本切换
切换应用连接器版本：对于选择的应用连接器，若连接器存在多版本，可在右上方的**工具** > **连接器版本**中自行切换所需版本。
>?对应版本后若存在红色感叹号符号，代表目前所选版本非最新版本。
>
[](id:1)
### 自定义脚本
平台侧提供了 Dataway 支持自定义脚本的功能，支持用户编写自定义的函数和组件,当前应用下创建的自定义脚本只能在此应用中引用，暂不支持垮项目垮应用引用。

#### 添加/删除自定义脚本

若要添加自定义脚本，可在右上方的**工具** > **自定义脚本**中单击“+”进行创建。单击脚本名称可查看或修改自定义脚本，单击 ![](https://qcloudimg.tencent-cloud.cn/raw/972522315f12a4e7072e5fdaa846a8cb.png) 可删除自定义脚本。

>!删除时会导致已绑定脚本的应用运行异常请谨慎操作。
> 
![](https://qcloudimg.tencent-cloud.cn/raw/a64c45c8ea1f20f690aa5acd1ef4e918.png)

#### 引用自定义脚本

选择组件单击 Dataway 表达式进行配置时，单击右上角的 ![](https://qcloudimg.tencent-cloud.cn/raw/be6abf09b4b4a3f2e15dfc1c17133138.png) 图标或单击**点击绑定**即可引用已有的自定义脚本。
![](https://qcloudimg.tencent-cloud.cn/raw/6b9d286dd3b4b5b98f60402b76b20539.png) 

## 发布

配置完成集成应用后，再进行发布，可以将其进行多地域发布，来减少由于环境异常导致的集成不可用的情况。	
![](https://qcloudimg.tencent-cloud.cn/raw/2e00eb298a210fbe963bfa7e4c0a2a86.png)

## 版本管理

每一个集成应用都有对应的版本号，当一个集成应用发布后处于运行中状态是不支持修改的，您可以通过复制一个集成应用会对应一个新的版本号，您可以在新的版本中进行修改和调试，且不影响之前已经运行中的版本，便于迭代管理。
>?2022年9月20号后创建的应用新增展示发布环境字段，再次发布时保留上次所选发布环境，方便管理。
>
![](https://qcloudimg.tencent-cloud.cn/raw/04b882ca1225587bd00a1c4cbd14e1d4.png)

