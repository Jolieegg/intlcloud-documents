## 監視

現在、Tencent Kubernetes Engine（TKE）は、次のディメンションの監視指標を提供しています。すべての指標は、統計サイクルの**平均**です。

### クラスター監視指標

|監視指標|単位|説明|
| --------| ---- | -------------- |
|CPU利用率|%|クラスター全体のCPU利用率|
|メモリ利用率|%|クラスター全体のメモリ利用率|

### Master&Etcdと通常ノードの監視指標

|監視指標|単位|説明|
| ---------------------------   | ---- | ------------------ |
| Podリスタート回数|回|ノード内のすべてのPodリスタート回数の合計|
| 異常状態  |  -  | ノードの状態、正常または異常      |
| CPU利用率     | %  | ノードの総数に対するノード内のすべてのPodのCPU使用量の比率    |
| メモリ利用率     | %  | ノードの総数に対するノード内のすべてのPodのメモリ使用量の比率    |
| プライベートネットワークのインバウンド帯域幅     | bps  | ノード内のすべてのPodのプライベートネットワークインバウンド方向の帯域幅の合計    |
| プライベートネットワークのアウトバウンド帯域幅     | bps  | ノード内のすべてのPodのプライベートネットワークアウトバウンド方向の帯域幅の合計    |
| パブリックネットワークのインバウンド帯域幅     | bps  | ノード内のすべてのPodのパブリックネットワークインバウンド方向の帯域幅の合計    |
| パブリックネットワークのアウトバウンド帯域幅     | bps  | ノード内のすべてのPodのパブリックネットワークアウトバウンド方向の帯域幅の合計    |
| TCP接続数     | 個  | ノードによって保持されているTCP接続数    |

クラスターノードの監視指標の詳細については、[Cloud Virtual Machine監視](http://intl.cloud.tencent.com/document/product/213/5178)をご参照ください。

クラスターノードのデータディスクの監視指標の詳細については、[Cloud Block Storage監視](http://intl.cloud.tencent.com/document/product/362/6742)をご参照ください。


### ワークロードの監視指標

| 監視指標                | 単位   | 説明                 |
| ---------------------------   | ---- | ------------------ |
| Podリスタート回数       | 回    | ワークロード内のすべてのPodリスタート回数の合計   |
| CPU使用量  | コア   | ワークロード内のすべてのPodのCPU使用量      |
| CPU利用率（クラスターに対する） | %  | クラスター総数に対するワークロード内のすべてのPodのCPU使用量の比率  |
| メモリ使用量  | B   | ワークロード内のすべてのPodのメモリ使用量      |
| メモリ利用率（クラスターに対する） | %  | クラスター総数に対するワークロード内のすべてのPodのメモリ使用量の比率  |
| ネットワークのインバウンド帯域幅     | bps  | ワークロード内のすべてのPodのインバウンド方向の帯域幅の合計    |
| ネットワークのアウトバウンド帯域幅     | bps  | ワークロード内のすべてのPodのアウトバウンド方向の帯域幅の合計    |
| ネットワークのインバウンドトラフィック     | B  | ワークロード内のすべてのPodのインバウンド方向のトラフィックの合計    |
| ネットワークのアウトバウンドトラフィック     | B  | ワークロード内のすべてのPodのアウトバウンド方向のトラフィックの合計    |
| ネットワークのインバウンドパケット     | 個/s  | ワークロード内のすべてのPodのインバウンド方向のパケットの合計    |
| ネットワークのアウトバウンドパケット     | 個/s  | ワークロード内のすべてのPodのアウトバウンド方向のパケットの合計    |

ワークロードがクラスター外でサービスを提供する場合、バインディングされたServiceのネットワーク監視指標の詳細については、[Cloud Load Balancer監視](http://intl.cloud.tencent.com/document/product/214/8885)をご参照ください。


### Pod 監視指標

| 監視指標                | 単位   | 説明                 |
| ---------------------------   | ---- | ------------------ |
| 異常状態  |  -  | Podの状態、正常または異常      |
| CPU使用量  | コア   | PodのCPU使用量      |
| CPU利用率（ノードに対する） | %  | ノードの総数に対するPodのCPU使用量の比率  |
| CPU利用率（Requestに対する） | %  | 設定されたRequest値に対するPodのCPU使用量の比率  |
| CPU利用率（Limitに対する） | %  | 設定されたLimit値に対するPodのCPU使用量の比率  |
| メモリ使用量  | B   | キャッシュを含むPodのメモリ使用量      |
| メモリ使用量（Cacheを除く）  | B   | Pod内のすべてのContainerの実際のメモリ使用量（キャッシュを除く）    |
| メモリ利用率（ノードに対する） | %  | ノードの総数に対するPodのメモリ使用量の比率  |
| メモリ利用率（ノードに対する、Cacheを除く） | %  | ノードの総数に対するPod内のすべてのContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| メモリ利用率（Requestに対する） | %  | 設定されたRequest値に対するPodのメモリ使用量の比率  |
| メモリ利用率（Requestに対する、Cacheを除く） | %  | 設定されたRequest値に対するPod内のすべてのContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| メモリ利用率（Limitに対する） | %  | 設定されたLimit値に対するPodのメモリ使用量の比率  |
| メモリ利用率（Limitに対する、Cacheを除く） | %  | 設定されたLimit値に対するPod内のすべてのContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| ネットワークのインバウンド帯域幅     | bps  | Podのインバウンド方向の帯域幅の合計    |
| ネットワークのアウトバウンド帯域幅     | bps  | Podのアウトバウンド方向の帯域幅の合計    |
| ネットワークのインバウンドトラフィック     | B  | Podのインバウンド方向のトラフィックの合計    |
| ネットワークのアウトバウンドトラフィック     | B  | Podのアウトバウンド方向のトラフィックの合計    |
| ネットワークのインバウンドパケット     | 個/s  | Podのインバウンド方向のパケットの合計    |
| ネットワークのアウトバウンドパケット     | 個/s  | Podのアウトバウンド方向のパケットの合計    |

### Container監視指標

| 監視指標                | 単位   | 説明                 |
| ---------------------------   | ---- | ------------------ |
| CPU使用量  | コア   | ContainerのCPU使用量      |
| CPU利用率（ノードに対する） | %  | ノードの総数に対するContainerのCPU使用量の比率  |
| CPU利用率（Requestに対する） | %  | 設定されたRequest値に対するContainerのCPU使用量の比率  |
| CPU利用率（Limitに対する） | %  | 設定されたLimit値に対するContainerのCPU使用量の比率  |
| メモリ使用量  | B   | キャッシュを含むContainerのメモリ使用量      |
| メモリ使用量（Cacheを除く）  | B   | Containerの実際のメモリ使用量（キャッシュを除く）    |
| メモリ利用率（ノードに対する） | %  | ノードの総数に対するContainerのメモリ使用量の比率  |
| メモリ利用率（ノードに対する、Cacheを除く） | %  | ノードの総数に対するContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| メモリ利用率（Requestに対する） | %  | 設定されたRequest値に対するContainerのメモリ使用量の比率  |
| メモリ利用率（Requestに対する、Cacheを除く） | %  | 設定されたRequest値に対するContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| メモリ利用率（Limitに対する） | %  | 設定されたLimit値に対するContainerのメモリ使用量の比率  |
| メモリ利用率（Limitに対する、Cacheを除く） | %  | 設定されたLimit値に対するContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| ブロックデバイスの読取帯域幅     | B/s  | Containerがディスクからデータを読み取るスループット    |
| ブロックデバイスの書込帯域幅     | B/s  | Containerがディスクにデータを書き込むスループット    |
| ブロックデバイスの読取IOPS     | 回/s  | Containerがディスクからデータを読み取るIO回数    |
| ブロックデバイスの書込IOPS     | 回/s  | Containerがディスクにデータを書き込むIO回数    |

## アラート

現在、TKEは、次のディメンションのアラーム指標を提供しています。すべての指標は、統計サイクルの**平均**です。

### クラスターアラーム指標

| 監視指標 | 単位   | 説明  |
| --------| ---- | -------------- |
| CPU利用率 | %    | クラスター全体のCPU利用率 |
| メモリ利用率 | %    | クラスター全体のメモリ利用率 %  |
| CPUアサイン率 | %    | クラスターのアサイン可能なCPU合計に対するクラスターのすべてのコンテナによって設定されたCPU Requestの合計の比率 |
| メモリアサイン率 | %    | クラスターのアサイン可能なメモリ合計に対するクラスターのすべてのコンテナによって設定されたメモリRequestの合計の比率 |
| Apiserver正常 | - | Apiserver状態、デフォルトでFalseのときにアラームであり、独立したクラスターのみがこの指標をサポートする  |
| Etcd正常 | - | Etcd状態、デフォルトでFalseのときにアラームであり、独立したクラスターのみがこの指標をサポートする  |
| Scheduler正常 | - | Scheduler状態、デフォルトでFalseのときにアラームであり、独立したクラスターのみがこの指標をサポートする  |
| Controll Manager正常 | - | Controll Manager状態、デフォルトでFalseのときにアラームであり、独立したクラスターのみがこの指標をサポートする  |

### ノードアラーム指標

| 監視指標 | 単位   | 説明  |
| --------| ---- | -------------- |
| CPU利用率     | %  | ノードの総数に対するノード内のすべてのPodのCPU使用量の比率    |
| メモリ利用率     | %  | ノードの総数に対するノード内のすべてのPodのメモリ使用量の比率    |
| ノードでのPodリスタート回数     | 回  | ノード内のすべてのPodリスタート回数の合計    |
| Node Ready     | -  | ノードの状態、デフォルトでFalseのときにアラームである    |

クラスターノードの指標アラームの詳細については、[Cloud Virtual Machine監視](http://intl.cloud.tencent.com/document/product/213/5178)および[クラウド監視によるアラームポリシーの作成](https://intl.cloud.tencent.com/document/product/248/38908)。

クラスターノードのデータディスクの指標アラームの詳細については、[Cloud Block Storage監視](http://intl.cloud.tencent.com/document/product/362/6742)および[クラウド監視によるアラームポリシーの作成](https://intl.cloud.tencent.com/document/product/248/38908)。


### Podアラーム指標

| 監視指標                | 単位   | 説明                 |
| ---------------------------   | ---- | ------------------ |
| CPU利用率（ノードに対する） | %  | ノードの総数に対するPodのCPU使用量の比率  |
| メモリ利用率（ノードに対する） | %  | ノードの総数に対するPodのメモリ使用量の比率  |
| 実際のメモリ利用率（ノードに対する） | %  | ノードの総数に対するPod内のすべてのContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| CPU利用率（Limitに対する） | %  | 設定されたLimit値に対するPodのCPU使用量の比率  |
| メモリ利用率（Limitに対する） | %  | 設定されたLimit値に対するPodのメモリ使用量の比率  |
| 実際のメモリ利用率（Limitに対する） | %  | 設定されたLimit値に対するPod内のすべてのContainerの実際のメモリ使用量（キャッシュを除く）の比率  |
| Podリスタート回数  |  回  | Podリスタート回数   |
| Pod Ready  | -   | Podの状態、デフォルトでFalseのときにアラームである    |
| CPU使用量  | コア   | PodのCPU使用量      |
| メモリ使用量  | MB   | キャッシュを含むPodのメモリ使用量    |
| 実際のメモリ使用量  | MB   | キャッシュを除くPod内のすべてのContainerの実際のメモリ使用量の合計    |
