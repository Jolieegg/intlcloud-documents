## 서비스 생성 관련 FAQ

### 서비스 이름이 고유해야 하는 이유는 무엇입니까?

서비스 이름은 클러스터에서 서비스를 고유하게 식별합니다. 서비스는 서비스 이름+액세스 포트를 사용하여 서로 액세스할 수 있습니다.

### Tencent Cloud 또는 dockerhub 이미지 대신 3rd party 이미지를 사용하여 서비스를 생성할 수 있습니까?

네. CVM에 로그인하고 docker login 명령을 실행하여 3rd party 이미지 레지스트리에 로그인하고 이미지를 풀링할 수 있습니다.

### 인터넷 서비스를 이용하기 위한 전제 조건은 무엇입니까?

클러스터의 CVM 인스턴스는 인터넷 대역폭으로 구성되어야 합니다. 그렇지 않으면 인터넷 서비스가 생성되지 않습니다.

### 메모리 및 CPU 제한은 어떻게 구성합니까?

자세한 내용은 [워크로드의 리소스 제한 설정](https://intl.cloud.tencent.com/document/product/457/30667)을 참고하십시오.

### 서비스를 생성할 때 혜택 옵션은 무엇을 의미합니까?

이 옵션이 활성화되면 컨테이너의 애플리케이션은 진정한 root 권한을 갖게 됩니다. 예를 들어 NFS 서버를 구축할 때와 같이 컨테이너의 애플리케이션에 대해 높은 수준의 시스템 작업을 수행해야 하는 경우 이 옵션을 활성화하는 것이 좋습니다.


### CLB 생성 시 보안 그룹을 지정할 수 있습니까?

네. 서비스에서 CLB를 사용할 때 다음 솔루션 중 하나를 사용하여 보안 그룹을 지정할 수 있습니다.
- 기존 CLB를 사용합니다. 먼저 CLB를 생성하고 보안 그룹을 구성한 다음 서비스에 탑재합니다. 자세한 내용은 기존 CLB 사용 Service를 참고하십시오.
- 서비스에서 `TkeServiceConfig`를 사용하여 보안 그룹을 설정합니다. CLB가 생성되면 CLB는 구성에 따라 해당 보안 그룹을 사용합니다. 이 기능을 사용하려면 [티켓 제출](https://console.cloud.tencent.com/workorder/category?level1_id=6&level2_id=163&source=0&data_title=%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%20LB&step=1)하십시오.

>접근 실패를 방지하기 위해 CLB IP 주소를 사용하여 클러스터의 서비스에 접근하지 마십시오.
>일반적으로 Layer4 CLB는 여러 Node를 real server(rs)로 바인딩합니다. client와 rs가 동일한 CVM에 있지 않은지 확인합니다. 그렇지 않으면 루프백으로 인해 패킷이 전송되지 않을 수 있습니다.
Pod가 CLB에 액세스할 때 Pod IP 주소는 소스 IP 주소입니다. 패킷이 사설망으로 라우팅될 때 CLB는 snat를 사용하여 소스 IP 주소를 Node IP 주소로 변환하지 않습니다. 결과적으로 CLB는 패킷의 소스 Node를 식별할 수 없고 CLB의 루프백 방지 정책이 적용되지 않으며 패킷은 임의의 rs로 전달될 수 있습니다. client가 있는 Node로 패킷을 전달할 때 CLB는 응답을 수신할 수 없으므로 액세스 실패가 발생합니다.





## 서비스 컨테이너 수 업데이트에 대한 FAQ

### 컨테이너 수를 업데이트할 때 주의해야 할 사항은 무엇입니까?

CPU 및 메모리 리소스가 충분한지 확인합니다. 그렇지 않으면 컨테이너 생성이 실패합니다.

### 컨테이너 수를 0으로 설정할 수 있습니까?

네. 컨테이너 수를 0으로 설정하면 서비스 설정이 유지되고 리소스가 해제됩니다.


## 서비스 설정 업데이트에 대한 FAQ

### 롤링 업데이트가 지원됩니까?

네. 롤링 업데이트와 빠른 업데이트가 모두 지원됩니다.

### 공개 CLB를 비공개 CLB로 변경할 수 있습니까?

네. 현재 서비스 액세스 모드를 인터넷을 통해에서 VPC를 통해로 또는 VPC를 통해에서 인터넷을 통해로 변경하거나 VPC 서브넷을 전환할 수 있습니다. 자세한 내용은 Service 라이프사이클 관리를 참고하십시오.
>
> - 서비스가 CLB 라이프사이클을 관리하는 경우 CLB 및 해당 공용 IP 주소가 해제됩니다.
> - 인터넷에서 VPC로 전환하는 데 시간이 걸립니다. 즉, public CLB가 오프라인 상태가 된 후 private CLB가 서비스를 제공하기 시작할 때까지 시간이 걸립니다. 먼저 클러스터에서 프라이빗 서비스를 구성하고 테스트하는 것이 좋습니다. 그런 다음 트래픽이 새 서비스로 전환된 후 원래 공공 서비스를 삭제합니다.


<span id="service"></span>
## 서비스 삭제 관련 FAQ

### 서비스가 생성한 CLB는 서비스 삭제 후 폐기되나요?
서비스를 생성할 때 CLB가 자동으로 생성된 경우 서비스 삭제 시 CLB도 함께 삭제됩니다. 서비스 생성 시 기존 CLB를 선택하면 해당 CLB는 삭제되지 않습니다.

### 서비스가 삭제되면 서비스 데이터가 영향을 받습니까?
아니요. 서비스를 삭제해도 서비스 컨테이너는 삭제되지 않으며 데이터도 영향을 받지 않습니다. 서비스를 삭제하기 전에 데이터를 백업할 필요가 없습니다.



## 서비스 운영에 관한 FAQ

### 컨테이너 시스템 시간을 베이징 시간으로 설정하려면 어떻게 합니까?

컨테이너의 기본 시스템 시간은 협정 세계시(UTC)입니다. 컨테이너 사용 시 컨테이너 시스템 시간이 현지 시간대와 다른 경우 dockerfile에 시간대 파일을 생성하여 이 문제를 해결할 수 있습니다. 자세한 내용은 [컨테이너에서 일관되지 않은 표준 시간대 문제 해결](https://intl.cloud.tencent.com/document/product/457/35292)을 참고하십시오. 


### ubuntu, php, busybox와 같은 일부 DockerHub 이미지에 TKE 예외가 발생하면 어떻게 해야 합니까?

시작 명령이 설정되지 않았거나 기본 시작 명령이 bash인 경우 시작 절차가 완료된 후 컨테이너가 종료됩니다. 컨테이너를 계속 실행하려면 PID가 1로 설정된 컨테이너의 프로세스가 영구 프로세스여야 합니다. 그렇지 않으면 이 프로세스가 종료될 때 컨테이너가 종료됩니다. centos와 같은 일부 이미지의 경우 /bin/bash를 실행 명령으로 사용하고 -c sleep 800000을 실행 매개변수로 사용하여 서비스를 생성할 수 있습니다. -c 및 sleep 800000은 콘솔의 다른 행에 입력해야 합니다.

현재 기본 매개변수를 사용하여 시작할 수 없는 이미지에는 clearlinux, ros, mageia, amazonlinux, ubuntu, clojure, crux, gcc, photon, java, debian, oraclelinux, mono, bash, buildpack-deps, golang, sourcemage, swift, openjdk, centos, busybox, docker, alpine, ibmjava, php 및 python이 있습니다.

